(()=>{var Jo=Object.create,Zr=Object.defineProperty;var Qo=Object.getOwnPropertyDescriptor;var es=Object.getOwnPropertyNames;var ts=Object.getPrototypeOf,is=Object.prototype.hasOwnProperty;var rs=$=>Zr($,"__esModule",{value:!0});var qt=($,N)=>()=>(N||$((N={exports:{}}).exports,N),N.exports);var ns=($,N,K)=>{if(N&&typeof N=="object"||typeof N=="function")for(let V of es(N))!is.call($,V)&&V!=="default"&&Zr($,V,{get:()=>N[V],enumerable:!(K=Qo(N,V))||K.enumerable});return $},Tr=$=>ns(rs(Zr($!=null?Jo(ts($)):{},"default",$&&$.__esModule&&"default"in $?{get:()=>$.default,enumerable:!0}:{value:$,enumerable:!0})),$);var ro=qt((Or,Jr)=>{(function($,N){if(typeof Or=="object"&&typeof Jr=="object")Jr.exports=N();else if(typeof define=="function"&&define.amd)define([],N);else{var K=N();for(var V in K)(typeof Or=="object"?Or:$)[V]=K[V]}})(self,function(){return(()=>{"use strict";var $={4567:function(W,s,g){var h,_=this&&this.__extends||(h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(i[l]=c[l])},h(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;var p=g(9042),f=g(6114),S=g(9924),m=g(3656),n=g(844),o=g(5596),u=g(9631),a=function(t){function e(i,c){var l=t.call(this)||this;l._terminal=i,l._renderService=c,l._liveRegionLineCount=0,l._charsToConsume=[],l._charsToAnnounce="",l._accessibilityTreeRoot=document.createElement("div"),l._accessibilityTreeRoot.setAttribute("role","document"),l._accessibilityTreeRoot.classList.add("xterm-accessibility"),l._accessibilityTreeRoot.tabIndex=0,l._rowContainer=document.createElement("div"),l._rowContainer.setAttribute("role","list"),l._rowContainer.classList.add("xterm-accessibility-tree"),l._rowElements=[];for(var v=0;v<l._terminal.rows;v++)l._rowElements[v]=l._createAccessibilityTreeNode(),l._rowContainer.appendChild(l._rowElements[v]);if(l._topBoundaryFocusListener=function(y){return l._onBoundaryFocus(y,0)},l._bottomBoundaryFocusListener=function(y){return l._onBoundaryFocus(y,1)},l._rowElements[0].addEventListener("focus",l._topBoundaryFocusListener),l._rowElements[l._rowElements.length-1].addEventListener("focus",l._bottomBoundaryFocusListener),l._refreshRowsDimensions(),l._accessibilityTreeRoot.appendChild(l._rowContainer),l._renderRowsDebouncer=new S.TimeBasedDebouncer(l._renderRows.bind(l)),l._refreshRows(),l._liveRegion=document.createElement("div"),l._liveRegion.classList.add("live-region"),l._liveRegion.setAttribute("aria-live","assertive"),l._accessibilityTreeRoot.appendChild(l._liveRegion),!l._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return l._terminal.element.insertAdjacentElement("afterbegin",l._accessibilityTreeRoot),l.register(l._renderRowsDebouncer),l.register(l._terminal.onResize(function(y){return l._onResize(y.rows)})),l.register(l._terminal.onRender(function(y){return l._refreshRows(y.start,y.end)})),l.register(l._terminal.onScroll(function(){return l._refreshRows()})),l.register(l._terminal.onA11yChar(function(y){return l._onChar(y)})),l.register(l._terminal.onLineFeed(function(){return l._onChar(`
`)})),l.register(l._terminal.onA11yTab(function(y){return l._onTab(y)})),l.register(l._terminal.onKey(function(y){return l._onKey(y.key)})),l.register(l._terminal.onBlur(function(){return l._clearLiveRegion()})),l.register(l._renderService.onDimensionsChange(function(){return l._refreshRowsDimensions()})),l._screenDprMonitor=new o.ScreenDprMonitor,l.register(l._screenDprMonitor),l._screenDprMonitor.setListener(function(){return l._refreshRowsDimensions()}),l.register((0,m.addDisposableDomListener)(window,"resize",function(){return l._refreshRowsDimensions()})),l}return _(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,u.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(i,c){var l=i.target,v=this._rowElements[c===0?1:this._rowElements.length-2];if(l.getAttribute("aria-posinset")!==(c===0?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===v){var y,E;if(c===0?(y=l,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(y=this._rowElements.shift(),E=l,this._rowContainer.removeChild(y)),y.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){var w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else w=this._createAccessibilityTreeNode(),this._rowElements.push(w),this._rowContainer.appendChild(w);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},e.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},e.prototype._onTab=function(i){for(var c=0;c<i;c++)this._onChar(" ")},e.prototype._onChar=function(i){var c=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){c._accessibilityTreeRoot.appendChild(c._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&(0,u.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},e.prototype._refreshRows=function(i,c){this._renderRowsDebouncer.refresh(i,c,this._terminal.rows)},e.prototype._renderRows=function(i,c){for(var l=this._terminal.buffer,v=l.lines.length.toString(),y=i;y<=c;y++){var E=l.translateBufferLineToString(l.ydisp+y,!0),w=(l.ydisp+y+1).toString(),b=this._rowElements[y];b&&(E.length===0?b.innerText="\xA0":b.textContent=E,b.setAttribute("aria-posinset",w),b.setAttribute("aria-setsize",v))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},e.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(n.Disposable);s.AccessibilityManager=a},3614:(W,s)=>{function g(f){return f.replace(/\r?\n/g,"\r")}function h(f,S){return S?"[200~"+f+"[201~":f}function _(f,S,m){f=h(f=g(f),m.decPrivateModes.bracketedPasteMode),m.triggerDataEvent(f,!0),S.value=""}function p(f,S,m){var n=m.getBoundingClientRect(),o=f.clientX-n.left-10,u=f.clientY-n.top-10;S.style.width="20px",S.style.height="20px",S.style.left=o+"px",S.style.top=u+"px",S.style.zIndex="1000",S.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=g,s.bracketTextForPaste=h,s.copyHandler=function(f,S){f.clipboardData&&f.clipboardData.setData("text/plain",S.selectionText),f.preventDefault()},s.handlePasteEvent=function(f,S,m){f.stopPropagation(),f.clipboardData&&_(f.clipboardData.getData("text/plain"),S,m)},s.paste=_,s.moveTextAreaUnderMouseCursor=p,s.rightClickHandler=function(f,S,m,n,o){p(f,S,m),o&&n.rightClickSelect(f),S.value=n.selectionText,S.select()}},4774:(W,s)=>{var g,h,_,p;function f(m){var n=m.toString(16);return n.length<2?"0"+n:n}function S(m,n){return m<n?(n+.05)/(m+.05):(m+.05)/(n+.05)}Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=void 0,function(m){m.toCss=function(n,o,u,a){return a!==void 0?"#"+f(n)+f(o)+f(u)+f(a):"#"+f(n)+f(o)+f(u)},m.toRgba=function(n,o,u,a){return a===void 0&&(a=255),(n<<24|o<<16|u<<8|a)>>>0}}(g=s.channels||(s.channels={})),(h=s.color||(s.color={})).blend=function(m,n){var o=(255&n.rgba)/255;if(o===1)return{css:n.css,rgba:n.rgba};var u=n.rgba>>24&255,a=n.rgba>>16&255,t=n.rgba>>8&255,e=m.rgba>>24&255,i=m.rgba>>16&255,c=m.rgba>>8&255,l=e+Math.round((u-e)*o),v=i+Math.round((a-i)*o),y=c+Math.round((t-c)*o);return{css:g.toCss(l,v,y),rgba:g.toRgba(l,v,y)}},h.isOpaque=function(m){return(255&m.rgba)==255},h.ensureContrastRatio=function(m,n,o){var u=p.ensureContrastRatio(m.rgba,n.rgba,o);if(u)return p.toColor(u>>24&255,u>>16&255,u>>8&255)},h.opaque=function(m){var n=(255|m.rgba)>>>0,o=p.toChannels(n),u=o[0],a=o[1],t=o[2];return{css:g.toCss(u,a,t),rgba:n}},h.opacity=function(m,n){var o=Math.round(255*n),u=p.toChannels(m.rgba),a=u[0],t=u[1],e=u[2];return{css:g.toCss(a,t,e,o),rgba:g.toRgba(a,t,e,o)}},h.toColorRGB=function(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]},(s.css||(s.css={})).toColor=function(m){switch(m.length){case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(m){function n(o,u,a){var t=o/255,e=u/255,i=a/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}m.relativeLuminance=function(o){return n(o>>16&255,o>>8&255,255&o)},m.relativeLuminance2=n}(_=s.rgb||(s.rgb={})),function(m){function n(u,a,t){for(var e=u>>24&255,i=u>>16&255,c=u>>8&255,l=a>>24&255,v=a>>16&255,y=a>>8&255,E=S(_.relativeLuminance2(l,y,v),_.relativeLuminance2(e,i,c));E<t&&(l>0||v>0||y>0);)l-=Math.max(0,Math.ceil(.1*l)),v-=Math.max(0,Math.ceil(.1*v)),y-=Math.max(0,Math.ceil(.1*y)),E=S(_.relativeLuminance2(l,y,v),_.relativeLuminance2(e,i,c));return(l<<24|v<<16|y<<8|255)>>>0}function o(u,a,t){for(var e=u>>24&255,i=u>>16&255,c=u>>8&255,l=a>>24&255,v=a>>16&255,y=a>>8&255,E=S(_.relativeLuminance2(l,y,v),_.relativeLuminance2(e,i,c));E<t&&(l<255||v<255||y<255);)l=Math.min(255,l+Math.ceil(.1*(255-l))),v=Math.min(255,v+Math.ceil(.1*(255-v))),y=Math.min(255,y+Math.ceil(.1*(255-y))),E=S(_.relativeLuminance2(l,y,v),_.relativeLuminance2(e,i,c));return(l<<24|v<<16|y<<8|255)>>>0}m.ensureContrastRatio=function(u,a,t){var e=_.relativeLuminance(u>>8),i=_.relativeLuminance(a>>8);if(S(e,i)<t)return i<e?n(u,a,t):o(u,a,t)},m.reduceLuminance=n,m.increaseLuminance=o,m.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},m.toColor=function(u,a,t){return{css:g.toCss(u,a,t),rgba:g.toRgba(u,a,t)}}}(p=s.rgba||(s.rgba={})),s.toPaddedHex=f,s.contrastRatio=S},7239:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;var g=function(){function h(){this._color={},this._rgba={}}return h.prototype.clear=function(){this._color={},this._rgba={}},h.prototype.setCss=function(_,p,f){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][p]=f},h.prototype.getCss=function(_,p){return this._rgba[_]?this._rgba[_][p]:void 0},h.prototype.setColor=function(_,p,f){this._color[_]||(this._color[_]={}),this._color[_][p]=f},h.prototype.getColor=function(_,p){return this._color[_]?this._color[_][p]:void 0},h}();s.ColorContrastCache=g},5680:function(W,s,g){var h=this&&this.__spreadArray||function(a,t,e){if(e||arguments.length===2)for(var i,c=0,l=t.length;c<l;c++)!i&&c in t||(i||(i=Array.prototype.slice.call(t,0,c)),i[c]=t[c]);return a.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(s,"__esModule",{value:!0}),s.ColorManager=s.DEFAULT_ANSI_COLORS=void 0;var _=g(4774),p=g(7239),f=_.css.toColor("#ffffff"),S=_.css.toColor("#000000"),m=_.css.toColor("#ffffff"),n=_.css.toColor("#000000"),o={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var a=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],e=0;e<216;e++){var i=t[e/36%6|0],c=t[e/6%6|0],l=t[e%6];a.push({css:_.channels.toCss(i,c,l),rgba:_.channels.toRgba(i,c,l)})}for(e=0;e<24;e++){var v=8+10*e;a.push({css:_.channels.toCss(v,v,v),rgba:_.channels.toRgba(v,v,v)})}return a}());var u=function(){function a(t,e){this.allowTransparency=e;var i=t.createElement("canvas");i.width=1,i.height=1;var c=i.getContext("2d");if(!c)throw new Error("Could not get rendering context");this._ctx=c,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:f,background:S,cursor:m,cursorAccent:n,selectionTransparent:o,selectionOpaque:_.color.blend(S,o),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return a.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},a.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,f),this.colors.background=this._parseColor(t.background,S),this.colors.cursor=this._parseColor(t.cursor,m,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,n,!0),this.colors.selectionTransparent=this._parseColor(t.selection,o,!0),this.colors.selectionOpaque=_.color.blend(this.colors.background,this.colors.selectionTransparent),_.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=_.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,s.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,s.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,s.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,s.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,s.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,s.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,s.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,s.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,s.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,s.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,s.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,s.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,s.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,s.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,s.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},a.prototype.restoreColor=function(t){if(t!==void 0)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},a.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:h([],this.colors.ansi,!0)}},a.prototype._parseColor=function(t,e,i){if(i===void 0&&(i=this.allowTransparency),t===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var c=this._ctx.getImageData(0,0,1,1).data;if(c[3]!==255){if(!i)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var l=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(C){return Number(C)}),v=l[0],y=l[1],E=l[2],w=l[3],b=Math.round(255*w);return{rgba:_.channels.toRgba(v,y,E,b),css:t}}return{css:this._ctx.fillStyle,rgba:_.channels.toRgba(c[0],c[1],c[2],c[3])}},a}();s.ColorManager=u},9631:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeElementFromParent=void 0,s.removeElementFromParent=function(){for(var g,h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];for(var p=0,f=h;p<f.length;p++){var S=f[p];(g=S==null?void 0:S.parentElement)===null||g===void 0||g.removeChild(S)}}},3656:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(g,h,_,p){g.addEventListener(h,_,p);var f=!1;return{dispose:function(){f||(f=!0,g.removeEventListener(h,_,p))}}}},3551:function(W,s,g){var h=this&&this.__decorate||function(n,o,u,a){var t,e=arguments.length,i=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,u):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,o,u,a);else for(var c=n.length-1;c>=0;c--)(t=n[c])&&(i=(e<3?t(i):e>3?t(o,u,i):t(o,u))||i);return e>3&&i&&Object.defineProperty(o,u,i),i},_=this&&this.__param||function(n,o){return function(u,a){o(u,a,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZone=s.Linkifier=void 0;var p=g(8460),f=g(2585),S=function(){function n(o,u,a){this._bufferService=o,this._logService=u,this._unicodeService=a,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new p.EventEmitter,this._onHideLinkUnderline=new p.EventEmitter,this._onLinkTooltip=new p.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(n.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),n.prototype.attachToDom=function(o,u){this._element=o,this._mouseZoneManager=u},n.prototype.linkifyRows=function(o,u){var a=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=o,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,o),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(o,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return a._linkifyRows()},n._timeBeforeLatency))},n.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var o=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var u=o.ydisp+this._rowsToLinkify.start;if(!(u>=o.lines.length)){for(var a=o.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,u,a,t,t);e.hasNext();)for(var i=e.next(),c=0;c<this._linkMatchers.length;c++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[c]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},n.prototype.registerLinkMatcher=function(o,u,a){if(a===void 0&&(a={}),!u)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:o,handler:u,matchIndex:a.matchIndex,validationCallback:a.validationCallback,hoverTooltipCallback:a.tooltipCallback,hoverLeaveCallback:a.leaveCallback,willLinkActivate:a.willLinkActivate,priority:a.priority||0};return this._addLinkMatcherToList(t),t.id},n.prototype._addLinkMatcherToList=function(o){if(this._linkMatchers.length!==0){for(var u=this._linkMatchers.length-1;u>=0;u--)if(o.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,o);this._linkMatchers.splice(0,0,o)}else this._linkMatchers.push(o)},n.prototype.deregisterLinkMatcher=function(o){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===o)return this._linkMatchers.splice(u,1),!0;return!1},n.prototype._doLinkifyRow=function(o,u,a){for(var t,e=this,i=new RegExp(a.regex.source,(a.regex.flags||"")+"g"),c=-1,l=function(){var y=t[typeof a.matchIndex!="number"?0:a.matchIndex];if(!y)return v._logService.debug("match found without corresponding matchIndex",t,a),"break";if(c=u.indexOf(y,c+1),i.lastIndex=c+y.length,c<0)return"break";var E=v._bufferService.buffer.stringIndexToBufferIndex(o,c);if(E[0]<0)return"break";var w=v._bufferService.buffer.lines.get(E[0]);if(!w)return"break";var b=w.getFg(E[1]),C=b?b>>9&511:void 0;a.validationCallback?a.validationCallback(y,function(T){e._rowsTimeoutId||T&&e._addLink(E[1],E[0]-e._bufferService.buffer.ydisp,y,a,C)}):v._addLink(E[1],E[0]-v._bufferService.buffer.ydisp,y,a,C)},v=this;(t=i.exec(u))!==null&&l()!=="break";);},n.prototype._addLink=function(o,u,a,t,e){var i=this;if(this._mouseZoneManager&&this._element){var c=this._unicodeService.getStringCellWidth(a),l=o%this._bufferService.cols,v=u+Math.floor(o/this._bufferService.cols),y=(l+c)%this._bufferService.cols,E=v+Math.floor((l+c)/this._bufferService.cols);y===0&&(y=this._bufferService.cols,E--),this._mouseZoneManager.add(new m(l+1,v+1,y+1,E+1,function(w){if(t.handler)return t.handler(w,a);var b=window.open();b?(b.opener=null,b.location.href=a):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(l,v,y,E,e)),i._element.classList.add("xterm-cursor-pointer")},function(w){i._onLinkTooltip.fire(i._createLinkHoverEvent(l,v,y,E,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(w,a,{start:{x:l,y:v},end:{x:y,y:E}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(l,v,y,E,e)),i._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(w){return!t.willLinkActivate||t.willLinkActivate(w,a)}))}},n.prototype._createLinkHoverEvent=function(o,u,a,t,e){return{x1:o,y1:u,x2:a,y2:t,cols:this._bufferService.cols,fg:e}},n._timeBeforeLatency=200,n=h([_(0,f.IBufferService),_(1,f.ILogService),_(2,f.IUnicodeService)],n)}();s.Linkifier=S;var m=function(n,o,u,a,t,e,i,c,l){this.x1=n,this.y1=o,this.x2=u,this.y2=a,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=i,this.leaveCallback=c,this.willLinkActivate=l};s.MouseZone=m},6465:function(W,s,g){var h,_=this&&this.__extends||(h=function(a,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}h(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(a,t,e,i){var c,l=arguments.length,v=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,t,e,i);else for(var y=a.length-1;y>=0;y--)(c=a[y])&&(v=(l<3?c(v):l>3?c(t,e,v):c(t,e))||v);return l>3&&v&&Object.defineProperty(t,e,v),v},f=this&&this.__param||function(a,t){return function(e,i){t(e,i,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;var S=g(2585),m=g(8460),n=g(844),o=g(3656),u=function(a){function t(e){var i=a.call(this)||this;return i._bufferService=e,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new m.EventEmitter),i._onHideLinkUnderline=i.register(new m.EventEmitter),i.register((0,n.getDisposeArrayDisposable)(i._linkCacheDisposables)),i}return _(t,a),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var i=this;return this._linkProviders.push(e),{dispose:function(){var c=i._linkProviders.indexOf(e);c!==-1&&i._linkProviders.splice(c,1)}}},t.prototype.attachToDom=function(e,i,c){var l=this;this._element=e,this._mouseService=i,this._renderService=c,this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",function(){l._isMouseOut=!0,l._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var c=e.composedPath(),l=0;l<c.length;l++){var v=c[l];if(v.classList.contains("xterm"))break;if(v.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,i){var c,l=this;this._activeProviderReplies&&i||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(function(y){y==null||y.forEach(function(E){E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var v=!1;this._linkProviders.forEach(function(y,E){var w;i?((w=l._activeProviderReplies)===null||w===void 0?void 0:w.get(E))&&(v=l._checkLinkProviderResult(E,e,v)):y.provideLinks(e.y,function(b){var C,T;if(!l._isMouseOut){var k=b==null?void 0:b.map(function(q){return{link:q}});(C=l._activeProviderReplies)===null||C===void 0||C.set(E,k),v=l._checkLinkProviderResult(E,e,v),((T=l._activeProviderReplies)===null||T===void 0?void 0:T.size)===l._linkProviders.length&&l._removeIntersectingLinks(e.y,l._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,i){for(var c=new Set,l=0;l<i.size;l++){var v=i.get(l);if(v)for(var y=0;y<v.length;y++)for(var E=v[y],w=E.link.range.start.y<e?0:E.link.range.start.x,b=E.link.range.end.y>e?this._bufferService.cols:E.link.range.end.x,C=w;C<=b;C++){if(c.has(C)){v.splice(y--,1);break}c.add(C)}}},t.prototype._checkLinkProviderResult=function(e,i,c){var l,v=this;if(!this._activeProviderReplies)return c;for(var y=this._activeProviderReplies.get(e),E=!1,w=0;w<e;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(E=!0);if(!E&&y){var b=y.find(function(T){return v._linkAtPosition(T.link,i)});b&&(c=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(w=0;w<this._activeProviderReplies.size;w++){var C=(l=this._activeProviderReplies.get(w))===null||l===void 0?void 0:l.find(function(T){return v._linkAtPosition(T.link,i)});if(C){c=!0,this._handleNewLink(C);break}}return c},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,n.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(e.link,c)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var l,v;return(v=(l=i._currentLink)===null||l===void 0?void 0:l.state)===null||v===void 0?void 0:v.decorations.pointerCursor},set:function(l){var v,y;((v=i._currentLink)===null||v===void 0?void 0:v.state)&&i._currentLink.state.decorations.pointerCursor!==l&&(i._currentLink.state.decorations.pointerCursor=l,i._currentLink.state.isHovered&&((y=i._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",l)))}},underline:{get:function(){var l,v;return(v=(l=i._currentLink)===null||l===void 0?void 0:l.state)===null||v===void 0?void 0:v.decorations.underline},set:function(l){var v,y,E;((v=i._currentLink)===null||v===void 0?void 0:v.state)&&((E=(y=i._currentLink)===null||y===void 0?void 0:y.state)===null||E===void 0?void 0:E.decorations.underline)!==l&&(i._currentLink.state.decorations.underline=l,i._currentLink.state.isHovered&&i._fireUnderlineEvent(e.link,l))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(l){var v=l.start===0?0:l.start+1+i._bufferService.buffer.ydisp;i._clearCurrentLink(v,l.end+1+i._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,i,c){var l;((l=this._currentLink)===null||l===void 0?void 0:l.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(c,i.text)},t.prototype._fireUnderlineEvent=function(e,i){var c=e.range,l=this._bufferService.buffer.ydisp,v=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-l-1,c.end.x,c.end.y-l-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(v)},t.prototype._linkLeave=function(e,i,c){var l;((l=this._currentLink)===null||l===void 0?void 0:l.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(c,i.text)},t.prototype._linkAtPosition=function(e,i){var c=e.range.start.y===e.range.end.y,l=e.range.start.y<i.y,v=e.range.end.y>i.y;return(c&&e.range.start.x<=i.x&&e.range.end.x>=i.x||l&&e.range.end.x>=i.x||v&&e.range.start.x<=i.x||l&&v)&&e.range.start.y<=i.y&&e.range.end.y>=i.y},t.prototype._positionFromMouseEvent=function(e,i,c){var l=c.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,i,c,l,v){return{x1:e,y1:i,x2:c,y2:l,cols:this._bufferService.cols,fg:v}},p([f(0,S.IBufferService)],t)}(n.Disposable);s.Linkifier2=u},9042:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(W,s,g){var h,_=this&&this.__extends||(h=function(a,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}h(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(a,t,e,i){var c,l=arguments.length,v=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,t,e,i);else for(var y=a.length-1;y>=0;y--)(c=a[y])&&(v=(l<3?c(v):l>3?c(t,e,v):c(t,e))||v);return l>3&&v&&Object.defineProperty(t,e,v),v},f=this&&this.__param||function(a,t){return function(e,i){t(e,i,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZoneManager=void 0;var S=g(844),m=g(3656),n=g(4725),o=g(2585),u=function(a){function t(e,i,c,l,v,y){var E=a.call(this)||this;return E._element=e,E._screenElement=i,E._bufferService=c,E._mouseService=l,E._selectionService=v,E._optionsService=y,E._zones=[],E._areZonesActive=!1,E._lastHoverCoords=[void 0,void 0],E._initialSelectionLength=0,E.register((0,m.addDisposableDomListener)(E._element,"mousedown",function(w){return E._onMouseDown(w)})),E._mouseMoveListener=function(w){return E._onMouseMove(w)},E._mouseLeaveListener=function(w){return E._onMouseLeave(w)},E._clickListener=function(w){return E._onClick(w)},E}return _(t,a),t.prototype.dispose=function(){a.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},t.prototype.clearAll=function(e,i){if(this._zones.length!==0){e&&i||(e=0,i=this._bufferService.rows-1);for(var c=0;c<this._zones.length;c++){var l=this._zones[c];(l.y1>e&&l.y1<=i+1||l.y2>e&&l.y2<=i+1||l.y1<e&&l.y2>i+1)&&(this._currentZone&&this._currentZone===l&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(c--,1))}this._zones.length===0&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var i=this,c=this._findZoneEventAt(e);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(e);i==null||i.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(e);(i==null?void 0:i.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var i=this._findZoneEventAt(e),c=this._getSelectionLength();i&&c===this._initialSelectionLength&&(i.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var c=i[0],l=i[1],v=0;v<this._zones.length;v++){var y=this._zones[v];if(y.y1===y.y2){if(l===y.y1&&c>=y.x1&&c<y.x2)return y}else if(l===y.y1&&c>=y.x1||l===y.y2&&c<y.x2||l>y.y1&&l<y.y2)return y}},p([f(2,o.IBufferService),f(3,n.IMouseService),f(4,n.ISelectionService),f(5,o.IOptionsService)],t)}(S.Disposable);s.MouseZoneManager=u},6193:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0;var g=function(){function h(_){this._renderCallback=_}return h.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},h.prototype.refresh=function(_,p,f){var S=this;this._rowCount=f,_=_!==void 0?_:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return S._innerRefresh()}))},h.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,p)}},h}();s.RenderDebouncer=g},5596:function(W,s,g){var h,_=this&&this.__extends||(h=function(f,S){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,n){m.__proto__=n}||function(m,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(m[o]=n[o])},h(f,S)},function(f,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function m(){this.constructor=f}h(f,S),f.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)});Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;var p=function(f){function S(){var m=f!==null&&f.apply(this,arguments)||this;return m._currentDevicePixelRatio=window.devicePixelRatio,m}return _(S,f),S.prototype.setListener=function(m){var n=this;this._listener&&this.clearListener(),this._listener=m,this._outerListener=function(){n._listener&&(n._listener(window.devicePixelRatio,n._currentDevicePixelRatio),n._updateDpr())},this._updateDpr()},S.prototype.dispose=function(){f.prototype.dispose.call(this),this.clearListener()},S.prototype._updateDpr=function(){var m;this._outerListener&&((m=this._resolutionMediaMatchList)===null||m===void 0||m.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},S.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},S}(g(844).Disposable);s.ScreenDprMonitor=p},3236:function(W,s,g){var h,_=this&&this.__extends||(h=function(he,x){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,I){B.__proto__=I}||function(B,I){for(var X in I)Object.prototype.hasOwnProperty.call(I,X)&&(B[X]=I[X])},h(he,x)},function(he,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=he}h(he,x),he.prototype=x===null?Object.create(x):(B.prototype=x.prototype,new B)});Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;var p=g(2950),f=g(1680),S=g(3614),m=g(2584),n=g(5435),o=g(3525),u=g(3551),a=g(9312),t=g(6114),e=g(3656),i=g(9042),c=g(357),l=g(6954),v=g(4567),y=g(1296),E=g(7399),w=g(8460),b=g(8437),C=g(5680),T=g(3230),k=g(4725),q=g(428),D=g(8934),A=g(6465),O=g(5114),H=g(8969),R=g(4774),Z=g(4269),Q=g(5941),oe=typeof window!="undefined"?window.document:null,le=function(he){function x(B){B===void 0&&(B={});var I=he.call(this,B)||this;return I.browser=t,I._keyDownHandled=!1,I._keyPressHandled=!1,I._unprocessedDeadKey=!1,I._onCursorMove=new w.EventEmitter,I._onKey=new w.EventEmitter,I._onRender=new w.EventEmitter,I._onSelectionChange=new w.EventEmitter,I._onTitleChange=new w.EventEmitter,I._onBell=new w.EventEmitter,I._onFocus=new w.EventEmitter,I._onBlur=new w.EventEmitter,I._onA11yCharEmitter=new w.EventEmitter,I._onA11yTabEmitter=new w.EventEmitter,I._setup(),I.linkifier=I._instantiationService.createInstance(u.Linkifier),I.linkifier2=I.register(I._instantiationService.createInstance(A.Linkifier2)),I.register(I._inputHandler.onRequestBell(function(){return I.bell()})),I.register(I._inputHandler.onRequestRefreshRows(function(X,j){return I.refresh(X,j)})),I.register(I._inputHandler.onRequestSendFocus(function(){return I._reportFocus()})),I.register(I._inputHandler.onRequestReset(function(){return I.reset()})),I.register(I._inputHandler.onRequestWindowsOptionsReport(function(X){return I._reportWindowsOptions(X)})),I.register(I._inputHandler.onColor(function(X){return I._handleColorEvent(X)})),I.register((0,w.forwardEvent)(I._inputHandler.onCursorMove,I._onCursorMove)),I.register((0,w.forwardEvent)(I._inputHandler.onTitleChange,I._onTitleChange)),I.register((0,w.forwardEvent)(I._inputHandler.onA11yChar,I._onA11yCharEmitter)),I.register((0,w.forwardEvent)(I._inputHandler.onA11yTab,I._onA11yTabEmitter)),I.register(I._bufferService.onResize(function(X){return I._afterResize(X.cols,X.rows)})),I}return _(x,he),Object.defineProperty(x.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),x.prototype._handleColorEvent=function(B){var I,X;if(this._colorManager){for(var j=0,Y=B;j<Y.length;j++){var se=Y[j],Ce=void 0,Me="";switch(se.index){case 256:Ce="foreground",Me="10";break;case 257:Ce="background",Me="11";break;case 258:Ce="cursor",Me="12";break;default:Ce="ansi",Me="4;"+se.index}if(Ce)switch(se.type){case 0:var Ae=R.color.toColorRGB(Ce==="ansi"?this._colorManager.colors.ansi[se.index]:this._colorManager.colors[Ce]);this.coreService.triggerDataEvent(m.C0.ESC+"]"+Me+";"+(0,Q.toRgbString)(Ae)+m.C0.BEL);break;case 1:Ce==="ansi"?this._colorManager.colors.ansi[se.index]=R.rgba.toColor.apply(R.rgba,se.color):this._colorManager.colors[Ce]=R.rgba.toColor.apply(R.rgba,se.color);break;case 2:this._colorManager.restoreColor(se.index)}}(I=this._renderService)===null||I===void 0||I.setColors(this._colorManager.colors),(X=this.viewport)===null||X===void 0||X.onThemeChange(this._colorManager.colors)}},x.prototype.dispose=function(){var B,I,X;this._isDisposed||(he.prototype.dispose.call(this),(B=this._renderService)===null||B===void 0||B.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(X=(I=this.element)===null||I===void 0?void 0:I.parentNode)===null||X===void 0||X.removeChild(this.element))},x.prototype._setup=function(){he.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(x.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),x.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},x.prototype._updateOptions=function(B){var I,X,j,Y;switch(he.prototype._updateOptions.call(this,B),B){case"fontFamily":case"fontSize":(I=this._renderService)===null||I===void 0||I.clear(),(X=this._charSizeService)===null||X===void 0||X.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(j=this.viewport)===null||j===void 0||j.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new v.AccessibilityManager(this,this._renderService)):((Y=this._accessibilityManager)===null||Y===void 0||Y.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},x.prototype._onTextAreaFocus=function(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(m.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},x.prototype.blur=function(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()},x.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(m.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},x.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var B=this.buffer.ybase+this.buffer.y,I=this.buffer.lines.get(B);if(I){var X=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.actualCellHeight,Y=I.getWidth(X),se=this._renderService.dimensions.actualCellWidth*Y,Ce=this.buffer.y*this._renderService.dimensions.actualCellHeight,Me=X*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Me+"px",this.textarea.style.top=Ce+"px",this.textarea.style.width=se+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}}},x.prototype._initGlobal=function(){var B=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(X){B.hasSelection()&&(0,S.copyHandler)(X,B._selectionService)}));var I=function(X){return(0,S.handlePasteEvent)(X,B.textarea,B.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,e.addDisposableDomListener)(this.element,"paste",I)),t.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(X){X.button===2&&(0,S.rightClickHandler)(X,B.textarea,B.screenElement,B._selectionService,B.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",function(X){(0,S.rightClickHandler)(X,B.textarea,B.screenElement,B._selectionService,B.options.rightClickSelectsWord)})),t.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(X){X.button===1&&(0,S.moveTextAreaUnderMouseCursor)(X,B.textarea,B.screenElement)}))},x.prototype._bindKeys=function(){var B=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(I){return B._keyUp(I)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(I){return B._keyDown(I)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(I){return B._keyPress(I)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return B._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(I){return B._compositionHelper.compositionupdate(I)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return B._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(I){return B._inputEvent(I)},!0)),this.register(this.onRender(function(){return B._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(I){return B._queueLinkification(I.start,I.end)}))},x.prototype.open=function(B){var I=this;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),B.appendChild(this.element);var X=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),X.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),X.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(se){return I._onTextAreaFocus(se)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return I._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var j=this._instantiationService.createInstance(O.CoreBrowserService,this.textarea);this._instantiationService.setService(k.ICoreBrowserService,j),this._charSizeService=this._instantiationService.createInstance(q.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new C.ColorManager(oe,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(se){return I._colorManager.onOptionsChange(se)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(Z.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService);var Y=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,Y,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(se){return I._onRender.fire(se)})),this.onResize(function(se){return I._renderService.resize(se.cols,se.rows)}),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(X),this._soundService=this._instantiationService.createInstance(c.SoundService),this._instantiationService.setService(k.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(D.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,function(se){return I.scrollLines(se,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return I.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){I._renderService.onCursorMove(),I._syncTextArea()})),this.register(this.onResize(function(){return I._renderService.onResize(I.cols,I.rows)})),this.register(this.onBlur(function(){return I._renderService.onBlur()})),this.register(this.onFocus(function(){return I._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return I.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(a.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(se){return I.scrollLines(se.amount,se.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return I._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(se){return I._renderService.onSelectionChanged(se.start,se.end,se.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(se){I.textarea.value=se,I.textarea.focus(),I.textarea.select()})),this.register(this._onScroll.event(function(se){I.viewport.syncScrollArea(),I._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return I._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(l.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return I._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(se){return I._selectionService.onMouseDown(se)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new v.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},x.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(o.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(y.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},x.prototype._setTheme=function(B){var I,X,j;this._theme=B,(I=this._colorManager)===null||I===void 0||I.setTheme(B),(X=this._renderService)===null||X===void 0||X.setColors(this._colorManager.colors),(j=this.viewport)===null||j===void 0||j.onThemeChange(this._colorManager.colors)},x.prototype.bindMouse=function(){var B=this,I=this,X=this.element;function j(ie){var Ee,Ie,ht=I._mouseService.getRawByteCoords(ie,I.screenElement,I.cols,I.rows);if(!ht)return!1;switch(ie.overrideType||ie.type){case"mousemove":Ie=32,ie.buttons===void 0?(Ee=3,ie.button!==void 0&&(Ee=ie.button<3?ie.button:3)):Ee=1&ie.buttons?0:4&ie.buttons?1:2&ie.buttons?2:3;break;case"mouseup":Ie=0,Ee=ie.button<3?ie.button:3;break;case"mousedown":Ie=1,Ee=ie.button<3?ie.button:3;break;case"wheel":ie.deltaY!==0&&(Ie=ie.deltaY<0?0:1),Ee=4;break;default:return!1}return!(Ie===void 0||Ee===void 0||Ee>4)&&I.coreMouseService.triggerMouseEvent({col:ht.x-33,row:ht.y-33,button:Ee,action:Ie,ctrl:ie.ctrlKey,alt:ie.altKey,shift:ie.shiftKey})}var Y={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se=function(ie){return j(ie),ie.buttons||(B._document.removeEventListener("mouseup",Y.mouseup),Y.mousedrag&&B._document.removeEventListener("mousemove",Y.mousedrag)),B.cancel(ie)},Ce=function(ie){return j(ie),B.cancel(ie,!0)},Me=function(ie){ie.buttons&&j(ie)},Ae=function(ie){ie.buttons||j(ie)};this.register(this.coreMouseService.onProtocolChange(function(ie){ie?(B.optionsService.options.logLevel==="debug"&&B._logService.debug("Binding to mouse events:",B.coreMouseService.explainEvents(ie)),B.element.classList.add("enable-mouse-events"),B._selectionService.disable()):(B._logService.debug("Unbinding from mouse events."),B.element.classList.remove("enable-mouse-events"),B._selectionService.enable()),8&ie?Y.mousemove||(X.addEventListener("mousemove",Ae),Y.mousemove=Ae):(X.removeEventListener("mousemove",Y.mousemove),Y.mousemove=null),16&ie?Y.wheel||(X.addEventListener("wheel",Ce,{passive:!1}),Y.wheel=Ce):(X.removeEventListener("wheel",Y.wheel),Y.wheel=null),2&ie?Y.mouseup||(Y.mouseup=se):(B._document.removeEventListener("mouseup",Y.mouseup),Y.mouseup=null),4&ie?Y.mousedrag||(Y.mousedrag=Me):(B._document.removeEventListener("mousemove",Y.mousedrag),Y.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(X,"mousedown",function(ie){if(ie.preventDefault(),B.focus(),B.coreMouseService.areMouseEventsActive&&!B._selectionService.shouldForceSelection(ie))return j(ie),Y.mouseup&&B._document.addEventListener("mouseup",Y.mouseup),Y.mousedrag&&B._document.addEventListener("mousemove",Y.mousedrag),B.cancel(ie)})),this.register((0,e.addDisposableDomListener)(X,"wheel",function(ie){if(!Y.wheel){if(!B.buffer.hasScrollback){var Ee=B.viewport.getLinesScrolled(ie);if(Ee===0)return;for(var Ie=m.C0.ESC+(B.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ie.deltaY<0?"A":"B"),ht="",xt=0;xt<Math.abs(Ee);xt++)ht+=Ie;return B.coreService.triggerDataEvent(ht,!0),B.cancel(ie,!0)}return B.viewport.onWheel(ie)?B.cancel(ie):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(X,"touchstart",function(ie){if(!B.coreMouseService.areMouseEventsActive)return B.viewport.onTouchStart(ie),B.cancel(ie)},{passive:!0})),this.register((0,e.addDisposableDomListener)(X,"touchmove",function(ie){if(!B.coreMouseService.areMouseEventsActive)return B.viewport.onTouchMove(ie)?void 0:B.cancel(ie)},{passive:!1}))},x.prototype.refresh=function(B,I){var X;(X=this._renderService)===null||X===void 0||X.refreshRows(B,I)},x.prototype._queueLinkification=function(B,I){var X;(X=this.linkifier)===null||X===void 0||X.linkifyRows(B,I)},x.prototype.updateCursorStyle=function(B){var I;((I=this._selectionService)===null||I===void 0?void 0:I.shouldColumnSelect(B))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},x.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},x.prototype.scrollLines=function(B,I,X){X===void 0&&(X=0),he.prototype.scrollLines.call(this,B,I,X),this.refresh(0,this.rows-1)},x.prototype.paste=function(B){(0,S.paste)(B,this.textarea,this.coreService)},x.prototype.attachCustomKeyEventHandler=function(B){this._customKeyEventHandler=B},x.prototype.registerLinkMatcher=function(B,I,X){var j=this.linkifier.registerLinkMatcher(B,I,X);return this.refresh(0,this.rows-1),j},x.prototype.deregisterLinkMatcher=function(B){this.linkifier.deregisterLinkMatcher(B)&&this.refresh(0,this.rows-1)},x.prototype.registerLinkProvider=function(B){return this.linkifier2.registerLinkProvider(B)},x.prototype.registerCharacterJoiner=function(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var I=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),I},x.prototype.deregisterCharacterJoiner=function(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)},Object.defineProperty(x.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),x.prototype.addMarker=function(B){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)},x.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},x.prototype.select=function(B,I,X){this._selectionService.setSelection(B,I,X)},x.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},x.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},x.prototype.clearSelection=function(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()},x.prototype.selectAll=function(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()},x.prototype.selectLines=function(B,I){var X;(X=this._selectionService)===null||X===void 0||X.selectLines(B,I)},x.prototype._keyDown=function(B){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(!this._compositionHelper.keydown(B))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var I=(0,E.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),I.type===3||I.type===2){var X=this.rows-1;return this.scrollLines(I.type===2?-X:X),this.cancel(B,!0)}return I.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||(I.cancel&&this.cancel(B,!0),!I.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(I.key!==m.C0.ETX&&I.key!==m.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(I.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(B,!0))))},x.prototype._isThirdLevelShift=function(B,I){var X=B.isMac&&!this.options.macOptionIsMeta&&I.altKey&&!I.ctrlKey&&!I.metaKey||B.isWindows&&I.altKey&&I.ctrlKey&&!I.metaKey||B.isWindows&&I.getModifierState("AltGraph");return I.type==="keypress"?X:X&&(!I.keyCode||I.keyCode>47)},x.prototype._keyUp=function(B){this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||(function(I){return I.keyCode===16||I.keyCode===17||I.keyCode===18}(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)},x.prototype._keyPress=function(B){var I;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)I=B.charCode;else if(B.which===null||B.which===void 0)I=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;I=B.which}return!(!I||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(I=String.fromCharCode(I),this._onKey.fire({key:I,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(I,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},x.prototype._inputEvent=function(B){if(B.data&&B.inputType==="insertText"&&!B.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var I=B.data;return this.coreService.triggerDataEvent(I,!0),this.cancel(B),!0}return!1},x.prototype.bell=function(){var B;this._soundBell()&&((B=this._soundService)===null||B===void 0||B.playBellSound()),this._onBell.fire()},x.prototype.resize=function(B,I){B!==this.cols||I!==this.rows?he.prototype.resize.call(this,B,I):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},x.prototype._afterResize=function(B,I){var X,j;(X=this._charSizeService)===null||X===void 0||X.measure(),(j=this.viewport)===null||j===void 0||j.syncScrollArea(!0)},x.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(b.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},x.prototype.reset=function(){var B,I;this.options.rows=this.rows,this.options.cols=this.cols;var X=this._customKeyEventHandler;this._setup(),he.prototype.reset.call(this),(B=this._selectionService)===null||B===void 0||B.reset(),this._customKeyEventHandler=X,this.refresh(0,this.rows-1),(I=this.viewport)===null||I===void 0||I.syncScrollArea()},x.prototype.clearTextureAtlas=function(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()},x.prototype._reportFocus=function(){var B;((B=this.element)===null||B===void 0?void 0:B.classList.contains("focus"))?this.coreService.triggerDataEvent(m.C0.ESC+"[I"):this.coreService.triggerDataEvent(m.C0.ESC+"[O")},x.prototype._reportWindowsOptions=function(B){if(this._renderService)switch(B){case n.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var I=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),X=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(m.C0.ESC+"[4;"+X+";"+I+"t");break;case n.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var j=this._renderService.dimensions.scaledCellWidth.toFixed(0),Y=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(m.C0.ESC+"[6;"+Y+";"+j+"t")}},x.prototype.cancel=function(B,I){if(this.options.cancelEvents||I)return B.preventDefault(),B.stopPropagation(),!1},x.prototype._visualBell=function(){return!1},x.prototype._soundBell=function(){return this.options.bellStyle==="sound"},x}(H.CoreTerminal);s.Terminal=le},9924:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0;var g=function(){function h(_,p){p===void 0&&(p=1e3),this._renderCallback=_,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return h.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},h.prototype.refresh=function(_,p,f){var S=this;this._rowCount=f,_=_!==void 0?_:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;var m=Date.now();if(m-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=m,this._innerRefresh();else if(!this._additionalRefreshRequested){var n=m-this._lastRefreshMs,o=this._debounceThresholdMS-n;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){S._lastRefreshMs=Date.now(),S._innerRefresh(),S._additionalRefreshRequested=!1,S._refreshTimeoutID=void 0},o)}},h.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,p)}},h}();s.TimeBasedDebouncer=g},1680:function(W,s,g){var h,_=this&&this.__extends||(h=function(a,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}h(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(a,t,e,i){var c,l=arguments.length,v=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,t,e,i);else for(var y=a.length-1;y>=0;y--)(c=a[y])&&(v=(l<3?c(v):l>3?c(t,e,v):c(t,e))||v);return l>3&&v&&Object.defineProperty(t,e,v),v},f=this&&this.__param||function(a,t){return function(e,i){t(e,i,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;var S=g(844),m=g(3656),n=g(4725),o=g(2585),u=function(a){function t(e,i,c,l,v,y,E,w){var b=a.call(this)||this;return b._scrollLines=e,b._viewportElement=i,b._scrollArea=c,b._element=l,b._bufferService=v,b._optionsService=y,b._charSizeService=E,b._renderService=w,b.scrollBarWidth=0,b._currentRowHeight=0,b._currentScaledCellHeight=0,b._lastRecordedBufferLength=0,b._lastRecordedViewportHeight=0,b._lastRecordedBufferHeight=0,b._lastTouchY=0,b._lastScrollTop=0,b._lastHadScrollBar=!1,b._wheelPartialScroll=0,b._refreshAnimationFrame=null,b._ignoreNextScrollEvent=!1,b.scrollBarWidth=b._viewportElement.offsetWidth-b._scrollArea.offsetWidth||15,b._lastHadScrollBar=!0,b.register((0,m.addDisposableDomListener)(b._viewportElement,"scroll",b._onScroll.bind(b))),b._activeBuffer=b._bufferService.buffer,b.register(b._bufferService.buffers.onBufferActivate(function(C){return b._activeBuffer=C.activeBuffer})),b._renderDimensions=b._renderService.dimensions,b.register(b._renderService.onDimensionsChange(function(C){return b._renderDimensions=C})),setTimeout(function(){return b.syncScrollArea()},0),b}return _(t,a),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var i=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var c=window.getComputedStyle(this._element),l=parseInt(c.paddingLeft)+parseInt(c.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?l:0)).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},t.prototype._bubbleScroll=function(e,i){var c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&c<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var i=this._getPixelsScrolled(e);return i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},t.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},t.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},t.prototype._applyScrollModifier=function(e,i){var c=this._optionsService.options.fastScrollModifier;return c==="alt"&&i.altKey||c==="ctrl"&&i.ctrlKey||c==="shift"&&i.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var i=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},p([f(4,o.IBufferService),f(5,o.IOptionsService),f(6,n.ICharSizeService),f(7,n.IRenderService)],t)}(S.Disposable);s.Viewport=u},2950:function(W,s,g){var h=this&&this.__decorate||function(m,n,o,u){var a,t=arguments.length,e=t<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,o):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(m,n,o,u);else for(var i=m.length-1;i>=0;i--)(a=m[i])&&(e=(t<3?a(e):t>3?a(n,o,e):a(n,o))||e);return t>3&&e&&Object.defineProperty(n,o,e),e},_=this&&this.__param||function(m,n){return function(o,u){n(o,u,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;var p=g(4725),f=g(2585),S=function(){function m(n,o,u,a,t,e){this._textarea=n,this._compositionView=o,this._bufferService=u,this._optionsService=a,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(m.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),m.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},m.prototype.compositionupdate=function(n){var o=this;this._compositionView.textContent=n.data,this.updateCompositionElements(),setTimeout(function(){o._compositionPosition.end=o._textarea.value.length},0)},m.prototype.compositionend=function(){this._finalizeComposition(!0)},m.prototype.keydown=function(n){if(this._isComposing||this._isSendingComposition){if(n.keyCode===229||n.keyCode===16||n.keyCode===17||n.keyCode===18)return!1;this._finalizeComposition(!1)}return n.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},m.prototype._finalizeComposition=function(n){var o=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,n){var u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(o._isSendingComposition){o._isSendingComposition=!1;var t;u.start+=o._dataAlreadySent.length,(t=o._isComposing?o._textarea.value.substring(u.start,u.end):o._textarea.value.substring(u.start)).length>0&&o._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;var a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}},m.prototype._handleAnyTextareaChanges=function(){var n=this,o=this._textarea.value;setTimeout(function(){if(!n._isComposing){var u=n._textarea.value.replace(o,"");u.length>0&&(n._dataAlreadySent=u,n._coreService.triggerDataEvent(u,!0))}},0)},m.prototype.updateCompositionElements=function(n){var o=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=u*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}n||setTimeout(function(){return o.updateCompositionElements(!0)},0)}},h([_(2,f.IBufferService),_(3,f.IOptionsService),_(4,f.ICoreService),_(5,p.IRenderService)],m)}();s.CompositionHelper=S},9806:(W,s)=>{function g(h,_){var p=_.getBoundingClientRect();return[h.clientX-p.left,h.clientY-p.top]}Object.defineProperty(s,"__esModule",{value:!0}),s.getRawByteCoords=s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=g,s.getCoords=function(h,_,p,f,S,m,n,o){if(S){var u=g(h,_);if(u)return u[0]=Math.ceil((u[0]+(o?m/2:0))/m),u[1]=Math.ceil(u[1]/n),u[0]=Math.min(Math.max(u[0],1),p+(o?1:0)),u[1]=Math.min(Math.max(u[1],1),f),u}},s.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},9504:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;var h=g(2584);function _(o,u,a,t){var e=o-p(a,o),i=u-p(a,u),c=Math.abs(e-i)-function(l,v,y){for(var E=0,w=l-p(y,l),b=v-p(y,v),C=0;C<Math.abs(w-b);C++){var T=f(l,v)==="A"?-1:1,k=y.buffer.lines.get(w+T*C);(k==null?void 0:k.isWrapped)&&E++}return E}(o,u,a);return n(c,m(f(o,u),t))}function p(o,u){for(var a=0,t=o.buffer.lines.get(u),e=t==null?void 0:t.isWrapped;e&&u>=0&&u<o.rows;)a++,e=(t=o.buffer.lines.get(--u))==null?void 0:t.isWrapped;return a}function f(o,u){return o>u?"A":"B"}function S(o,u,a,t,e,i){for(var c=o,l=u,v="";c!==a||l!==t;)c+=e?1:-1,e&&c>i.cols-1?(v+=i.buffer.translateBufferLineToString(l,!1,o,c),c=0,o=0,l++):!e&&c<0&&(v+=i.buffer.translateBufferLineToString(l,!1,0,o+1),o=c=i.cols-1,l--);return v+i.buffer.translateBufferLineToString(l,!1,o,c)}function m(o,u){var a=u?"O":"[";return h.C0.ESC+a+o}function n(o,u){o=Math.floor(o);for(var a="",t=0;t<o;t++)a+=u;return a}s.moveToCellSequence=function(o,u,a,t){var e,i=a.buffer.x,c=a.buffer.y;if(!a.buffer.hasScrollback)return function(v,y,E,w,b,C){return _(y,w,b,C).length===0?"":n(S(v,y,v,y-p(b,y),!1,b).length,m("D",C))}(i,c,0,u,a,t)+_(c,u,a,t)+function(v,y,E,w,b,C){var T;T=_(y,w,b,C).length>0?w-p(b,w):y;var k=w,q=function(D,A,O,H,R,Z){var Q;return Q=_(O,H,R,Z).length>0?H-p(R,H):A,D<O&&Q<=H||D>=O&&Q<H?"C":"D"}(v,y,E,w,b,C);return n(S(v,T,E,k,q==="C",b).length,m(q,C))}(i,c,o,u,a,t);if(c===u)return e=i>o?"D":"C",n(Math.abs(i-o),m(e,t));e=c>u?"D":"C";var l=Math.abs(c-u);return n(function(v,y){return y.cols-v}(c>u?o:i,a)+(l-1)*a.cols+1+((c>u?i:o)-1),m(e,t))}},1546:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;var h=g(643),_=g(8803),p=g(1420),f=g(3734),S=g(1752),m=g(4774),n=g(9631),o=g(8978),u=function(){function a(t,e,i,c,l,v,y,E){this._container=t,this._alpha=c,this._colors=l,this._rendererId=v,this._bufferService=y,this._optionsService=E,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return a.prototype.dispose=function(){var t;(0,n.removeElementFromParent)(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},a.prototype._initCanvas=function(){this._ctx=(0,S.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},a.prototype.onOptionsChanged=function(){},a.prototype.onBlur=function(){},a.prototype.onFocus=function(){},a.prototype.onCursorMove=function(){},a.prototype.onGridChanged=function(t,e){},a.prototype.onSelectionChanged=function(t,e,i){i===void 0&&(i=!1)},a.prototype.setColors=function(t){this._refreshCharAtlas(t)},a.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},a.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,p.acquireCharAtlas)(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},a.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},a.prototype.clearTextureAtlas=function(){var t;(t=this._charAtlas)===null||t===void 0||t.clear()},a.prototype._fillCells=function(t,e,i,c){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight)},a.prototype._fillMiddleLineAtCells=function(t,e,i){i===void 0&&(i=1);var c=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-c-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillBottomLineAtCells=function(t,e,i){i===void 0&&(i=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillLeftLineAtCell=function(t,e,i){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},a.prototype._strokeRectAtCell=function(t,e,i,c){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)},a.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},a.prototype._clearCells=function(t,e,i,c){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight))},a.prototype._fillCharTrueColor=function(t,e,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipRow(i);var c=!1;this._optionsService.options.customGlyphs!==!1&&(c=(0,o.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},a.prototype._drawChars=function(t,e,i){var c,l,v,y=this._getContrastColor(t);y||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,i,y):(t.isInverse()?(l=t.isBgDefault()?_.INVERTED_DEFAULT_COLOR:t.getBgColor(),v=t.isFgDefault()?_.INVERTED_DEFAULT_COLOR:t.getFgColor()):(v=t.isBgDefault()?h.DEFAULT_COLOR:t.getBgColor(),l=t.isFgDefault()?h.DEFAULT_COLOR:t.getFgColor()),l+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&l<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||h.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||h.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=v,this._currentGlyphIdentifier.fg=l,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),((c=this._charAtlas)===null||c===void 0?void 0:c.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(t,e,i))},a.prototype._drawUncachedChars=function(t,e,i,c){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=_.TEXT_BASELINE,t.isInverse())if(c)this._ctx.fillStyle=c.css;else if(t.isBgDefault())this._ctx.fillStyle=m.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var l=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&l<8&&(l+=8),this._ctx.fillStyle=this._colors.ansi[l].css}else if(c)this._ctx.fillStyle=c.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var v=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&v<8&&(v+=8),this._ctx.fillStyle=this._colors.ansi[v].css}this._clipRow(i),t.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var y=!1;this._optionsService.options.customGlyphs!==!1&&(y=(0,o.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),y||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},a.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},a.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},a.prototype._getContrastColor=function(t){if(this._optionsService.options.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(e!==void 0)return e||void 0;var i=t.getFgColor(),c=t.getFgColorMode(),l=t.getBgColor(),v=t.getBgColorMode(),y=!!t.isInverse(),E=!!t.isInverse();if(y){var w=i;i=l,l=w;var b=c;c=v,v=b}var C=this._resolveBackgroundRgba(v,l,y),T=this._resolveForegroundRgba(c,i,y,E),k=m.rgba.ensureContrastRatio(C,T,this._optionsService.options.minimumContrastRatio);if(k){var q={css:m.channels.toCss(k>>24&255,k>>16&255,k>>8&255),rgba:k};return this._colors.contrastCache.setColor(t.bg,t.fg,q),q}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},a.prototype._resolveBackgroundRgba=function(t,e,i){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},a.prototype._resolveForegroundRgba=function(t,e,i,c){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&c&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},a}();s.BaseRenderLayer=u},2512:function(W,s,g){var h,_=this&&this.__extends||(h=function(e,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(c[v]=l[v])},h(e,i)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=e}h(e,i),e.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}),p=this&&this.__decorate||function(e,i,c,l){var v,y=arguments.length,E=y<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,i,c,l);else for(var w=e.length-1;w>=0;w--)(v=e[w])&&(E=(y<3?v(E):y>3?v(i,c,E):v(i,c))||E);return y>3&&E&&Object.defineProperty(i,c,E),E},f=this&&this.__param||function(e,i){return function(c,l){i(c,l,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;var S=g(1546),m=g(511),n=g(2585),o=g(4725),u=600,a=function(e){function i(c,l,v,y,E,w,b,C,T){var k=e.call(this,c,"cursor",l,!0,v,y,w,b)||this;return k._onRequestRedraw=E,k._coreService=C,k._coreBrowserService=T,k._cell=new m.CellData,k._state={x:0,y:0,isFocused:!1,style:"",width:0},k._cursorRenderers={bar:k._renderBarCursor.bind(k),block:k._renderBlockCursor.bind(k),underline:k._renderUnderlineCursor.bind(k)},k}return _(i,e),i.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},i.prototype.resize=function(c){e.prototype.resize.call(this,c),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){var c;this._clearCursor(),(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation(),this.onOptionsChanged()},i.prototype.onBlur=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var c,l=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){l._render(!0)})):((c=this._cursorBlinkStateManager)===null||c===void 0||c.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation()},i.prototype.onGridChanged=function(c,l){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(c){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var l=this._bufferService.buffer.ybase+this._bufferService.buffer.y,v=l-this._bufferService.buffer.ydisp;if(v<0||v>=this._bufferService.rows)this._clearCursor();else{var y=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(l).loadCell(y,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var E=this._optionsService.options.cursorStyle;return E&&E!=="block"?this._cursorRenderers[E](y,v,this._cell):this._renderBlurCursor(y,v,this._cell),this._ctx.restore(),this._state.x=y,this._state.y=v,this._state.isFocused=!1,this._state.style=E,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===y&&this._state.y===v&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](y,v,this._cell),this._ctx.restore(),this._state.x=y,this._state.y=v,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(c,l,v){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(c,l,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(c,l,v){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(c,l,v.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(v,c,l),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(c,l,v){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(c,l),this._ctx.restore()},i.prototype._renderBlurCursor=function(c,l,v){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(c,l,v.getWidth(),1),this._ctx.restore()},p([f(5,n.IBufferService),f(6,n.IOptionsService),f(7,n.ICoreService),f(8,o.ICoreBrowserService)],i)}(S.BaseRenderLayer);s.CursorRenderLayer=a;var t=function(){function e(i,c){this._renderCallback=c,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},e.prototype._restartInterval=function(i){var c=this;i===void 0&&(i=u),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(c._animationTimeRestarted){var l=u-(Date.now()-c._animationTimeRestarted);if(c._animationTimeRestarted=void 0,l>0)return void c._restartInterval(l)}c.isCursorVisible=!1,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0}),c._blinkInterval=window.setInterval(function(){if(c._animationTimeRestarted){var v=u-(Date.now()-c._animationTimeRestarted);return c._animationTimeRestarted=void 0,void c._restartInterval(v)}c.isCursorVisible=!c.isCursorVisible,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0})},u)},i)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(W,s,g)=>{var h,_,p,f,S,m,n,o,u,a,t,e,i,c,l,v,y,E,w,b,C,T,k,q,D,A,O,H,R,Z,Q,oe,le,he,x,B,I,X,j,Y,se,Ce,Me,Ae,ie,Ee,Ie,ht,xt,_t,Ut,Ze,zi,Ki,nr,ci,zt,Kt,Vi,Gi,li,vt,Be,He,je,Pe,kt,gt,ut,mt,hi,Vt,yt,ui,Gt,$t,fi,di,pi,_i,vi,gi,mi,yi,bi,Si,Ke,qe,Ct,Fe,Ci,Xt,Ve,bt,Yt,wi,Je,$i,nt,Mt,Li,wt,Zt,ot,Lt,Tt,Ot,Ei,Ai,xi,St,Xi,Yi,ki,Jt,Mi,or,Qt,sr,Zi,Ti,Oi,Ri,Ji,Rt,Di,Qi,er;Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;var Dt=g(1752);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var zr={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":(h={},h[1]="M0,.5 L1,.5",h),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(p={},p[1]="M.5,0 L.5,1",p),"\u2503":(f={},f[3]="M.5,0 L.5,1",f),"\u250C":(S={},S[1]="M0.5,1 L.5,.5 L1,.5",S),"\u250F":(m={},m[3]="M0.5,1 L.5,.5 L1,.5",m),"\u2510":(n={},n[1]="M0,.5 L.5,.5 L.5,1",n),"\u2513":(o={},o[3]="M0,.5 L.5,.5 L.5,1",o),"\u2514":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"\u2517":(a={},a[3]="M.5,0 L.5,.5 L1,.5",a),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(i={},i[1]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2523":(c={},c[3]="M.5,0 L.5,1 M.5,.5 L1,.5",c),"\u2524":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L0,.5",l),"\u252B":(v={},v[3]="M.5,0 L.5,1 M.5,.5 L0,.5",v),"\u252C":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,1",y),"\u2533":(E={},E[3]="M0,.5 L1,.5 M.5,.5 L.5,1",E),"\u2534":(w={},w[1]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"\u253B":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"\u253C":(C={},C[1]="M0,.5 L1,.5 M.5,0 L.5,1",C),"\u254B":(T={},T[3]="M0,.5 L1,.5 M.5,0 L.5,1",T),"\u2574":(k={},k[1]="M.5,.5 L0,.5",k),"\u2578":(q={},q[3]="M.5,.5 L0,.5",q),"\u2575":(D={},D[1]="M.5,.5 L.5,0",D),"\u2579":(A={},A[3]="M.5,.5 L.5,0",A),"\u2576":(O={},O[1]="M.5,.5 L1,.5",O),"\u257A":(H={},H[3]="M.5,.5 L1,.5",H),"\u2577":(R={},R[1]="M.5,.5 L.5,1",R),"\u257B":(Z={},Z[3]="M.5,.5 L.5,1",Z),"\u2550":(Q={},Q[1]=function(G,z){return"M0,"+(.5-z)+" L1,"+(.5-z)+" M0,"+(.5+z)+" L1,"+(.5+z)},Q),"\u2551":(oe={},oe[1]=function(G,z){return"M"+(.5-G)+",0 L"+(.5-G)+",1 M"+(.5+G)+",0 L"+(.5+G)+",1"},oe),"\u2552":(le={},le[1]=function(G,z){return"M.5,1 L.5,"+(.5-z)+" L1,"+(.5-z)+" M.5,"+(.5+z)+" L1,"+(.5+z)},le),"\u2553":(he={},he[1]=function(G,z){return"M"+(.5-G)+",1 L"+(.5-G)+",.5 L1,.5 M"+(.5+G)+",.5 L"+(.5+G)+",1"},he),"\u2554":(x={},x[1]=function(G,z){return"M1,"+(.5-z)+" L"+(.5-G)+","+(.5-z)+" L"+(.5-G)+",1 M1,"+(.5+z)+" L"+(.5+G)+","+(.5+z)+" L"+(.5+G)+",1"},x),"\u2555":(B={},B[1]=function(G,z){return"M0,"+(.5-z)+" L.5,"+(.5-z)+" L.5,1 M0,"+(.5+z)+" L.5,"+(.5+z)},B),"\u2556":(I={},I[1]=function(G,z){return"M"+(.5+G)+",1 L"+(.5+G)+",.5 L0,.5 M"+(.5-G)+",.5 L"+(.5-G)+",1"},I),"\u2557":(X={},X[1]=function(G,z){return"M0,"+(.5+z)+" L"+(.5-G)+","+(.5+z)+" L"+(.5-G)+",1 M0,"+(.5-z)+" L"+(.5+G)+","+(.5-z)+" L"+(.5+G)+",1"},X),"\u2558":(j={},j[1]=function(G,z){return"M.5,0 L.5,"+(.5+z)+" L1,"+(.5+z)+" M.5,"+(.5-z)+" L1,"+(.5-z)},j),"\u2559":(Y={},Y[1]=function(G,z){return"M1,.5 L"+(.5-G)+",.5 L"+(.5-G)+",0 M"+(.5+G)+",.5 L"+(.5+G)+",0"},Y),"\u255A":(se={},se[1]=function(G,z){return"M1,"+(.5-z)+" L"+(.5+G)+","+(.5-z)+" L"+(.5+G)+",0 M1,"+(.5+z)+" L"+(.5-G)+","+(.5+z)+" L"+(.5-G)+",0"},se),"\u255B":(Ce={},Ce[1]=function(G,z){return"M0,"+(.5+z)+" L.5,"+(.5+z)+" L.5,0 M0,"+(.5-z)+" L.5,"+(.5-z)},Ce),"\u255C":(Me={},Me[1]=function(G,z){return"M0,.5 L"+(.5+G)+",.5 L"+(.5+G)+",0 M"+(.5-G)+",.5 L"+(.5-G)+",0"},Me),"\u255D":(Ae={},Ae[1]=function(G,z){return"M0,"+(.5-z)+" L"+(.5-G)+","+(.5-z)+" L"+(.5-G)+",0 M0,"+(.5+z)+" L"+(.5+G)+","+(.5+z)+" L"+(.5+G)+",0"},Ae),"\u255E":(ie={},ie[1]=function(G,z){return"M.5,0 L.5,1 M.5,"+(.5-z)+" L1,"+(.5-z)+" M.5,"+(.5+z)+" L1,"+(.5+z)},ie),"\u255F":(Ee={},Ee[1]=function(G,z){return"M"+(.5-G)+",0 L"+(.5-G)+",1 M"+(.5+G)+",0 L"+(.5+G)+",1 M"+(.5+G)+",.5 L1,.5"},Ee),"\u2560":(Ie={},Ie[1]=function(G,z){return"M"+(.5-G)+",0 L"+(.5-G)+",1 M1,"+(.5+z)+" L"+(.5+G)+","+(.5+z)+" L"+(.5+G)+",1 M1,"+(.5-z)+" L"+(.5+G)+","+(.5-z)+" L"+(.5+G)+",0"},Ie),"\u2561":(ht={},ht[1]=function(G,z){return"M.5,0 L.5,1 M0,"+(.5-z)+" L.5,"+(.5-z)+" M0,"+(.5+z)+" L.5,"+(.5+z)},ht),"\u2562":(xt={},xt[1]=function(G,z){return"M0,.5 L"+(.5-G)+",.5 M"+(.5-G)+",0 L"+(.5-G)+",1 M"+(.5+G)+",0 L"+(.5+G)+",1"},xt),"\u2563":(_t={},_t[1]=function(G,z){return"M"+(.5+G)+",0 L"+(.5+G)+",1 M0,"+(.5+z)+" L"+(.5-G)+","+(.5+z)+" L"+(.5-G)+",1 M0,"+(.5-z)+" L"+(.5-G)+","+(.5-z)+" L"+(.5-G)+",0"},_t),"\u2564":(Ut={},Ut[1]=function(G,z){return"M0,"+(.5-z)+" L1,"+(.5-z)+" M0,"+(.5+z)+" L1,"+(.5+z)+" M.5,"+(.5+z)+" L.5,1"},Ut),"\u2565":(Ze={},Ze[1]=function(G,z){return"M0,.5 L1,.5 M"+(.5-G)+",.5 L"+(.5-G)+",1 M"+(.5+G)+",.5 L"+(.5+G)+",1"},Ze),"\u2566":(zi={},zi[1]=function(G,z){return"M0,"+(.5-z)+" L1,"+(.5-z)+" M0,"+(.5+z)+" L"+(.5-G)+","+(.5+z)+" L"+(.5-G)+",1 M1,"+(.5+z)+" L"+(.5+G)+","+(.5+z)+" L"+(.5+G)+",1"},zi),"\u2567":(Ki={},Ki[1]=function(G,z){return"M.5,0 L.5,"+(.5-z)+" M0,"+(.5-z)+" L1,"+(.5-z)+" M0,"+(.5+z)+" L1,"+(.5+z)},Ki),"\u2568":(nr={},nr[1]=function(G,z){return"M0,.5 L1,.5 M"+(.5-G)+",.5 L"+(.5-G)+",0 M"+(.5+G)+",.5 L"+(.5+G)+",0"},nr),"\u2569":(ci={},ci[1]=function(G,z){return"M0,"+(.5+z)+" L1,"+(.5+z)+" M0,"+(.5-z)+" L"+(.5-G)+","+(.5-z)+" L"+(.5-G)+",0 M1,"+(.5-z)+" L"+(.5+G)+","+(.5-z)+" L"+(.5+G)+",0"},ci),"\u256A":(zt={},zt[1]=function(G,z){return"M.5,0 L.5,1 M0,"+(.5-z)+" L1,"+(.5-z)+" M0,"+(.5+z)+" L1,"+(.5+z)},zt),"\u256B":(Kt={},Kt[1]=function(G,z){return"M0,.5 L1,.5 M"+(.5-G)+",0 L"+(.5-G)+",1 M"+(.5+G)+",0 L"+(.5+G)+",1"},Kt),"\u256C":(Vi={},Vi[1]=function(G,z){return"M0,"+(.5+z)+" L"+(.5-G)+","+(.5+z)+" L"+(.5-G)+",1 M1,"+(.5+z)+" L"+(.5+G)+","+(.5+z)+" L"+(.5+G)+",1 M0,"+(.5-z)+" L"+(.5-G)+","+(.5-z)+" L"+(.5-G)+",0 M1,"+(.5-z)+" L"+(.5+G)+","+(.5-z)+" L"+(.5+G)+",0"},Vi),"\u2571":(Gi={},Gi[1]="M1,0 L0,1",Gi),"\u2572":(li={},li[1]="M0,0 L1,1",li),"\u2573":(vt={},vt[1]="M1,0 L0,1 M0,0 L1,1",vt),"\u257C":(Be={},Be[1]="M.5,.5 L0,.5",Be[3]="M.5,.5 L1,.5",Be),"\u257D":(He={},He[1]="M.5,.5 L.5,0",He[3]="M.5,.5 L.5,1",He),"\u257E":(je={},je[1]="M.5,.5 L1,.5",je[3]="M.5,.5 L0,.5",je),"\u257F":(Pe={},Pe[1]="M.5,.5 L.5,1",Pe[3]="M.5,.5 L.5,0",Pe),"\u250D":(kt={},kt[1]="M.5,.5 L.5,1",kt[3]="M.5,.5 L1,.5",kt),"\u250E":(gt={},gt[1]="M.5,.5 L1,.5",gt[3]="M.5,.5 L.5,1",gt),"\u2511":(ut={},ut[1]="M.5,.5 L.5,1",ut[3]="M.5,.5 L0,.5",ut),"\u2512":(mt={},mt[1]="M.5,.5 L0,.5",mt[3]="M.5,.5 L.5,1",mt),"\u2515":(hi={},hi[1]="M.5,.5 L.5,0",hi[3]="M.5,.5 L1,.5",hi),"\u2516":(Vt={},Vt[1]="M.5,.5 L1,.5",Vt[3]="M.5,.5 L.5,0",Vt),"\u2519":(yt={},yt[1]="M.5,.5 L.5,0",yt[3]="M.5,.5 L0,.5",yt),"\u251A":(ui={},ui[1]="M.5,.5 L0,.5",ui[3]="M.5,.5 L.5,0",ui),"\u251D":(Gt={},Gt[1]="M.5,0 L.5,1",Gt[3]="M.5,.5 L1,.5",Gt),"\u251E":($t={},$t[1]="M0.5,1 L.5,.5 L1,.5",$t[3]="M.5,.5 L.5,0",$t),"\u251F":(fi={},fi[1]="M.5,0 L.5,.5 L1,.5",fi[3]="M.5,.5 L.5,1",fi),"\u2520":(di={},di[1]="M.5,.5 L1,.5",di[3]="M.5,0 L.5,1",di),"\u2521":(pi={},pi[1]="M.5,.5 L.5,1",pi[3]="M.5,0 L.5,.5 L1,.5",pi),"\u2522":(_i={},_i[1]="M.5,.5 L.5,0",_i[3]="M0.5,1 L.5,.5 L1,.5",_i),"\u2525":(vi={},vi[1]="M.5,0 L.5,1",vi[3]="M.5,.5 L0,.5",vi),"\u2526":(gi={},gi[1]="M0,.5 L.5,.5 L.5,1",gi[3]="M.5,.5 L.5,0",gi),"\u2527":(mi={},mi[1]="M.5,0 L.5,.5 L0,.5",mi[3]="M.5,.5 L.5,1",mi),"\u2528":(yi={},yi[1]="M.5,.5 L0,.5",yi[3]="M.5,0 L.5,1",yi),"\u2529":(bi={},bi[1]="M.5,.5 L.5,1",bi[3]="M.5,0 L.5,.5 L0,.5",bi),"\u252A":(Si={},Si[1]="M.5,.5 L.5,0",Si[3]="M0,.5 L.5,.5 L.5,1",Si),"\u252D":(Ke={},Ke[1]="M0.5,1 L.5,.5 L1,.5",Ke[3]="M.5,.5 L0,.5",Ke),"\u252E":(qe={},qe[1]="M0,.5 L.5,.5 L.5,1",qe[3]="M.5,.5 L1,.5",qe),"\u252F":(Ct={},Ct[1]="M.5,.5 L.5,1",Ct[3]="M0,.5 L1,.5",Ct),"\u2530":(Fe={},Fe[1]="M0,.5 L1,.5",Fe[3]="M.5,.5 L.5,1",Fe),"\u2531":(Ci={},Ci[1]="M.5,.5 L1,.5",Ci[3]="M0,.5 L.5,.5 L.5,1",Ci),"\u2532":(Xt={},Xt[1]="M.5,.5 L0,.5",Xt[3]="M0.5,1 L.5,.5 L1,.5",Xt),"\u2535":(Ve={},Ve[1]="M.5,0 L.5,.5 L1,.5",Ve[3]="M.5,.5 L0,.5",Ve),"\u2536":(bt={},bt[1]="M.5,0 L.5,.5 L0,.5",bt[3]="M.5,.5 L1,.5",bt),"\u2537":(Yt={},Yt[1]="M.5,.5 L.5,0",Yt[3]="M0,.5 L1,.5",Yt),"\u2538":(wi={},wi[1]="M0,.5 L1,.5",wi[3]="M.5,.5 L.5,0",wi),"\u2539":(Je={},Je[1]="M.5,.5 L1,.5",Je[3]="M.5,0 L.5,.5 L0,.5",Je),"\u253A":($i={},$i[1]="M.5,.5 L0,.5",$i[3]="M.5,0 L.5,.5 L1,.5",$i),"\u253D":(nt={},nt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",nt[3]="M.5,.5 L0,.5",nt),"\u253E":(Mt={},Mt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Mt[3]="M.5,.5 L1,.5",Mt),"\u253F":(Li={},Li[1]="M.5,0 L.5,1",Li[3]="M0,.5 L1,.5",Li),"\u2540":(wt={},wt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",wt[3]="M.5,.5 L.5,0",wt),"\u2541":(Zt={},Zt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Zt[3]="M.5,.5 L.5,1",Zt),"\u2542":(ot={},ot[1]="M0,.5 L1,.5",ot[3]="M.5,0 L.5,1",ot),"\u2543":(Lt={},Lt[1]="M0.5,1 L.5,.5 L1,.5",Lt[3]="M.5,0 L.5,.5 L0,.5",Lt),"\u2544":(Tt={},Tt[1]="M0,.5 L.5,.5 L.5,1",Tt[3]="M.5,0 L.5,.5 L1,.5",Tt),"\u2545":(Ot={},Ot[1]="M.5,0 L.5,.5 L1,.5",Ot[3]="M0,.5 L.5,.5 L.5,1",Ot),"\u2546":(Ei={},Ei[1]="M.5,0 L.5,.5 L0,.5",Ei[3]="M0.5,1 L.5,.5 L1,.5",Ei),"\u2547":(Ai={},Ai[1]="M.5,.5 L.5,1",Ai[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Ai),"\u2548":(xi={},xi[1]="M.5,.5 L.5,0",xi[3]="M0,.5 L1,.5 M.5,.5 L.5,1",xi),"\u2549":(St={},St[1]="M.5,.5 L1,.5",St[3]="M.5,0 L.5,1 M.5,.5 L0,.5",St),"\u254A":(Xi={},Xi[1]="M.5,.5 L0,.5",Xi[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Xi),"\u254C":(Yi={},Yi[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Yi),"\u254D":(ki={},ki[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ki),"\u2504":(Jt={},Jt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Jt),"\u2505":(Mi={},Mi[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Mi),"\u2508":(or={},or[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",or),"\u2509":(Qt={},Qt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Qt),"\u254E":(sr={},sr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",sr),"\u254F":(Zi={},Zi[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Zi),"\u2506":(Ti={},Ti[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Ti),"\u2507":(Oi={},Oi[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Oi),"\u250A":(Ri={},Ri[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Ri),"\u250B":(Ji={},Ji[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Ji),"\u256D":(Rt={},Rt[1]="C.5,1,.5,.5,1,.5",Rt),"\u256E":(Di={},Di[1]="C.5,1,.5,.5,0,.5",Di),"\u256F":(Qi={},Qi[1]="C.5,0,.5,.5,0,.5",Qi),"\u2570":(er={},er[1]="C.5,0,.5,.5,1,.5",er)},s.tryDrawCustomChar=function(G,z,st,Bi,Pi,Te){var at=s.blockElementDefinitions[z];if(at)return function(Ne,Qe,ei,Bt,Et,Pt){for(var $e=0;$e<Qe.length;$e++){var We=Qe[$e],xe=Et/8,ft=Pt/8;Ne.fillRect(ei+We.x*xe,Bt+We.y*ft,We.w*xe,We.h*ft)}}(G,at,st,Bi,Pi,Te),!0;var Ge=zr[z];if(Ge)return function(Ne,Qe,ei,Bt,Et,Pt){var $e,We=ar.get(Qe);We||(We=new Map,ar.set(Qe,We));var xe=Ne.fillStyle;if(typeof xe!="string")throw new Error('Unexpected fillStyle type "'+xe+'"');var ft=We.get(xe);if(!ft){var et=Qe[0].length,tt=Qe.length,ct=document.createElement("canvas");ct.width=et,ct.height=tt;var ti=(0,Dt.throwIfFalsy)(ct.getContext("2d")),At=new ImageData(et,tt),ii=void 0,It=void 0,lr=void 0,hr=void 0;if(xe.startsWith("#"))ii=parseInt(xe.substr(1,2),16),It=parseInt(xe.substr(3,2),16),lr=parseInt(xe.substr(5,2),16),hr=xe.length>7&&parseInt(xe.substr(7,2),16)||1;else{if(!xe.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+xe+'" when drawing pattern glyph');ii=($e=xe.substring(5,xe.length-1).split(",").map(function(Kr){return parseFloat(Kr)}))[0],It=$e[1],lr=$e[2],hr=$e[3]}for(var Ht=0;Ht<tt;Ht++)for(var jt=0;jt<et;jt++)At.data[4*(Ht*et+jt)]=ii,At.data[4*(Ht*et+jt)+1]=It,At.data[4*(Ht*et+jt)+2]=lr,At.data[4*(Ht*et+jt)+3]=Qe[Ht][jt]*(255*hr);ti.putImageData(At,0,0),ft=(0,Dt.throwIfFalsy)(Ne.createPattern(ct,null)),We.set(xe,ft)}Ne.fillStyle=ft,Ne.fillRect(ei,Bt,Et,Pt)}(G,Ge,st,Bi,Pi,Te),!0;var Ii=s.boxDrawingDefinitions[z];return!!Ii&&(function(Ne,Qe,ei,Bt,Et,Pt){Ne.strokeStyle=Ne.fillStyle;for(var $e=0,We=Object.entries(Qe);$e<We.length;$e++){var xe=We[$e],ft=xe[0],et=xe[1];Ne.beginPath(),Ne.lineWidth=window.devicePixelRatio*Number.parseInt(ft);for(var tt=0,ct=(typeof et=="function"?et(.15,.15/Pt*Et):et).split(" ");tt<ct.length;tt++){var ti=ct[tt],At=ti[0],ii=Cr[At];if(ii){var It=ti.substring(1).split(",");It[0]&&It[1]&&ii(Ne,wr(It,Et,Pt,ei,Bt))}else console.error('Could not find drawing instructions for "'+At+'"')}Ne.stroke(),Ne.closePath()}}(G,Ii,st,Bi,Pi,Te),!0)};var ar=new Map;function cr(G,z,st){return st===void 0&&(st=0),Math.max(Math.min(G,z),st)}var Cr={C:function(G,z){return G.bezierCurveTo(z[0],z[1],z[2],z[3],z[4],z[5])},L:function(G,z){return G.lineTo(z[0],z[1])},M:function(G,z){return G.moveTo(z[0],z[1])}};function wr(G,z,st,Bi,Pi){var Te=G.map(function(Ii){return parseFloat(Ii)||parseInt(Ii)});if(Te.length<2)throw new Error("Too few arguments for instruction");for(var at=0;at<Te.length;at+=2)Te[at]*=z,Te[at]!==0&&(Te[at]=cr(Math.round(Te[at]+.5)-.5,z,0)),Te[at]+=Bi;for(var Ge=1;Ge<Te.length;Ge+=2)Te[Ge]*=st,Te[Ge]!==0&&(Te[Ge]=cr(Math.round(Te[Ge]+.5)-.5,st,0)),Te[Ge]+=Pi;return Te}},3700:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GridCache=void 0;var g=function(){function h(){this.cache=[]}return h.prototype.resize=function(_,p){for(var f=0;f<_;f++){this.cache.length<=f&&this.cache.push([]);for(var S=this.cache[f].length;S<p;S++)this.cache[f].push(void 0);this.cache[f].length=p}this.cache.length=_},h.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var p=0;p<this.cache[_].length;p++)this.cache[_][p]=void 0},h}();s.GridCache=g},5098:function(W,s,g){var h,_=this&&this.__extends||(h=function(a,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}h(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(a,t,e,i){var c,l=arguments.length,v=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,t,e,i);else for(var y=a.length-1;y>=0;y--)(c=a[y])&&(v=(l<3?c(v):l>3?c(t,e,v):c(t,e))||v);return l>3&&v&&Object.defineProperty(t,e,v),v},f=this&&this.__param||function(a,t){return function(e,i){t(e,i,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;var S=g(1546),m=g(8803),n=g(2040),o=g(2585),u=function(a){function t(e,i,c,l,v,y,E,w){var b=a.call(this,e,"link",i,!0,c,l,E,w)||this;return v.onShowLinkUnderline(function(C){return b._onShowLinkUnderline(C)}),v.onHideLinkUnderline(function(C){return b._onHideLinkUnderline(C)}),y.onShowLinkUnderline(function(C){return b._onShowLinkUnderline(C)}),y.onHideLinkUnderline(function(C){return b._onHideLinkUnderline(C)}),b}return _(t,a),t.prototype.resize=function(e){a.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===m.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,n.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var i=e.y1+1;i<e.y2;i++)this._fillBottomLineAtCells(0,i,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},p([f(6,o.IBufferService),f(7,o.IOptionsService)],t)}(S.BaseRenderLayer);s.LinkRenderLayer=u},3525:function(W,s,g){var h,_=this&&this.__extends||(h=function(v,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,w){E.__proto__=w}||function(E,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(E[b]=w[b])},h(v,y)},function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function E(){this.constructor=v}h(v,y),v.prototype=y===null?Object.create(y):(E.prototype=y.prototype,new E)}),p=this&&this.__decorate||function(v,y,E,w){var b,C=arguments.length,T=C<3?y:w===null?w=Object.getOwnPropertyDescriptor(y,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(v,y,E,w);else for(var k=v.length-1;k>=0;k--)(b=v[k])&&(T=(C<3?b(T):C>3?b(y,E,T):b(y,E))||T);return C>3&&T&&Object.defineProperty(y,E,T),T},f=this&&this.__param||function(v,y){return function(E,w){y(E,w,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Renderer=void 0;var S=g(9596),m=g(4149),n=g(2512),o=g(5098),u=g(844),a=g(4725),t=g(2585),e=g(1420),i=g(8460),c=1,l=function(v){function y(E,w,b,C,T,k,q,D){var A=v.call(this)||this;A._colors=E,A._screenElement=w,A._bufferService=k,A._charSizeService=q,A._optionsService=D,A._id=c++,A._onRequestRedraw=new i.EventEmitter;var O=A._optionsService.options.allowTransparency;return A._renderLayers=[T.createInstance(S.TextRenderLayer,A._screenElement,0,A._colors,O,A._id),T.createInstance(m.SelectionRenderLayer,A._screenElement,1,A._colors,A._id),T.createInstance(o.LinkRenderLayer,A._screenElement,2,A._colors,A._id,b,C),T.createInstance(n.CursorRenderLayer,A._screenElement,3,A._colors,A._id,A._onRequestRedraw)],A.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},A._devicePixelRatio=window.devicePixelRatio,A._updateDimensions(),A.onOptionsChanged(),A}return _(y,v),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){for(var E=0,w=this._renderLayers;E<w.length;E++)w[E].dispose();v.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},y.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},y.prototype.setColors=function(E){this._colors=E;for(var w=0,b=this._renderLayers;w<b.length;w++){var C=b[w];C.setColors(this._colors),C.reset()}},y.prototype.onResize=function(E,w){this._updateDimensions();for(var b=0,C=this._renderLayers;b<C.length;b++)C[b].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},y.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},y.prototype.onBlur=function(){this._runOperation(function(E){return E.onBlur()})},y.prototype.onFocus=function(){this._runOperation(function(E){return E.onFocus()})},y.prototype.onSelectionChanged=function(E,w,b){b===void 0&&(b=!1),this._runOperation(function(C){return C.onSelectionChanged(E,w,b)})},y.prototype.onCursorMove=function(){this._runOperation(function(E){return E.onCursorMove()})},y.prototype.onOptionsChanged=function(){this._runOperation(function(E){return E.onOptionsChanged()})},y.prototype.clear=function(){this._runOperation(function(E){return E.reset()})},y.prototype._runOperation=function(E){for(var w=0,b=this._renderLayers;w<b.length;w++)E(b[w])},y.prototype.renderRows=function(E,w){for(var b=0,C=this._renderLayers;b<C.length;b++)C[b].onGridChanged(E,w)},y.prototype.clearTextureAtlas=function(){for(var E=0,w=this._renderLayers;E<w.length;E++)w[E].clearTextureAtlas()},y.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},p([f(4,t.IInstantiationService),f(5,t.IBufferService),f(6,a.ICharSizeService),f(7,t.IOptionsService)],y)}(u.Disposable);s.Renderer=l},1752:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.throwIfFalsy=void 0,s.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g}},4149:function(W,s,g){var h,_=this&&this.__extends||(h=function(o,u){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])},h(o,u)},function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function a(){this.constructor=o}h(o,u),o.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}),p=this&&this.__decorate||function(o,u,a,t){var e,i=arguments.length,c=i<3?u:t===null?t=Object.getOwnPropertyDescriptor(u,a):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,u,a,t);else for(var l=o.length-1;l>=0;l--)(e=o[l])&&(c=(i<3?e(c):i>3?e(u,a,c):e(u,a))||c);return i>3&&c&&Object.defineProperty(u,a,c),c},f=this&&this.__param||function(o,u){return function(a,t){u(a,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionRenderLayer=void 0;var S=g(1546),m=g(2585),n=function(o){function u(a,t,e,i,c,l){var v=o.call(this,a,"selection",t,!0,e,i,c,l)||this;return v._clearState(),v}return _(u,o),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(a){o.prototype.resize.call(this,a),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(a,t,e){if(this._didStateChange(a,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),a&&t){var i=a[1]-this._bufferService.buffer.ydisp,c=t[1]-this._bufferService.buffer.ydisp,l=Math.max(i,0),v=Math.min(c,this._bufferService.rows-1);if(l>=this._bufferService.rows||v<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var y=a[0],E=t[0]-y,w=v-l+1;this._fillCells(y,l,E,w)}else{y=i===l?a[0]:0;var b=l===c?t[0]:this._bufferService.cols;this._fillCells(y,l,b-y,1);var C=Math.max(v-l-1,0);if(this._fillCells(0,l+1,this._bufferService.cols,C),l!==v){var T=c===v?t[0]:this._bufferService.cols;this._fillCells(0,v,T,1)}}this._state.start=[a[0],a[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},u.prototype._didStateChange=function(a,t,e,i){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||i!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(a,t){return!(!a||!t)&&a[0]===t[0]&&a[1]===t[1]},p([f(4,m.IBufferService),f(5,m.IOptionsService)],u)}(S.BaseRenderLayer);s.SelectionRenderLayer=n},9596:function(W,s,g){var h,_=this&&this.__extends||(h=function(c,l){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var E in y)Object.prototype.hasOwnProperty.call(y,E)&&(v[E]=y[E])},h(c,l)},function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function v(){this.constructor=c}h(c,l),c.prototype=l===null?Object.create(l):(v.prototype=l.prototype,new v)}),p=this&&this.__decorate||function(c,l,v,y){var E,w=arguments.length,b=w<3?l:y===null?y=Object.getOwnPropertyDescriptor(l,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,l,v,y);else for(var C=c.length-1;C>=0;C--)(E=c[C])&&(b=(w<3?E(b):w>3?E(l,v,b):E(l,v))||b);return w>3&&b&&Object.defineProperty(l,v,b),b},f=this&&this.__param||function(c,l){return function(v,y){l(v,y,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.TextRenderLayer=void 0;var S=g(3700),m=g(1546),n=g(3734),o=g(643),u=g(511),a=g(2585),t=g(4725),e=g(4269),i=function(c){function l(v,y,E,w,b,C,T,k){var q=c.call(this,v,"text",y,w,E,b,C,T)||this;return q._characterJoinerService=k,q._characterWidth=0,q._characterFont="",q._characterOverlapCache={},q._workCell=new u.CellData,q._state=new S.GridCache,q}return _(l,c),l.prototype.resize=function(v){c.prototype.resize.call(this,v);var y=this._getFont(!1,!1);this._characterWidth===v.scaledCharWidth&&this._characterFont===y||(this._characterWidth=v.scaledCharWidth,this._characterFont=y,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},l.prototype.reset=function(){this._state.clear(),this._clearAll()},l.prototype._forEachCell=function(v,y,E){for(var w=v;w<=y;w++)for(var b=w+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(b),T=this._characterJoinerService.getJoinedCharacters(b),k=0;k<this._bufferService.cols;k++){C.loadCell(k,this._workCell);var q=this._workCell,D=!1,A=k;if(q.getWidth()!==0){if(T.length>0&&k===T[0][0]){D=!0;var O=T.shift();q=new e.JoinedCellData(this._workCell,C.translateToString(!0,O[0],O[1]),O[1]-O[0]),A=O[1]-1}!D&&this._isOverlapping(q)&&A<C.length-1&&C.getCodePoint(A+1)===o.NULL_CELL_CODE&&(q.content&=-12582913,q.content|=2<<22),E(q,k,w),k=A}}},l.prototype._drawBackground=function(v,y){var E=this,w=this._ctx,b=this._bufferService.cols,C=0,T=0,k=null;w.save(),this._forEachCell(v,y,function(q,D,A){var O=null;q.isInverse()?O=q.isFgDefault()?E._colors.foreground.css:q.isFgRGB()?"rgb("+n.AttributeData.toColorRGB(q.getFgColor()).join(",")+")":E._colors.ansi[q.getFgColor()].css:q.isBgRGB()?O="rgb("+n.AttributeData.toColorRGB(q.getBgColor()).join(",")+")":q.isBgPalette()&&(O=E._colors.ansi[q.getBgColor()].css),k===null&&(C=D,T=A),A!==T?(w.fillStyle=k||"",E._fillCells(C,T,b-C,1),C=D,T=A):k!==O&&(w.fillStyle=k||"",E._fillCells(C,T,D-C,1),C=D,T=A),k=O}),k!==null&&(w.fillStyle=k,this._fillCells(C,T,b-C,1)),w.restore()},l.prototype._drawForeground=function(v,y){var E=this;this._forEachCell(v,y,function(w,b,C){if(!w.isInvisible()&&(E._drawChars(w,b,C),w.isUnderline()||w.isStrikethrough())){if(E._ctx.save(),w.isInverse())if(w.isBgDefault())E._ctx.fillStyle=E._colors.background.css;else if(w.isBgRGB())E._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(w.getBgColor()).join(",")+")";else{var T=w.getBgColor();E._optionsService.options.drawBoldTextInBrightColors&&w.isBold()&&T<8&&(T+=8),E._ctx.fillStyle=E._colors.ansi[T].css}else if(w.isFgDefault())E._ctx.fillStyle=E._colors.foreground.css;else if(w.isFgRGB())E._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(w.getFgColor()).join(",")+")";else{var k=w.getFgColor();E._optionsService.options.drawBoldTextInBrightColors&&w.isBold()&&k<8&&(k+=8),E._ctx.fillStyle=E._colors.ansi[k].css}w.isStrikethrough()&&E._fillMiddleLineAtCells(b,C,w.getWidth()),w.isUnderline()&&E._fillBottomLineAtCells(b,C,w.getWidth()),E._ctx.restore()}})},l.prototype.onGridChanged=function(v,y){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,v,this._bufferService.cols,y-v+1),this._drawBackground(v,y),this._drawForeground(v,y))},l.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},l.prototype._isOverlapping=function(v){if(v.getWidth()!==1||v.getCode()<256)return!1;var y=v.getChars();if(this._characterOverlapCache.hasOwnProperty(y))return this._characterOverlapCache[y];this._ctx.save(),this._ctx.font=this._characterFont;var E=Math.floor(this._ctx.measureText(y).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[y]=E,E},p([f(5,a.IBufferService),f(6,a.IOptionsService),f(7,t.ICharacterJoinerService)],l)}(m.BaseRenderLayer);s.TextRenderLayer=i},9616:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseCharAtlas=void 0;var g=function(){function h(){this._didWarmUp=!1}return h.prototype.dispose=function(){},h.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},h.prototype._doWarmUp=function(){},h.prototype.clear=function(){},h.prototype.beginFrame=function(){},h}();s.BaseCharAtlas=g},1420:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireCharAtlas=void 0;var h=g(2040),_=g(1906),p=[];s.acquireCharAtlas=function(f,S,m,n,o){for(var u=(0,h.generateConfig)(n,o,f,m),a=0;a<p.length;a++){var t=(e=p[a]).ownedBy.indexOf(S);if(t>=0){if((0,h.configEquals)(e.config,u))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),p.splice(a,1)):e.ownedBy.splice(t,1);break}}for(a=0;a<p.length;a++){var e=p[a];if((0,h.configEquals)(e.config,u))return e.ownedBy.push(S),e.atlas}var i={atlas:new _.DynamicCharAtlas(document,u),config:u,ownedBy:[S]};return p.push(i),i.atlas},s.removeTerminalFromCache=function(f){for(var S=0;S<p.length;S++){var m=p[S].ownedBy.indexOf(f);if(m!==-1){p[S].ownedBy.length===1?(p[S].atlas.dispose(),p.splice(S,1)):p[S].ownedBy.splice(m,1);break}}}},2040:function(W,s,g){var h=this&&this.__spreadArray||function(p,f,S){if(S||arguments.length===2)for(var m,n=0,o=f.length;n<o;n++)!m&&n in f||(m||(m=Array.prototype.slice.call(f,0,n)),m[n]=f[n]);return p.concat(m||Array.prototype.slice.call(f))};Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;var _=g(643);s.generateConfig=function(p,f,S,m){var n={foreground:m.foreground,background:m.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:h([],m.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:f,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,colors:n}},s.configEquals=function(p,f){for(var S=0;S<p.colors.ansi.length;S++)if(p.colors.ansi[S].rgba!==f.colors.ansi[S].rgba)return!1;return p.devicePixelRatio===f.devicePixelRatio&&p.fontFamily===f.fontFamily&&p.fontSize===f.fontSize&&p.fontWeight===f.fontWeight&&p.fontWeightBold===f.fontWeightBold&&p.allowTransparency===f.allowTransparency&&p.scaledCharWidth===f.scaledCharWidth&&p.scaledCharHeight===f.scaledCharHeight&&p.colors.foreground===f.colors.foreground&&p.colors.background===f.colors.background},s.is256Color=function(p){return p<_.DEFAULT_COLOR}},8803:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR_ATLAS_CELL_SPACING=s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;var h=g(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=h.isFirefox?"bottom":"ideographic",s.CHAR_ATLAS_CELL_SPACING=1},1906:function(W,s,g){var h,_=this&&this.__extends||(h=function(y,E){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(w[C]=b[C])},h(y,E)},function(y,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function w(){this.constructor=y}h(y,E),y.prototype=E===null?Object.create(E):(w.prototype=E.prototype,new w)});Object.defineProperty(s,"__esModule",{value:!0}),s.NoneCharAtlas=s.DynamicCharAtlas=s.getGlyphCacheKey=void 0;var p=g(8803),f=g(9616),S=g(5680),m=g(7001),n=g(6114),o=g(1752),u=g(4774),a=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function i(y){return y.code<<21|y.bg<<12|y.fg<<3|(y.bold?0:4)+(y.dim?0:2)+(y.italic?0:1)}s.getGlyphCacheKey=i;var c=function(y){function E(w,b){var C=y.call(this)||this;C._config=b,C._drawToCacheCount=0,C._glyphsWaitingOnBitmap=[],C._bitmapCommitTimeout=null,C._bitmap=null,C._cacheCanvas=w.createElement("canvas"),C._cacheCanvas.width=a,C._cacheCanvas.height=t,C._cacheCtx=(0,o.throwIfFalsy)(C._cacheCanvas.getContext("2d",{alpha:!0}));var T=w.createElement("canvas");T.width=C._config.scaledCharWidth,T.height=C._config.scaledCharHeight,C._tmpCtx=(0,o.throwIfFalsy)(T.getContext("2d",{alpha:C._config.allowTransparency})),C._width=Math.floor(a/C._config.scaledCharWidth),C._height=Math.floor(t/C._config.scaledCharHeight);var k=C._width*C._height;return C._cacheMap=new m.LRUMap(k),C._cacheMap.prealloc(k),C}return _(E,y),E.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},E.prototype.beginFrame=function(){this._drawToCacheCount=0},E.prototype.clear=function(){if(this._cacheMap.size>0){var w=this._width*this._height;this._cacheMap=new m.LRUMap(w),this._cacheMap.prealloc(w)}this._cacheCtx.clearRect(0,0,a,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},E.prototype.draw=function(w,b,C,T){if(b.code===32)return!0;if(!this._canCache(b))return!1;var k=i(b),q=this._cacheMap.get(k);if(q!=null)return this._drawFromCache(w,q,C,T),!0;if(this._drawToCacheCount<100){var D;D=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var A=this._drawToCache(b,D);return this._cacheMap.set(k,A),this._drawFromCache(w,A,C,T),!0}return!1},E.prototype._canCache=function(w){return w.code<256},E.prototype._toCoordinateX=function(w){return w%this._width*this._config.scaledCharWidth},E.prototype._toCoordinateY=function(w){return Math.floor(w/this._width)*this._config.scaledCharHeight},E.prototype._drawFromCache=function(w,b,C,T){if(!b.isEmpty){var k=this._toCoordinateX(b.index),q=this._toCoordinateY(b.index);w.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,k,q,this._config.scaledCharWidth,this._config.scaledCharHeight,C,T,this._config.scaledCharWidth,this._config.scaledCharHeight)}},E.prototype._getColorFromAnsiIndex=function(w){return w<this._config.colors.ansi.length?this._config.colors.ansi[w]:S.DEFAULT_ANSI_COLORS[w]},E.prototype._getBackgroundColor=function(w){return this._config.allowTransparency?e:w.bg===p.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:w.bg<256?this._getColorFromAnsiIndex(w.bg):this._config.colors.background},E.prototype._getForegroundColor=function(w){return w.fg===p.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):w.fg<256?this._getColorFromAnsiIndex(w.fg):this._config.colors.foreground},E.prototype._drawToCache=function(w,b){this._drawToCacheCount++,this._tmpCtx.save();var C=this._getBackgroundColor(w);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=C.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var T=w.bold?this._config.fontWeightBold:this._config.fontWeight,k=w.italic?"italic":"";this._tmpCtx.font=k+" "+T+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=p.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(w).css,w.dim&&(this._tmpCtx.globalAlpha=p.DIM_OPACITY),this._tmpCtx.fillText(w.chars,0,this._config.scaledCharHeight);var q=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),D=!1;if(this._config.allowTransparency||(D=v(q,C)),D&&w.chars==="_"&&!this._config.allowTransparency)for(var A=1;A<=5&&(this._tmpCtx.fillText(w.chars,0,this._config.scaledCharHeight-A),D=v(q=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),C));A++);this._tmpCtx.restore();var O=this._toCoordinateX(b),H=this._toCoordinateY(b);this._cacheCtx.putImageData(q,O,H);var R={index:b,isEmpty:D,inBitmap:!1};return this._addGlyphToBitmap(R),R},E.prototype._addGlyphToBitmap=function(w){var b=this;!("createImageBitmap"in window)||n.isFirefox||n.isSafari||(this._glyphsWaitingOnBitmap.push(w),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return b._generateBitmap()},100)))},E.prototype._generateBitmap=function(){var w=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(C){w._bitmap=C;for(var T=0;T<b.length;T++)b[T].inBitmap=!0}),this._bitmapCommitTimeout=null},E}(f.BaseCharAtlas);s.DynamicCharAtlas=c;var l=function(y){function E(w,b){return y.call(this)||this}return _(E,y),E.prototype.draw=function(w,b,C,T){return!1},E}(f.BaseCharAtlas);function v(y,E){for(var w=!0,b=E.rgba>>>24,C=E.rgba>>>16&255,T=E.rgba>>>8&255,k=0;k<y.data.length;k+=4)y.data[k]===b&&y.data[k+1]===C&&y.data[k+2]===T?y.data[k+3]=0:w=!1;return w}s.NoneCharAtlas=l},7001:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LRUMap=void 0;var g=function(){function h(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return h.prototype._unlinkNode=function(_){var p=_.prev,f=_.next;_===this._head&&(this._head=f),_===this._tail&&(this._tail=p),p!==null&&(p.next=f),f!==null&&(f.prev=p)},h.prototype._appendNode=function(_){var p=this._tail;p!==null&&(p.next=_),_.prev=p,_.next=null,this._tail=_,this._head===null&&(this._head=_)},h.prototype.prealloc=function(_){for(var p=this._nodePool,f=0;f<_;f++)p.push({prev:null,next:null,key:null,value:null})},h.prototype.get=function(_){var p=this._map[_];return p!==void 0?(this._unlinkNode(p),this._appendNode(p),p.value):null},h.prototype.peekValue=function(_){var p=this._map[_];return p!==void 0?p.value:null},h.prototype.peek=function(){var _=this._head;return _===null?null:_.value},h.prototype.set=function(_,p){var f=this._map[_];if(f!==void 0)f=this._map[_],this._unlinkNode(f),f.value=p;else if(this.size>=this.capacity)f=this._head,this._unlinkNode(f),delete this._map[f.key],f.key=_,f.value=p,this._map[_]=f;else{var S=this._nodePool;S.length>0?((f=S.pop()).key=_,f.value=p):f={prev:null,next:null,key:_,value:p},this._map[_]=f,this.size++}this._appendNode(f)},h}();s.LRUMap=g},1296:function(W,s,g){var h,_=this&&this.__extends||(h=function(w,b){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(C[k]=T[k])},h(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=w}h(w,b),w.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)}),p=this&&this.__decorate||function(w,b,C,T){var k,q=arguments.length,D=q<3?b:T===null?T=Object.getOwnPropertyDescriptor(b,C):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(w,b,C,T);else for(var A=w.length-1;A>=0;A--)(k=w[A])&&(D=(q<3?k(D):q>3?k(b,C,D):k(b,C))||D);return q>3&&D&&Object.defineProperty(b,C,D),D},f=this&&this.__param||function(w,b){return function(C,T){b(C,T,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;var S=g(3787),m=g(8803),n=g(844),o=g(4725),u=g(2585),a=g(8460),t=g(4774),e=g(9631),i="xterm-dom-renderer-owner-",c="xterm-fg-",l="xterm-bg-",v="xterm-focus",y=1,E=function(w){function b(C,T,k,q,D,A,O,H,R,Z){var Q=w.call(this)||this;return Q._colors=C,Q._element=T,Q._screenElement=k,Q._viewportElement=q,Q._linkifier=D,Q._linkifier2=A,Q._charSizeService=H,Q._optionsService=R,Q._bufferService=Z,Q._terminalClass=y++,Q._rowElements=[],Q._rowContainer=document.createElement("div"),Q._rowContainer.classList.add("xterm-rows"),Q._rowContainer.style.lineHeight="normal",Q._rowContainer.setAttribute("aria-hidden","true"),Q._refreshRowElements(Q._bufferService.cols,Q._bufferService.rows),Q._selectionContainer=document.createElement("div"),Q._selectionContainer.classList.add("xterm-selection"),Q._selectionContainer.setAttribute("aria-hidden","true"),Q.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},Q._updateDimensions(),Q._injectCss(),Q._rowFactory=O.createInstance(S.DomRendererRowFactory,document,Q._colors),Q._element.classList.add(i+Q._terminalClass),Q._screenElement.appendChild(Q._rowContainer),Q._screenElement.appendChild(Q._selectionContainer),Q._linkifier.onShowLinkUnderline(function(oe){return Q._onLinkHover(oe)}),Q._linkifier.onHideLinkUnderline(function(oe){return Q._onLinkLeave(oe)}),Q._linkifier2.onShowLinkUnderline(function(oe){return Q._onLinkHover(oe)}),Q._linkifier2.onHideLinkUnderline(function(oe){return Q._onLinkLeave(oe)}),Q}return _(b,w),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return new a.EventEmitter().event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),w.prototype.dispose.call(this)},b.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var C=0,T=this._rowElements;C<T.length;C++){var k=T[C];k.style.width=this.dimensions.canvasWidth+"px",k.style.height=this.dimensions.actualCellHeight+"px",k.style.lineHeight=this.dimensions.actualCellHeight+"px",k.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var q=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=q,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.setColors=function(C){this._colors=C,this._injectCss()},b.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var T=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";T+=this._terminalSelector+" span:not(."+S.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+S.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+S.ITALIC_CLASS+" { font-style: italic;}",T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",T+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",T+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+":not(."+S.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",T+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(k,q){T+=C._terminalSelector+" ."+c+q+" { color: "+k.css+"; }"+C._terminalSelector+" ."+l+q+" { background-color: "+k.css+"; }"}),T+=this._terminalSelector+" ."+c+m.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+l+m.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=T},b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},b.prototype._refreshRowElements=function(C,T){for(var k=this._rowElements.length;k<=T;k++){var q=document.createElement("div");this._rowContainer.appendChild(q),this._rowElements.push(q)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())},b.prototype.onResize=function(C,T){this._refreshRowElements(C,T),this._updateDimensions()},b.prototype.onCharSizeChanged=function(){this._updateDimensions()},b.prototype.onBlur=function(){this._rowContainer.classList.remove(v)},b.prototype.onFocus=function(){this._rowContainer.classList.add(v)},b.prototype.onSelectionChanged=function(C,T,k){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(C&&T){var q=C[1]-this._bufferService.buffer.ydisp,D=T[1]-this._bufferService.buffer.ydisp,A=Math.max(q,0),O=Math.min(D,this._bufferService.rows-1);if(!(A>=this._bufferService.rows||O<0)){var H=document.createDocumentFragment();if(k)H.appendChild(this._createSelectionElement(A,C[0],T[0],O-A+1));else{var R=q===A?C[0]:0,Z=A===D?T[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(A,R,Z));var Q=O-A-1;if(H.appendChild(this._createSelectionElement(A+1,0,this._bufferService.cols,Q)),A!==O){var oe=D===O?T[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(O,0,oe))}}this._selectionContainer.appendChild(H)}}},b.prototype._createSelectionElement=function(C,T,k,q){q===void 0&&(q=1);var D=document.createElement("div");return D.style.height=q*this.dimensions.actualCellHeight+"px",D.style.top=C*this.dimensions.actualCellHeight+"px",D.style.left=T*this.dimensions.actualCellWidth+"px",D.style.width=this.dimensions.actualCellWidth*(k-T)+"px",D},b.prototype.onCursorMove=function(){},b.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},b.prototype.clear=function(){for(var C=0,T=this._rowElements;C<T.length;C++)T[C].innerText=""},b.prototype.renderRows=function(C,T){for(var k=this._bufferService.buffer.ybase+this._bufferService.buffer.y,q=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),D=this._optionsService.options.cursorBlink,A=C;A<=T;A++){var O=this._rowElements[A];O.innerText="";var H=A+this._bufferService.buffer.ydisp,R=this._bufferService.buffer.lines.get(H),Z=this._optionsService.options.cursorStyle;O.appendChild(this._rowFactory.createRow(R,H,H===k,Z,q,D,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(b.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),b.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},b.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},b.prototype._setCellUnderline=function(C,T,k,q,D,A){for(;C!==T||k!==q;){var O=this._rowElements[k];if(!O)return;var H=O.children[C];H&&(H.style.textDecoration=A?"underline":"none"),++C>=D&&(C=0,k++)}},p([f(6,u.IInstantiationService),f(7,o.ICharSizeService),f(8,u.IOptionsService),f(9,u.IBufferService)],b)}(n.Disposable);s.DomRenderer=E},3787:function(W,s,g){var h=this&&this.__decorate||function(e,i,c,l){var v,y=arguments.length,E=y<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,i,c,l);else for(var w=e.length-1;w>=0;w--)(v=e[w])&&(E=(y<3?v(E):y>3?v(i,c,E):v(i,c))||E);return y>3&&E&&Object.defineProperty(i,c,E),E},_=this&&this.__param||function(e,i){return function(c,l){i(c,l,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=s.CURSOR_STYLE_UNDERLINE_CLASS=s.CURSOR_STYLE_BAR_CLASS=s.CURSOR_STYLE_BLOCK_CLASS=s.CURSOR_BLINK_CLASS=s.CURSOR_CLASS=s.STRIKETHROUGH_CLASS=s.UNDERLINE_CLASS=s.ITALIC_CLASS=s.DIM_CLASS=s.BOLD_CLASS=void 0;var p=g(8803),f=g(643),S=g(511),m=g(2585),n=g(4774),o=g(4725),u=g(4269);s.BOLD_CLASS="xterm-bold",s.DIM_CLASS="xterm-dim",s.ITALIC_CLASS="xterm-italic",s.UNDERLINE_CLASS="xterm-underline",s.STRIKETHROUGH_CLASS="xterm-strikethrough",s.CURSOR_CLASS="xterm-cursor",s.CURSOR_BLINK_CLASS="xterm-cursor-blink",s.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",s.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",s.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var a=function(){function e(i,c,l,v,y){this._document=i,this._colors=c,this._characterJoinerService=l,this._optionsService=v,this._coreService=y,this._workCell=new S.CellData}return e.prototype.setColors=function(i){this._colors=i},e.prototype.createRow=function(i,c,l,v,y,E,w,b){for(var C=this._document.createDocumentFragment(),T=this._characterJoinerService.getJoinedCharacters(c),k=0,q=Math.min(i.length,b)-1;q>=0;q--)if(i.loadCell(q,this._workCell).getCode()!==f.NULL_CELL_CODE||l&&q===y){k=q+1;break}for(q=0;q<k;q++){i.loadCell(q,this._workCell);var D=this._workCell.getWidth();if(D!==0){var A=!1,O=q,H=this._workCell;if(T.length>0&&q===T[0][0]){A=!0;var R=T.shift();H=new u.JoinedCellData(this._workCell,i.translateToString(!0,R[0],R[1]),R[1]-R[0]),O=R[1]-1,D=H.getWidth()}var Z=this._document.createElement("span");if(D>1&&(Z.style.width=w*D+"px"),A&&(Z.style.display="inline",y>=q&&y<=O&&(y=q)),!this._coreService.isCursorHidden&&l&&q===y)switch(Z.classList.add(s.CURSOR_CLASS),E&&Z.classList.add(s.CURSOR_BLINK_CLASS),v){case"bar":Z.classList.add(s.CURSOR_STYLE_BAR_CLASS);break;case"underline":Z.classList.add(s.CURSOR_STYLE_UNDERLINE_CLASS);break;default:Z.classList.add(s.CURSOR_STYLE_BLOCK_CLASS)}H.isBold()&&Z.classList.add(s.BOLD_CLASS),H.isItalic()&&Z.classList.add(s.ITALIC_CLASS),H.isDim()&&Z.classList.add(s.DIM_CLASS),H.isUnderline()&&Z.classList.add(s.UNDERLINE_CLASS),H.isInvisible()?Z.textContent=f.WHITESPACE_CELL_CHAR:Z.textContent=H.getChars()||f.WHITESPACE_CELL_CHAR,H.isStrikethrough()&&Z.classList.add(s.STRIKETHROUGH_CLASS);var Q=H.getFgColor(),oe=H.getFgColorMode(),le=H.getBgColor(),he=H.getBgColorMode(),x=!!H.isInverse();if(x){var B=Q;Q=le,le=B;var I=oe;oe=he,he=I}switch(oe){case 16777216:case 33554432:H.isBold()&&Q<8&&this._optionsService.options.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(Z,this._colors.background,this._colors.ansi[Q])||Z.classList.add("xterm-fg-"+Q);break;case 50331648:var X=n.rgba.toColor(Q>>16&255,Q>>8&255,255&Q);this._applyMinimumContrast(Z,this._colors.background,X)||this._addStyle(Z,"color:#"+t(Q.toString(16),"0",6));break;default:this._applyMinimumContrast(Z,this._colors.background,this._colors.foreground)||x&&Z.classList.add("xterm-fg-"+p.INVERTED_DEFAULT_COLOR)}switch(he){case 16777216:case 33554432:Z.classList.add("xterm-bg-"+le);break;case 50331648:this._addStyle(Z,"background-color:#"+t(le.toString(16),"0",6));break;default:x&&Z.classList.add("xterm-bg-"+p.INVERTED_DEFAULT_COLOR)}C.appendChild(Z),q=O}}return C},e.prototype._applyMinimumContrast=function(i,c,l){if(this._optionsService.options.minimumContrastRatio===1)return!1;var v=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return v===void 0&&(v=n.color.ensureContrastRatio(c,l,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,v??null)),!!v&&(this._addStyle(i,"color:"+v.css),!0)},e.prototype._addStyle=function(i,c){i.setAttribute("style",""+(i.getAttribute("style")||"")+c+";")},h([_(2,o.ICharacterJoinerService),_(3,m.IOptionsService),_(4,m.ICoreService)],e)}();function t(e,i,c){for(;e.length<c;)e=i+e;return e}s.DomRendererRowFactory=a},456:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0;var g=function(){function h(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return h.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(h.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?_%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)-1]:[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),h.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,p=this.selectionEnd;return!(!_||!p)&&(_[1]>p[1]||_[1]===p[1]&&_[0]>p[0])},h.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},h}();s.SelectionModel=g},428:function(W,s,g){var h=this&&this.__decorate||function(n,o,u,a){var t,e=arguments.length,i=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,u):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,o,u,a);else for(var c=n.length-1;c>=0;c--)(t=n[c])&&(i=(e<3?t(i):e>3?t(o,u,i):t(o,u))||i);return e>3&&i&&Object.defineProperty(o,u,i),i},_=this&&this.__param||function(n,o){return function(u,a){o(u,a,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;var p=g(2585),f=g(8460),S=function(){function n(o,u,a){this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=new f.EventEmitter,this._measureStrategy=new m(o,u,this._optionsService)}return Object.defineProperty(n.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),n.prototype.measure=function(){var o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())},h([_(2,p.IOptionsService)],n)}();s.CharSizeService=S;var m=function(){function n(o,u,a){this._document=o,this._parentElement=u,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return n.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var o=this._measureElement.getBoundingClientRect();return o.width!==0&&o.height!==0&&(this._result.width=o.width,this._result.height=Math.ceil(o.height)),this._result},n}()},4269:function(W,s,g){var h,_=this&&this.__extends||(h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(i[l]=c[l])},h(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}),p=this&&this.__decorate||function(t,e,i,c){var l,v=arguments.length,y=v<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,e,i,c);else for(var E=t.length-1;E>=0;E--)(l=t[E])&&(y=(v<3?l(y):v>3?l(e,i,y):l(e,i))||y);return v>3&&y&&Object.defineProperty(e,i,y),y},f=this&&this.__param||function(t,e){return function(i,c){e(i,c,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;var S=g(3734),m=g(643),n=g(511),o=g(2585),u=function(t){function e(i,c,l){var v=t.call(this)||this;return v.content=0,v.combinedData="",v.fg=i.fg,v.bg=i.bg,v.combinedData=c,v._width=l,v}return _(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(i){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(S.AttributeData);s.JoinedCellData=u;var a=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new n.CellData}return t.prototype.register=function(e){var i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id},t.prototype.deregister=function(e){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];for(var c=[],l=i.translateToString(!0),v=0,y=0,E=0,w=i.getFg(0),b=i.getBg(0),C=0;C<i.getTrimmedLength();C++)if(i.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==b){if(C-v>1)for(var T=this._getJoinedRanges(l,E,y,i,v),k=0;k<T.length;k++)c.push(T[k]);v=C,E=y,w=this._workCell.fg,b=this._workCell.bg}y+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1)for(T=this._getJoinedRanges(l,E,y,i,v),k=0;k<T.length;k++)c.push(T[k]);return c},t.prototype._getJoinedRanges=function(e,i,c,l,v){var y=e.substring(i,c),E=[];try{E=this._characterJoiners[0].handler(y)}catch(T){console.error(T)}for(var w=1;w<this._characterJoiners.length;w++)try{for(var b=this._characterJoiners[w].handler(y),C=0;C<b.length;C++)t._mergeRanges(E,b[C])}catch(T){console.error(T)}return this._stringRangesToCellRanges(E,l,v),E},t.prototype._stringRangesToCellRanges=function(e,i,c){var l=0,v=!1,y=0,E=e[l];if(E){for(var w=c;w<this._bufferService.cols;w++){var b=i.getWidth(w),C=i.getString(w).length||m.WHITESPACE_CELL_CHAR.length;if(b!==0){if(!v&&E[0]<=y&&(E[0]=w,v=!0),E[1]<=y){if(E[1]=w,!(E=e[++l]))break;E[0]<=y?(E[0]=w,v=!0):v=!1}y+=C}}E&&(E[1]=this._bufferService.cols)}},t._mergeRanges=function(e,i){for(var c=!1,l=0;l<e.length;l++){var v=e[l];if(c){if(i[1]<=v[0])return e[l-1][1]=i[1],e;if(i[1]<=v[1])return e[l-1][1]=Math.max(i[1],v[1]),e.splice(l,1),e;e.splice(l,1),l--}else{if(i[1]<=v[0])return e.splice(l,0,i),e;if(i[1]<=v[1])return v[0]=Math.min(i[0],v[0]),e;i[0]<v[1]&&(v[0]=Math.min(i[0],v[0]),c=!0)}}return c?e[e.length-1][1]=i[1]:e.push(i),e},t=p([f(0,o.IBufferService)],t)}();s.CharacterJoinerService=a},5114:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;var g=function(){function h(_){this._textarea=_}return Object.defineProperty(h.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),h}();s.CoreBrowserService=g},8934:function(W,s,g){var h=this&&this.__decorate||function(m,n,o,u){var a,t=arguments.length,e=t<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,o):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(m,n,o,u);else for(var i=m.length-1;i>=0;i--)(a=m[i])&&(e=(t<3?a(e):t>3?a(n,o,e):a(n,o))||e);return t>3&&e&&Object.defineProperty(n,o,e),e},_=this&&this.__param||function(m,n){return function(o,u){n(o,u,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;var p=g(4725),f=g(9806),S=function(){function m(n,o){this._renderService=n,this._charSizeService=o}return m.prototype.getCoords=function(n,o,u,a,t){return(0,f.getCoords)(n,o,u,a,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},m.prototype.getRawByteCoords=function(n,o,u,a){var t=this.getCoords(n,o,u,a);return(0,f.getRawByteCoords)(t)},h([_(0,p.IRenderService),_(1,p.ICharSizeService)],m)}();s.MouseService=S},3230:function(W,s,g){var h,_=this&&this.__extends||(h=function(i,c){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(l[y]=v[y])},h(i,c)},function(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function l(){this.constructor=i}h(i,c),i.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}),p=this&&this.__decorate||function(i,c,l,v){var y,E=arguments.length,w=E<3?c:v===null?v=Object.getOwnPropertyDescriptor(c,l):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(i,c,l,v);else for(var b=i.length-1;b>=0;b--)(y=i[b])&&(w=(E<3?y(w):E>3?y(c,l,w):y(c,l))||w);return E>3&&w&&Object.defineProperty(c,l,w),w},f=this&&this.__param||function(i,c){return function(l,v){c(l,v,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;var S=g(6193),m=g(8460),n=g(844),o=g(5596),u=g(3656),a=g(2585),t=g(4725),e=function(i){function c(l,v,y,E,w,b){var C=i.call(this)||this;if(C._renderer=l,C._rowCount=v,C._charSizeService=w,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new m.EventEmitter,C._onRender=new m.EventEmitter,C._onRefreshRequest=new m.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new S.RenderDebouncer(function(k,q){return C._renderRows(k,q)}),C.register(C._renderDebouncer),C._screenDprMonitor=new o.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(b.onResize(function(k){return C._fullRefresh()})),C.register(E.onOptionChange(function(){return C._renderer.onOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C._renderer.onRequestRedraw(function(k){return C.refreshRows(k.start,k.end,!0)}),C.register((0,u.addDisposableDomListener)(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var T=new IntersectionObserver(function(k){return C._onIntersectionChange(k[k.length-1])},{threshold:0});T.observe(y),C.register({dispose:function(){return T.disconnect()}})}return C}return _(c,i),Object.defineProperty(c.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),c.prototype._onIntersectionChange=function(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},c.prototype.refreshRows=function(l,v,y){y===void 0&&(y=!1),this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,v,this._rowCount))},c.prototype._renderRows=function(l,v){this._renderer.renderRows(l,v),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:l,end:v}),this._isNextRenderRedrawOnly=!0},c.prototype.resize=function(l,v){this._rowCount=v,this._fireOnCanvasResize()},c.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},c.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},c.prototype.dispose=function(){i.prototype.dispose.call(this)},c.prototype.setRenderer=function(l){var v=this;this._renderer.dispose(),this._renderer=l,this._renderer.onRequestRedraw(function(y){return v.refreshRows(y.start,y.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},c.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},c.prototype.clearTextureAtlas=function(){var l,v;(v=(l=this._renderer)===null||l===void 0?void 0:l.clearTextureAtlas)===null||v===void 0||v.call(l),this._fullRefresh()},c.prototype.setColors=function(l){this._renderer.setColors(l),this._fullRefresh()},c.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},c.prototype.onResize=function(l,v){this._renderer.onResize(l,v),this._fullRefresh()},c.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},c.prototype.onBlur=function(){this._renderer.onBlur()},c.prototype.onFocus=function(){this._renderer.onFocus()},c.prototype.onSelectionChanged=function(l,v,y){this._selectionState.start=l,this._selectionState.end=v,this._selectionState.columnSelectMode=y,this._renderer.onSelectionChanged(l,v,y)},c.prototype.onCursorMove=function(){this._renderer.onCursorMove()},c.prototype.clear=function(){this._renderer.clear()},p([f(3,a.IOptionsService),f(4,t.ICharSizeService),f(5,a.IBufferService)],c)}(n.Disposable);s.RenderService=e},9312:function(W,s,g){var h,_=this&&this.__extends||(h=function(E,w){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&(b[T]=C[T])},h(E,w)},function(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function b(){this.constructor=E}h(E,w),E.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}),p=this&&this.__decorate||function(E,w,b,C){var T,k=arguments.length,q=k<3?w:C===null?C=Object.getOwnPropertyDescriptor(w,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(E,w,b,C);else for(var D=E.length-1;D>=0;D--)(T=E[D])&&(q=(k<3?T(q):k>3?T(w,b,q):T(w,b))||q);return k>3&&q&&Object.defineProperty(w,b,q),q},f=this&&this.__param||function(E,w){return function(b,C){w(b,C,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;var S=g(6114),m=g(456),n=g(511),o=g(8460),u=g(4725),a=g(2585),t=g(9806),e=g(9504),i=g(844),c=g(4841),l=String.fromCharCode(160),v=new RegExp(l,"g"),y=function(E){function w(b,C,T,k,q,D,A,O){var H=E.call(this)||this;return H._element=b,H._screenElement=C,H._linkifier=T,H._bufferService=k,H._coreService=q,H._mouseService=D,H._optionsService=A,H._renderService=O,H._dragScrollAmount=0,H._enabled=!0,H._workCell=new n.CellData,H._mouseDownTimeStamp=0,H._oldHasSelection=!1,H._oldSelectionStart=void 0,H._oldSelectionEnd=void 0,H._onLinuxMouseSelection=H.register(new o.EventEmitter),H._onRedrawRequest=H.register(new o.EventEmitter),H._onSelectionChange=H.register(new o.EventEmitter),H._onRequestScrollLines=H.register(new o.EventEmitter),H._mouseMoveListener=function(R){return H._onMouseMove(R)},H._mouseUpListener=function(R){return H._onMouseUp(R)},H._coreService.onUserInput(function(){H.hasSelection&&H.clearSelection()}),H._trimListener=H._bufferService.buffer.lines.onTrim(function(R){return H._onTrim(R)}),H.register(H._bufferService.buffers.onBufferActivate(function(R){return H._onBufferActivate(R)})),H.enable(),H._model=new m.SelectionModel(H._bufferService),H._activeSelectionMode=0,H}return _(w,E),Object.defineProperty(w.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){this._removeMouseDownListeners()},w.prototype.reset=function(){this.clearSelection()},w.prototype.disable=function(){this.clearSelection(),this._enabled=!1},w.prototype.enable=function(){this._enabled=!0},Object.defineProperty(w.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"hasSelection",{get:function(){var b=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!b||!C||b[0]===C[0]&&b[1]===C[1])},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"selectionText",{get:function(){var b=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!b||!C)return"";var T=this._bufferService.buffer,k=[];if(this._activeSelectionMode===3){if(b[0]===C[0])return"";for(var q=b[1];q<=C[1];q++){var D=T.translateBufferLineToString(q,!0,b[0],C[0]);k.push(D)}}else{var A=b[1]===C[1]?C[0]:void 0;for(k.push(T.translateBufferLineToString(b[1],!0,b[0],A)),q=b[1]+1;q<=C[1]-1;q++){var O=T.lines.get(q);D=T.translateBufferLineToString(q,!0),(O==null?void 0:O.isWrapped)?k[k.length-1]+=D:k.push(D)}b[1]!==C[1]&&(O=T.lines.get(C[1]),D=T.translateBufferLineToString(C[1],!0,0,C[0]),O&&O.isWrapped?k[k.length-1]+=D:k.push(D))}return k.map(function(H){return H.replace(v," ")}).join(S.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),w.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},w.prototype.refresh=function(b){var C=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return C._refresh()})),S.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},w.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},w.prototype._isClickInSelection=function(b){var C=this._getMouseBufferCoords(b),T=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!!(T&&k&&C)&&this._areCoordsInSelection(C,T,k)},w.prototype._areCoordsInSelection=function(b,C,T){return b[1]>C[1]&&b[1]<T[1]||C[1]===T[1]&&b[1]===C[1]&&b[0]>=C[0]&&b[0]<T[0]||C[1]<T[1]&&b[1]===T[1]&&b[0]<T[0]||C[1]<T[1]&&b[1]===C[1]&&b[0]>=C[0]},w.prototype._selectWordAtCursor=function(b,C){var T,k,q=(k=(T=this._linkifier.currentLink)===null||T===void 0?void 0:T.link)===null||k===void 0?void 0:k.range;if(q)return this._model.selectionStart=[q.start.x-1,q.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(q,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var D=this._getMouseBufferCoords(b);return!!D&&(this._selectWordAt(D,C),this._model.selectionEnd=void 0,!0)},w.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},w.prototype.selectLines=function(b,C){this._model.clearSelection(),b=Math.max(b,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()},w.prototype._onTrim=function(b){this._model.onTrim(b)&&this.refresh()},w.prototype._getMouseBufferCoords=function(b){var C=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C},w.prototype._getMouseEventScrollAmount=function(b){var C=(0,t.getCoordsRelativeToElement)(b,this._screenElement)[1],T=this._renderService.dimensions.canvasHeight;return C>=0&&C<=T?0:(C>T&&(C-=T),C=Math.min(Math.max(C,-50),50),(C/=50)/Math.abs(C)+Math.round(14*C))},w.prototype.shouldForceSelection=function(b){return S.isMac?b.altKey&&this._optionsService.options.macOptionClickForcesSelection:b.shiftKey},w.prototype.onMouseDown=function(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._onIncrementalClick(b):b.detail===1?this._onSingleClick(b):b.detail===2?this._onDoubleClick(b):b.detail===3&&this._onTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}},w.prototype._addMouseDownListeners=function(){var b=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return b._dragScroll()},50)},w.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},w.prototype._onIncrementalClick=function(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))},w.prototype._onSingleClick=function(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),this._model.selectionStart){this._model.selectionEnd=void 0;var C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},w.prototype._onDoubleClick=function(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)},w.prototype._onTripleClick=function(b){var C=this._getMouseBufferCoords(b);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))},w.prototype.shouldColumnSelect=function(b){return b.altKey&&!(S.isMac&&this._optionsService.options.macOptionClickForcesSelection)},w.prototype._onMouseMove=function(b){if(b.stopImmediatePropagation(),this._model.selectionStart){var C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){var k=T.lines.get(this._model.selectionEnd[1]);k&&k.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},w.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}},w.prototype._onMouseUp=function(b){var C=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&b.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var T=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){var k=(0,e.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(k,!0)}}}else this._fireEventIfSelectionChanged()},w.prototype._fireEventIfSelectionChanged=function(){var b=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,T=!(!b||!C||b[0]===C[0]&&b[1]===C[1]);T?b&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,C,T)):this._oldHasSelection&&this._fireOnSelectionChange(b,C,T)},w.prototype._fireOnSelectionChange=function(b,C,T){this._oldSelectionStart=b,this._oldSelectionEnd=C,this._oldHasSelection=T,this._onSelectionChange.fire()},w.prototype._onBufferActivate=function(b){var C=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(function(T){return C._onTrim(T)})},w.prototype._convertViewportColToCharacterIndex=function(b,C){for(var T=C[0],k=0;C[0]>=k;k++){var q=b.loadCell(k,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:q>1&&C[0]!==k&&(T+=q-1)}return T},w.prototype.setSelection=function(b,C,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,C],this._model.selectionStartLength=T,this.refresh()},w.prototype.rightClickSelect=function(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},w.prototype._getWordAt=function(b,C,T,k){if(T===void 0&&(T=!0),k===void 0&&(k=!0),!(b[0]>=this._bufferService.cols)){var q=this._bufferService.buffer,D=q.lines.get(b[1]);if(D){var A=q.translateBufferLineToString(b[1],!1),O=this._convertViewportColToCharacterIndex(D,b),H=O,R=b[0]-O,Z=0,Q=0,oe=0,le=0;if(A.charAt(O)===" "){for(;O>0&&A.charAt(O-1)===" ";)O--;for(;H<A.length&&A.charAt(H+1)===" ";)H++}else{var he=b[0],x=b[0];D.getWidth(he)===0&&(Z++,he--),D.getWidth(x)===2&&(Q++,x++);var B=D.getString(x).length;for(B>1&&(le+=B-1,H+=B-1);he>0&&O>0&&!this._isCharWordSeparator(D.loadCell(he-1,this._workCell));){D.loadCell(he-1,this._workCell);var I=this._workCell.getChars().length;this._workCell.getWidth()===0?(Z++,he--):I>1&&(oe+=I-1,O-=I-1),O--,he--}for(;x<D.length&&H+1<A.length&&!this._isCharWordSeparator(D.loadCell(x+1,this._workCell));){D.loadCell(x+1,this._workCell);var X=this._workCell.getChars().length;this._workCell.getWidth()===2?(Q++,x++):X>1&&(le+=X-1,H+=X-1),H++,x++}}H++;var j=O+R-Z+oe,Y=Math.min(this._bufferService.cols,H-O+Z+Q-oe-le);if(C||A.slice(O,H).trim()!==""){if(T&&j===0&&D.getCodePoint(0)!==32){var se=q.lines.get(b[1]-1);if(se&&D.isWrapped&&se.getCodePoint(this._bufferService.cols-1)!==32){var Ce=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(Ce){var Me=this._bufferService.cols-Ce.start;j-=Me,Y+=Me}}}if(k&&j+Y===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){var Ae=q.lines.get(b[1]+1);if((Ae==null?void 0:Ae.isWrapped)&&Ae.getCodePoint(0)!==32){var ie=this._getWordAt([0,b[1]+1],!1,!1,!0);ie&&(Y+=ie.length)}}return{start:j,length:Y}}}}},w.prototype._selectWordAt=function(b,C){var T=this._getWordAt(b,C);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[T.start,b[1]],this._model.selectionStartLength=T.length}},w.prototype._selectToWordAt=function(b){var C=this._getWordAt(b,!0);if(C){for(var T=b[1];C.start<0;)C.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,T]}},w.prototype._isCharWordSeparator=function(b){return b.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(b.getChars())>=0},w.prototype._selectLineAt=function(b){var C=this._bufferService.buffer.getWrappedRangeForLine(b);this._model.selectionStart=[0,C.first],this._model.selectionEnd=[this._bufferService.cols,C.last],this._model.selectionStartLength=0},p([f(3,a.IBufferService),f(4,a.ICoreService),f(5,u.IMouseService),f(6,a.IOptionsService),f(7,u.IRenderService)],w)}(i.Disposable);s.SelectionService=y},4725:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ICharacterJoinerService=s.ISoundService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;var h=g(8343);s.ICharSizeService=(0,h.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),s.IMouseService=(0,h.createDecorator)("MouseService"),s.IRenderService=(0,h.createDecorator)("RenderService"),s.ISelectionService=(0,h.createDecorator)("SelectionService"),s.ISoundService=(0,h.createDecorator)("SoundService"),s.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService")},357:function(W,s,g){var h=this&&this.__decorate||function(S,m,n,o){var u,a=arguments.length,t=a<3?m:o===null?o=Object.getOwnPropertyDescriptor(m,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(S,m,n,o);else for(var e=S.length-1;e>=0;e--)(u=S[e])&&(t=(a<3?u(t):a>3?u(m,n,t):u(m,n))||t);return a>3&&t&&Object.defineProperty(m,n,t),t},_=this&&this.__param||function(S,m){return function(n,o){m(n,o,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SoundService=void 0;var p=g(2585),f=function(){function S(m){this._optionsService=m}return Object.defineProperty(S,"audioContext",{get:function(){if(!S._audioContext){var m=window.AudioContext||window.webkitAudioContext;if(!m)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;S._audioContext=new m}return S._audioContext},enumerable:!1,configurable:!0}),S.prototype.playBellSound=function(){var m=S.audioContext;if(m){var n=m.createBufferSource();m.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(o){n.buffer=o,n.connect(m.destination),n.start(0)})}},S.prototype._base64ToArrayBuffer=function(m){for(var n=window.atob(m),o=n.length,u=new Uint8Array(o),a=0;a<o;a++)u[a]=n.charCodeAt(a);return u.buffer},S.prototype._removeMimeType=function(m){return m.split(",")[1]},S=h([_(0,p.IOptionsService)],S)}();s.SoundService=f},6349:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;var h=g(8460),_=function(){function p(f){this._maxLength=f,this.onDeleteEmitter=new h.EventEmitter,this.onInsertEmitter=new h.EventEmitter,this.onTrimEmitter=new h.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(p.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"maxLength",{get:function(){return this._maxLength},set:function(f){if(this._maxLength!==f){for(var S=new Array(f),m=0;m<Math.min(f,this.length);m++)S[m]=this._array[this._getCyclicIndex(m)];this._array=S,this._maxLength=f,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"length",{get:function(){return this._length},set:function(f){if(f>this._length)for(var S=this._length;S<f;S++)this._array[S]=void 0;this._length=f},enumerable:!1,configurable:!0}),p.prototype.get=function(f){return this._array[this._getCyclicIndex(f)]},p.prototype.set=function(f,S){this._array[this._getCyclicIndex(f)]=S},p.prototype.push=function(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},p.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(p.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),p.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},p.prototype.splice=function(f,S){for(var m=[],n=2;n<arguments.length;n++)m[n-2]=arguments[n];if(S){for(var o=f;o<this._length-S;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+S)];this._length-=S,this.onDeleteEmitter.fire({index:f,amount:S})}for(o=this._length-1;o>=f;o--)this._array[this._getCyclicIndex(o+m.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<m.length;o++)this._array[this._getCyclicIndex(f+o)]=m[o];if(m.length&&this.onInsertEmitter.fire({index:f,amount:m.length}),this._length+m.length>this._maxLength){var u=this._length+m.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=m.length},p.prototype.trimStart=function(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)},p.prototype.shiftElements=function(f,S,m){if(!(S<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(var n=S-1;n>=0;n--)this.set(f+n+m,this.get(f+n));var o=f+S+m-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(n=0;n<S;n++)this.set(f+n+m,this.get(f+n))}},p.prototype._getCyclicIndex=function(f){return(this._startIndex+f)%this._maxLength},p}();s.CircularList=_},1439:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function g(h,_){if(_===void 0&&(_=5),typeof h!="object")return h;var p=Array.isArray(h)?[]:{};for(var f in h)p[f]=_<=1?h[f]:h[f]&&g(h[f],_-1);return p}},8969:function(W,s,g){var h,_=this&&this.__extends||(h=function(b,C){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,k){T.__proto__=k}||function(T,k){for(var q in k)Object.prototype.hasOwnProperty.call(k,q)&&(T[q]=k[q])},h(b,C)},function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function T(){this.constructor=b}h(b,C),b.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)});Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;var p=g(844),f=g(2585),S=g(4348),m=g(7866),n=g(744),o=g(7302),u=g(6975),a=g(8460),t=g(1753),e=g(3730),i=g(1480),c=g(7994),l=g(9282),v=g(5435),y=g(5981),E=!1,w=function(b){function C(T){var k=b.call(this)||this;return k._onBinary=new a.EventEmitter,k._onData=new a.EventEmitter,k._onLineFeed=new a.EventEmitter,k._onResize=new a.EventEmitter,k._onScroll=new a.EventEmitter,k._instantiationService=new S.InstantiationService,k.optionsService=new o.OptionsService(T),k._instantiationService.setService(f.IOptionsService,k.optionsService),k._bufferService=k.register(k._instantiationService.createInstance(n.BufferService)),k._instantiationService.setService(f.IBufferService,k._bufferService),k._logService=k._instantiationService.createInstance(m.LogService),k._instantiationService.setService(f.ILogService,k._logService),k.coreService=k.register(k._instantiationService.createInstance(u.CoreService,function(){return k.scrollToBottom()})),k._instantiationService.setService(f.ICoreService,k.coreService),k.coreMouseService=k._instantiationService.createInstance(t.CoreMouseService),k._instantiationService.setService(f.ICoreMouseService,k.coreMouseService),k._dirtyRowService=k._instantiationService.createInstance(e.DirtyRowService),k._instantiationService.setService(f.IDirtyRowService,k._dirtyRowService),k.unicodeService=k._instantiationService.createInstance(i.UnicodeService),k._instantiationService.setService(f.IUnicodeService,k.unicodeService),k._charsetService=k._instantiationService.createInstance(c.CharsetService),k._instantiationService.setService(f.ICharsetService,k._charsetService),k._inputHandler=new v.InputHandler(k._bufferService,k._charsetService,k.coreService,k._dirtyRowService,k._logService,k.optionsService,k.coreMouseService,k.unicodeService),k.register((0,a.forwardEvent)(k._inputHandler.onLineFeed,k._onLineFeed)),k.register(k._inputHandler),k.register((0,a.forwardEvent)(k._bufferService.onResize,k._onResize)),k.register((0,a.forwardEvent)(k.coreService.onData,k._onData)),k.register((0,a.forwardEvent)(k.coreService.onBinary,k._onBinary)),k.register(k.optionsService.onOptionChange(function(q){return k._updateOptions(q)})),k.register(k._bufferService.onScroll(function(q){k._onScroll.fire({position:k._bufferService.buffer.ydisp,source:0}),k._dirtyRowService.markRangeDirty(k._bufferService.buffer.scrollTop,k._bufferService.buffer.scrollBottom)})),k.register(k._inputHandler.onScroll(function(q){k._onScroll.fire({position:k._bufferService.buffer.ydisp,source:0}),k._dirtyRowService.markRangeDirty(k._bufferService.buffer.scrollTop,k._bufferService.buffer.scrollBottom)})),k._writeBuffer=new y.WriteBuffer(function(q,D){return k._inputHandler.parse(q,D)}),k}return _(C,b),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var T=this;return this._onScrollApi||(this._onScrollApi=new a.EventEmitter,this.register(this._onScroll.event(function(k){var q;(q=T._onScrollApi)===null||q===void 0||q.fire(k.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"options",{get:function(){return this.optionsService.options},set:function(T){for(var k in T)this.optionsService.options[k]=T[k]},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var T;this._isDisposed||(b.prototype.dispose.call(this),(T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)},C.prototype.write=function(T,k){this._writeBuffer.write(T,k)},C.prototype.writeSync=function(T,k){this._logService.logLevel<=f.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(T,k)},C.prototype.resize=function(T,k){isNaN(T)||isNaN(k)||(T=Math.max(T,n.MINIMUM_COLS),k=Math.max(k,n.MINIMUM_ROWS),this._bufferService.resize(T,k))},C.prototype.scroll=function(T,k){k===void 0&&(k=!1),this._bufferService.scroll(T,k)},C.prototype.scrollLines=function(T,k,q){this._bufferService.scrollLines(T,k,q)},C.prototype.scrollPages=function(T){this._bufferService.scrollPages(T)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(T){this._bufferService.scrollToLine(T)},C.prototype.registerEscHandler=function(T,k){return this._inputHandler.registerEscHandler(T,k)},C.prototype.registerDcsHandler=function(T,k){return this._inputHandler.registerDcsHandler(T,k)},C.prototype.registerCsiHandler=function(T,k){return this._inputHandler.registerCsiHandler(T,k)},C.prototype.registerOscHandler=function(T,k){return this._inputHandler.registerOscHandler(T,k)},C.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},C.prototype._updateOptions=function(T){var k;switch(T){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((k=this._windowsMode)===null||k===void 0||k.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var T=this;if(!this._windowsMode){var k=[];k.push(this.onLineFeed(l.updateWindowsModeWrappedState.bind(null,this._bufferService))),k.push(this.registerCsiHandler({final:"H"},function(){return(0,l.updateWindowsModeWrappedState)(T._bufferService),!1})),this._windowsMode={dispose:function(){for(var q=0,D=k;q<D.length;q++)D[q].dispose()}}}},C}(p.Disposable);s.CoreTerminal=w},8460:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0;var g=function(){function h(){this._listeners=[],this._disposed=!1}return Object.defineProperty(h.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(p){return _._listeners.push(p),{dispose:function(){if(!_._disposed){for(var f=0;f<_._listeners.length;f++)if(_._listeners[f]===p)return void _._listeners.splice(f,1)}}}}),this._event},enumerable:!1,configurable:!0}),h.prototype.fire=function(_,p){for(var f=[],S=0;S<this._listeners.length;S++)f.push(this._listeners[S]);for(S=0;S<f.length;S++)f[S].call(void 0,_,p)},h.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},h}();s.EventEmitter=g,s.forwardEvent=function(h,_){return h(function(p){return _.fire(p)})}},5435:function(W,s,g){var h,_=this&&this.__extends||(h=function(q,D){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,O){A.__proto__=O}||function(A,O){for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&(A[H]=O[H])},h(q,D)},function(q,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function A(){this.constructor=q}h(q,D),q.prototype=D===null?Object.create(D):(A.prototype=D.prototype,new A)});Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;var p,f=g(2584),S=g(7116),m=g(2015),n=g(844),o=g(8273),u=g(482),a=g(8437),t=g(8460),e=g(643),i=g(511),c=g(3734),l=g(2585),v=g(6242),y=g(6351),E=g(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function C(q,D){if(q>24)return D.setWinLines||!1;switch(q){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}(function(q){q[q.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",q[q.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(p=s.WindowsOptionsReportType||(s.WindowsOptionsReportType={}));var T=function(){function q(D,A,O,H){this._bufferService=D,this._coreService=A,this._logService=O,this._optionsService=H,this._data=new Uint32Array(0)}return q.prototype.hook=function(D){this._data=new Uint32Array(0)},q.prototype.put=function(D,A,O){this._data=(0,o.concat)(this._data,D.subarray(A,O))},q.prototype.unhook=function(D){if(!D)return this._data=new Uint32Array(0),!0;var A=(0,u.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),A){case'"q':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r0"q'+f.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r61;1"p'+f.C0.ESC+"\\");break;case"r":var O=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+O+f.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(f.C0.ESC+"P1$r0m"+f.C0.ESC+"\\");break;case" q":var H={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];H-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+H+" q"+f.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",A),this._coreService.triggerDataEvent(f.C0.ESC+"P0$r"+f.C0.ESC+"\\")}return!0},q}(),k=function(q){function D(A,O,H,R,Z,Q,oe,le,he){he===void 0&&(he=new m.EscapeSequenceParser);var x=q.call(this)||this;x._bufferService=A,x._charsetService=O,x._coreService=H,x._dirtyRowService=R,x._logService=Z,x._optionsService=Q,x._coreMouseService=oe,x._unicodeService=le,x._parser=he,x._parseBuffer=new Uint32Array(4096),x._stringDecoder=new u.StringToUtf32,x._utf8Decoder=new u.Utf8ToUtf32,x._workCell=new i.CellData,x._windowTitle="",x._iconName="",x._windowTitleStack=[],x._iconNameStack=[],x._curAttrData=a.DEFAULT_ATTR_DATA.clone(),x._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),x._onRequestBell=new t.EventEmitter,x._onRequestRefreshRows=new t.EventEmitter,x._onRequestReset=new t.EventEmitter,x._onRequestSendFocus=new t.EventEmitter,x._onRequestSyncScrollBar=new t.EventEmitter,x._onRequestWindowsOptionsReport=new t.EventEmitter,x._onA11yChar=new t.EventEmitter,x._onA11yTab=new t.EventEmitter,x._onCursorMove=new t.EventEmitter,x._onLineFeed=new t.EventEmitter,x._onScroll=new t.EventEmitter,x._onTitleChange=new t.EventEmitter,x._onColor=new t.EventEmitter,x._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},x._specialColors=[256,257,258],x.register(x._parser),x._activeBuffer=x._bufferService.buffer,x.register(x._bufferService.buffers.onBufferActivate(function(j){return x._activeBuffer=j.activeBuffer})),x._parser.setCsiHandlerFallback(function(j,Y){x._logService.debug("Unknown CSI code: ",{identifier:x._parser.identToString(j),params:Y.toArray()})}),x._parser.setEscHandlerFallback(function(j){x._logService.debug("Unknown ESC code: ",{identifier:x._parser.identToString(j)})}),x._parser.setExecuteHandlerFallback(function(j){x._logService.debug("Unknown EXECUTE code: ",{code:j})}),x._parser.setOscHandlerFallback(function(j,Y,se){x._logService.debug("Unknown OSC code: ",{identifier:j,action:Y,data:se})}),x._parser.setDcsHandlerFallback(function(j,Y,se){Y==="HOOK"&&(se=se.toArray()),x._logService.debug("Unknown DCS code: ",{identifier:x._parser.identToString(j),action:Y,payload:se})}),x._parser.setPrintHandler(function(j,Y,se){return x.print(j,Y,se)}),x._parser.registerCsiHandler({final:"@"},function(j){return x.insertChars(j)}),x._parser.registerCsiHandler({intermediates:" ",final:"@"},function(j){return x.scrollLeft(j)}),x._parser.registerCsiHandler({final:"A"},function(j){return x.cursorUp(j)}),x._parser.registerCsiHandler({intermediates:" ",final:"A"},function(j){return x.scrollRight(j)}),x._parser.registerCsiHandler({final:"B"},function(j){return x.cursorDown(j)}),x._parser.registerCsiHandler({final:"C"},function(j){return x.cursorForward(j)}),x._parser.registerCsiHandler({final:"D"},function(j){return x.cursorBackward(j)}),x._parser.registerCsiHandler({final:"E"},function(j){return x.cursorNextLine(j)}),x._parser.registerCsiHandler({final:"F"},function(j){return x.cursorPrecedingLine(j)}),x._parser.registerCsiHandler({final:"G"},function(j){return x.cursorCharAbsolute(j)}),x._parser.registerCsiHandler({final:"H"},function(j){return x.cursorPosition(j)}),x._parser.registerCsiHandler({final:"I"},function(j){return x.cursorForwardTab(j)}),x._parser.registerCsiHandler({final:"J"},function(j){return x.eraseInDisplay(j)}),x._parser.registerCsiHandler({prefix:"?",final:"J"},function(j){return x.eraseInDisplay(j)}),x._parser.registerCsiHandler({final:"K"},function(j){return x.eraseInLine(j)}),x._parser.registerCsiHandler({prefix:"?",final:"K"},function(j){return x.eraseInLine(j)}),x._parser.registerCsiHandler({final:"L"},function(j){return x.insertLines(j)}),x._parser.registerCsiHandler({final:"M"},function(j){return x.deleteLines(j)}),x._parser.registerCsiHandler({final:"P"},function(j){return x.deleteChars(j)}),x._parser.registerCsiHandler({final:"S"},function(j){return x.scrollUp(j)}),x._parser.registerCsiHandler({final:"T"},function(j){return x.scrollDown(j)}),x._parser.registerCsiHandler({final:"X"},function(j){return x.eraseChars(j)}),x._parser.registerCsiHandler({final:"Z"},function(j){return x.cursorBackwardTab(j)}),x._parser.registerCsiHandler({final:"`"},function(j){return x.charPosAbsolute(j)}),x._parser.registerCsiHandler({final:"a"},function(j){return x.hPositionRelative(j)}),x._parser.registerCsiHandler({final:"b"},function(j){return x.repeatPrecedingCharacter(j)}),x._parser.registerCsiHandler({final:"c"},function(j){return x.sendDeviceAttributesPrimary(j)}),x._parser.registerCsiHandler({prefix:">",final:"c"},function(j){return x.sendDeviceAttributesSecondary(j)}),x._parser.registerCsiHandler({final:"d"},function(j){return x.linePosAbsolute(j)}),x._parser.registerCsiHandler({final:"e"},function(j){return x.vPositionRelative(j)}),x._parser.registerCsiHandler({final:"f"},function(j){return x.hVPosition(j)}),x._parser.registerCsiHandler({final:"g"},function(j){return x.tabClear(j)}),x._parser.registerCsiHandler({final:"h"},function(j){return x.setMode(j)}),x._parser.registerCsiHandler({prefix:"?",final:"h"},function(j){return x.setModePrivate(j)}),x._parser.registerCsiHandler({final:"l"},function(j){return x.resetMode(j)}),x._parser.registerCsiHandler({prefix:"?",final:"l"},function(j){return x.resetModePrivate(j)}),x._parser.registerCsiHandler({final:"m"},function(j){return x.charAttributes(j)}),x._parser.registerCsiHandler({final:"n"},function(j){return x.deviceStatus(j)}),x._parser.registerCsiHandler({prefix:"?",final:"n"},function(j){return x.deviceStatusPrivate(j)}),x._parser.registerCsiHandler({intermediates:"!",final:"p"},function(j){return x.softReset(j)}),x._parser.registerCsiHandler({intermediates:" ",final:"q"},function(j){return x.setCursorStyle(j)}),x._parser.registerCsiHandler({final:"r"},function(j){return x.setScrollRegion(j)}),x._parser.registerCsiHandler({final:"s"},function(j){return x.saveCursor(j)}),x._parser.registerCsiHandler({final:"t"},function(j){return x.windowOptions(j)}),x._parser.registerCsiHandler({final:"u"},function(j){return x.restoreCursor(j)}),x._parser.registerCsiHandler({intermediates:"'",final:"}"},function(j){return x.insertColumns(j)}),x._parser.registerCsiHandler({intermediates:"'",final:"~"},function(j){return x.deleteColumns(j)}),x._parser.setExecuteHandler(f.C0.BEL,function(){return x.bell()}),x._parser.setExecuteHandler(f.C0.LF,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.VT,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.FF,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.CR,function(){return x.carriageReturn()}),x._parser.setExecuteHandler(f.C0.BS,function(){return x.backspace()}),x._parser.setExecuteHandler(f.C0.HT,function(){return x.tab()}),x._parser.setExecuteHandler(f.C0.SO,function(){return x.shiftOut()}),x._parser.setExecuteHandler(f.C0.SI,function(){return x.shiftIn()}),x._parser.setExecuteHandler(f.C1.IND,function(){return x.index()}),x._parser.setExecuteHandler(f.C1.NEL,function(){return x.nextLine()}),x._parser.setExecuteHandler(f.C1.HTS,function(){return x.tabSet()}),x._parser.registerOscHandler(0,new v.OscHandler(function(j){return x.setTitle(j),x.setIconName(j),!0})),x._parser.registerOscHandler(1,new v.OscHandler(function(j){return x.setIconName(j)})),x._parser.registerOscHandler(2,new v.OscHandler(function(j){return x.setTitle(j)})),x._parser.registerOscHandler(4,new v.OscHandler(function(j){return x.setOrReportIndexedColor(j)})),x._parser.registerOscHandler(10,new v.OscHandler(function(j){return x.setOrReportFgColor(j)})),x._parser.registerOscHandler(11,new v.OscHandler(function(j){return x.setOrReportBgColor(j)})),x._parser.registerOscHandler(12,new v.OscHandler(function(j){return x.setOrReportCursorColor(j)})),x._parser.registerOscHandler(104,new v.OscHandler(function(j){return x.restoreIndexedColor(j)})),x._parser.registerOscHandler(110,new v.OscHandler(function(j){return x.restoreFgColor(j)})),x._parser.registerOscHandler(111,new v.OscHandler(function(j){return x.restoreBgColor(j)})),x._parser.registerOscHandler(112,new v.OscHandler(function(j){return x.restoreCursorColor(j)})),x._parser.registerEscHandler({final:"7"},function(){return x.saveCursor()}),x._parser.registerEscHandler({final:"8"},function(){return x.restoreCursor()}),x._parser.registerEscHandler({final:"D"},function(){return x.index()}),x._parser.registerEscHandler({final:"E"},function(){return x.nextLine()}),x._parser.registerEscHandler({final:"H"},function(){return x.tabSet()}),x._parser.registerEscHandler({final:"M"},function(){return x.reverseIndex()}),x._parser.registerEscHandler({final:"="},function(){return x.keypadApplicationMode()}),x._parser.registerEscHandler({final:">"},function(){return x.keypadNumericMode()}),x._parser.registerEscHandler({final:"c"},function(){return x.fullReset()}),x._parser.registerEscHandler({final:"n"},function(){return x.setgLevel(2)}),x._parser.registerEscHandler({final:"o"},function(){return x.setgLevel(3)}),x._parser.registerEscHandler({final:"|"},function(){return x.setgLevel(3)}),x._parser.registerEscHandler({final:"}"},function(){return x.setgLevel(2)}),x._parser.registerEscHandler({final:"~"},function(){return x.setgLevel(1)}),x._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return x.selectDefaultCharset()}),x._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return x.selectDefaultCharset()});var B=function(j){I._parser.registerEscHandler({intermediates:"(",final:j},function(){return x.selectCharset("("+j)}),I._parser.registerEscHandler({intermediates:")",final:j},function(){return x.selectCharset(")"+j)}),I._parser.registerEscHandler({intermediates:"*",final:j},function(){return x.selectCharset("*"+j)}),I._parser.registerEscHandler({intermediates:"+",final:j},function(){return x.selectCharset("+"+j)}),I._parser.registerEscHandler({intermediates:"-",final:j},function(){return x.selectCharset("-"+j)}),I._parser.registerEscHandler({intermediates:".",final:j},function(){return x.selectCharset("."+j)}),I._parser.registerEscHandler({intermediates:"/",final:j},function(){return x.selectCharset("/"+j)})},I=this;for(var X in S.CHARSETS)B(X);return x._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return x.screenAlignmentPattern()}),x._parser.setErrorHandler(function(j){return x._logService.error("Parsing error: ",j),j}),x._parser.registerDcsHandler({intermediates:"$",final:"q"},new T(x._bufferService,x._coreService,x._logService,x._optionsService)),x}return _(D,q),Object.defineProperty(D.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),D.prototype.dispose=function(){q.prototype.dispose.call(this)},D.prototype._preserveStack=function(A,O,H,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=H,this._parseStack.position=R},D.prototype._logSlowResolvingAsync=function(A){this._logService.logLevel<=l.LogLevelEnum.WARN&&Promise.race([A,new Promise(function(O,H){return setTimeout(function(){return H("#SLOW_TIMEOUT")},5e3)})]).catch(function(O){if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")})},D.prototype.parse=function(A,O){var H,R=this._activeBuffer.x,Z=this._activeBuffer.y,Q=0,oe=this._parseStack.paused;if(oe){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(H),H;R=this._parseStack.cursorStartX,Z=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>b&&(Q=this._parseStack.position+b)}if(this._logService.logLevel<=l.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?' "'+A+'"':""),typeof A=="string"?A.split("").map(function(B){return B.charCodeAt(0)}):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(A.length,b))),oe||this._dirtyRowService.clearRange(),A.length>b)for(var le=Q;le<A.length;le+=b){var he=le+b<A.length?le+b:A.length,x=typeof A=="string"?this._stringDecoder.decode(A.substring(le,he),this._parseBuffer):this._utf8Decoder.decode(A.subarray(le,he),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,x))return this._preserveStack(R,Z,x,le),this._logSlowResolvingAsync(H),H}else if(!oe&&(x=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer),H=this._parser.parse(this._parseBuffer,x)))return this._preserveStack(R,Z,x,0),this._logSlowResolvingAsync(H),H;this._activeBuffer.x===R&&this._activeBuffer.y===Z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},D.prototype.print=function(A,O,H){var R,Z,Q=this._charsetService.charset,oe=this._optionsService.options.screenReaderMode,le=this._bufferService.cols,he=this._coreService.decPrivateModes.wraparound,x=this._coreService.modes.insertMode,B=this._curAttrData,I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-O>0&&I.getWidth(this._activeBuffer.x-1)===2&&I.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(var X=O;X<H;++X){if(R=A[X],Z=this._unicodeService.wcwidth(R),R<127&&Q){var j=Q[String.fromCharCode(R)];j&&(R=j.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,u.stringFromCodePoint)(R)),Z||!this._activeBuffer.x){if(this._activeBuffer.x+Z-1>=le){if(he){for(;this._activeBuffer.x<le;)I.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=le-1,Z===2)continue}if(x&&(I.insertCells(this._activeBuffer.x,Z,this._activeBuffer.getNullCell(B),B),I.getWidth(le-1)===2&&I.setCellFromCodePoint(le-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),I.setCellFromCodePoint(this._activeBuffer.x++,R,Z,B.fg,B.bg,B.extended),Z>0)for(;--Z;)I.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else I.getWidth(this._activeBuffer.x-1)?I.addCodepointToCell(this._activeBuffer.x-1,R):I.addCodepointToCell(this._activeBuffer.x-2,R)}H-O>0&&(I.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<le&&H-O>0&&I.getWidth(this._activeBuffer.x)===0&&!I.hasContent(this._activeBuffer.x)&&I.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},D.prototype.registerCsiHandler=function(A,O){var H=this;return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,O):this._parser.registerCsiHandler(A,function(R){return!C(R.params[0],H._optionsService.options.windowOptions)||O(R)})},D.prototype.registerDcsHandler=function(A,O){return this._parser.registerDcsHandler(A,new y.DcsHandler(O))},D.prototype.registerEscHandler=function(A,O){return this._parser.registerEscHandler(A,O)},D.prototype.registerOscHandler=function(A,O){return this._parser.registerOscHandler(A,new v.OscHandler(O))},D.prototype.bell=function(){return this._onRequestBell.fire(),!0},D.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},D.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},D.prototype.backspace=function(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0?void 0:A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},D.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0},D.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},D.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},D.prototype._restrictCursor=function(A){A===void 0&&(A=this._bufferService.cols-1),this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},D.prototype._setCursor=function(A,O){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=A,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},D.prototype._moveCursor=function(A,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+O)},D.prototype.cursorUp=function(A){var O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0},D.prototype.cursorDown=function(A){var O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0},D.prototype.cursorForward=function(A){return this._moveCursor(A.params[0]||1,0),!0},D.prototype.cursorBackward=function(A){return this._moveCursor(-(A.params[0]||1),0),!0},D.prototype.cursorNextLine=function(A){return this.cursorDown(A),this._activeBuffer.x=0,!0},D.prototype.cursorPrecedingLine=function(A){return this.cursorUp(A),this._activeBuffer.x=0,!0},D.prototype.cursorCharAbsolute=function(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0},D.prototype.cursorPosition=function(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0},D.prototype.charPosAbsolute=function(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0},D.prototype.hPositionRelative=function(A){return this._moveCursor(A.params[0]||1,0),!0},D.prototype.linePosAbsolute=function(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0},D.prototype.vPositionRelative=function(A){return this._moveCursor(0,A.params[0]||1),!0},D.prototype.hVPosition=function(A){return this.cursorPosition(A),!0},D.prototype.tabClear=function(A){var O=A.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0},D.prototype.cursorForwardTab=function(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var O=A.params[0]||1;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},D.prototype.cursorBackwardTab=function(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var O=A.params[0]||1;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},D.prototype._eraseInBufferLine=function(A,O,H,R){R===void 0&&(R=!1);var Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);Z.replaceCells(O,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R&&(Z.isWrapped=!1)},D.prototype._resetBufferLine=function(A){var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);O.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1},D.prototype.eraseInDisplay=function(A){var O;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowService.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);O<this._bufferService.rows;O++)this._resetBufferLine(O);this._dirtyRowService.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowService.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O);this._dirtyRowService.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowService.markDirty(O-1);O--;)this._resetBufferLine(O);this._dirtyRowService.markDirty(0);break;case 3:var H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0},D.prototype.eraseInLine=function(A){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},D.prototype.insertLines=function(A){this._restrictCursor();var O=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=this._activeBuffer.ybase+this._activeBuffer.y,R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Z=this._bufferService.rows-1+this._activeBuffer.ybase-R+1;O--;)this._activeBuffer.lines.splice(Z-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},D.prototype.deleteLines=function(A){this._restrictCursor();var O=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var H,R=this._activeBuffer.ybase+this._activeBuffer.y;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;O--;)this._activeBuffer.lines.splice(R,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},D.prototype.insertChars=function(A){this._restrictCursor();var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},D.prototype.deleteChars=function(A){this._restrictCursor();var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},D.prototype.scrollUp=function(A){for(var O=A.params[0]||1;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},D.prototype.scrollDown=function(A){for(var O=A.params[0]||1;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},D.prototype.scrollLeft=function(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=A.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var R=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);R.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},D.prototype.scrollRight=function(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=A.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var R=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);R.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},D.prototype.insertColumns=function(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=A.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var R=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);R.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},D.prototype.deleteColumns=function(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=A.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var R=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);R.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},D.prototype.eraseChars=function(A){this._restrictCursor();var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},D.prototype.repeatPrecedingCharacter=function(A){if(!this._parser.precedingCodepoint)return!0;for(var O=A.params[0]||1,H=new Uint32Array(O),R=0;R<O;++R)H[R]=this._parser.precedingCodepoint;return this.print(H,0,H.length),!0},D.prototype.sendDeviceAttributesPrimary=function(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0},D.prototype.sendDeviceAttributesSecondary=function(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0},D.prototype._is=function(A){return(this._optionsService.options.termName+"").indexOf(A)===0},D.prototype.setMode=function(A){for(var O=0;O<A.length;O++)A.params[O]===4&&(this._coreService.modes.insertMode=!0);return!0},D.prototype.setModePrivate=function(A){for(var O=0;O<A.length;O++)switch(A.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),this._charsetService.setgCharset(1,S.DEFAULT_CHARSET),this._charsetService.setgCharset(2,S.DEFAULT_CHARSET),this._charsetService.setgCharset(3,S.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},D.prototype.resetMode=function(A){for(var O=0;O<A.length;O++)A.params[O]===4&&(this._coreService.modes.insertMode=!1);return!0},D.prototype.resetModePrivate=function(A){for(var O=0;O<A.length;O++)switch(A.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},D.prototype._updateAttrColor=function(A,O,H,R,Z){return O===2?(A|=50331648,A&=-16777216,A|=c.AttributeData.fromColorRGB([H,R,Z])):O===5&&(A&=-50331904,A|=33554432|255&H),A},D.prototype._extractColor=function(A,O,H){var R=[0,0,-1,0,0,0],Z=0,Q=0;do{if(R[Q+Z]=A.params[O+Q],A.hasSubParams(O+Q)){var oe=A.getSubParams(O+Q),le=0;do R[1]===5&&(Z=1),R[Q+le+1+Z]=oe[le];while(++le<oe.length&&le+Q+1+Z<R.length);break}if(R[1]===5&&Q+Z>=2||R[1]===2&&Q+Z>=5)break;R[1]&&(Z=1)}while(++Q+O<A.length&&Q+Z<R.length);for(le=2;le<R.length;++le)R[le]===-1&&(R[le]=0);switch(R[0]){case 38:H.fg=this._updateAttrColor(H.fg,R[1],R[3],R[4],R[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,R[1],R[3],R[4],R[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,R[1],R[3],R[4],R[5])}return Q},D.prototype._processUnderline=function(A,O){O.extended=O.extended.clone(),(!~A||A>5)&&(A=1),O.extended.underlineStyle=A,O.fg|=268435456,A===0&&(O.fg&=-268435457),O.updateExtended()},D.prototype.charAttributes=function(A){if(A.length===1&&A.params[0]===0)return this._curAttrData.fg=a.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=a.DEFAULT_ATTR_DATA.bg,!0;for(var O,H=A.length,R=this._curAttrData,Z=0;Z<H;Z++)(O=A.params[Z])>=30&&O<=37?(R.fg&=-50331904,R.fg|=16777216|O-30):O>=40&&O<=47?(R.bg&=-50331904,R.bg|=16777216|O-40):O>=90&&O<=97?(R.fg&=-50331904,R.fg|=16777224|O-90):O>=100&&O<=107?(R.bg&=-50331904,R.bg|=16777224|O-100):O===0?(R.fg=a.DEFAULT_ATTR_DATA.fg,R.bg=a.DEFAULT_ATTR_DATA.bg):O===1?R.fg|=134217728:O===3?R.bg|=67108864:O===4?(R.fg|=268435456,this._processUnderline(A.hasSubParams(Z)?A.getSubParams(Z)[0]:1,R)):O===5?R.fg|=536870912:O===7?R.fg|=67108864:O===8?R.fg|=1073741824:O===9?R.fg|=2147483648:O===2?R.bg|=134217728:O===21?this._processUnderline(2,R):O===22?(R.fg&=-134217729,R.bg&=-134217729):O===23?R.bg&=-67108865:O===24?R.fg&=-268435457:O===25?R.fg&=-536870913:O===27?R.fg&=-67108865:O===28?R.fg&=-1073741825:O===29?R.fg&=2147483647:O===39?(R.fg&=-67108864,R.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):O===49?(R.bg&=-67108864,R.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?Z+=this._extractColor(A,Z,R):O===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):O===100?(R.fg&=-67108864,R.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0},D.prototype.deviceStatus=function(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(f.C0.ESC+"[0n");break;case 6:var O=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(f.C0.ESC+"["+O+";"+H+"R")}return!0},D.prototype.deviceStatusPrivate=function(A){if(A.params[0]===6){var O=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(f.C0.ESC+"[?"+O+";"+H+"R")}return!0},D.prototype.softReset=function(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},D.prototype.setCursorStyle=function(A){var O=A.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var H=O%2==1;return this._optionsService.options.cursorBlink=H,!0},D.prototype.setScrollRegion=function(A){var O,H=A.params[0]||1;return(A.length<2||(O=A.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0},D.prototype.windowOptions=function(A){if(!C(A.params[0],this._optionsService.options.windowOptions))return!0;var O=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(p.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(p.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(f.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},D.prototype.saveCursor=function(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},D.prototype.restoreCursor=function(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},D.prototype.setTitle=function(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0},D.prototype.setIconName=function(A){return this._iconName=A,!0},D.prototype.setOrReportIndexedColor=function(A){for(var O=[],H=A.split(";");H.length>1;){var R=H.shift(),Z=H.shift();if(/^\d+$/.exec(R)){var Q=parseInt(R);if(0<=Q&&Q<256)if(Z==="?")O.push({type:0,index:Q});else{var oe=(0,E.parseColor)(Z);oe&&O.push({type:1,index:Q,color:oe})}}}return O.length&&this._onColor.fire(O),!0},D.prototype._setOrReportSpecialColor=function(A,O){for(var H=A.split(";"),R=0;R<H.length&&!(O>=this._specialColors.length);++R,++O)if(H[R]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{var Z=(0,E.parseColor)(H[R]);Z&&this._onColor.fire([{type:1,index:this._specialColors[O],color:Z}])}return!0},D.prototype.setOrReportFgColor=function(A){return this._setOrReportSpecialColor(A,0)},D.prototype.setOrReportBgColor=function(A){return this._setOrReportSpecialColor(A,1)},D.prototype.setOrReportCursorColor=function(A){return this._setOrReportSpecialColor(A,2)},D.prototype.restoreIndexedColor=function(A){if(!A)return this._onColor.fire([{type:2}]),!0;for(var O=[],H=A.split(";"),R=0;R<H.length;++R)if(/^\d+$/.exec(H[R])){var Z=parseInt(H[R]);0<=Z&&Z<256&&O.push({type:2,index:Z})}return O.length&&this._onColor.fire(O),!0},D.prototype.restoreFgColor=function(A){return this._onColor.fire([{type:2,index:256}]),!0},D.prototype.restoreBgColor=function(A){return this._onColor.fire([{type:2,index:257}]),!0},D.prototype.restoreCursorColor=function(A){return this._onColor.fire([{type:2,index:258}]),!0},D.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},D.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},D.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},D.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),!0},D.prototype.selectCharset=function(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(w[A[0]],S.CHARSETS[A[1]]||S.DEFAULT_CHARSET),!0)},D.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},D.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},D.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},D.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},D.prototype.reset=function(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()},D.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},D.prototype.setgLevel=function(A){return this._charsetService.setgLevel(A),!0},D.prototype.screenAlignmentPattern=function(){var A=new i.CellData;A.content=1<<22|"E".charCodeAt(0),A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(var O=0;O<this._bufferService.rows;++O){var H=this._activeBuffer.ybase+this._activeBuffer.y+O,R=this._activeBuffer.lines.get(H);R&&(R.fill(A),R.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},D}(n.Disposable);s.InputHandler=k},844:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.Disposable=void 0;var g=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var p=0,f=this._disposables;p<f.length;p++)f[p].dispose();this._disposables.length=0},_.prototype.register=function(p){return this._disposables.push(p),p},_.prototype.unregister=function(p){var f=this._disposables.indexOf(p);f!==-1&&this._disposables.splice(f,1)},_}();function h(_){for(var p=0,f=_;p<f.length;p++)f[p].dispose();_.length=0}s.Disposable=g,s.disposeArray=h,s.getDisposeArrayDisposable=function(_){return{dispose:function(){return h(_)}}}},6114:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.isSafari=s.isFirefox=void 0;var g=typeof navigator=="undefined",h=g?"node":navigator.userAgent,_=g?"node":navigator.platform;s.isFirefox=h.includes("Firefox"),s.isSafari=/^((?!chrome|android).)*safari/i.test(h),s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),s.isIpad=_==="iPad",s.isIphone=_==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),s.isLinux=_.indexOf("Linux")>=0},8273:(W,s)=>{function g(h,_,p,f){if(p===void 0&&(p=0),f===void 0&&(f=h.length),p>=h.length)return h;p=(h.length+p)%h.length,f=f>=h.length?h.length:(h.length+f)%h.length;for(var S=p;S<f;++S)h[S]=_;return h}Object.defineProperty(s,"__esModule",{value:!0}),s.concat=s.fillFallback=s.fill=void 0,s.fill=function(h,_,p,f){return h.fill?h.fill(_,p,f):g(h,_,p,f)},s.fillFallback=g,s.concat=function(h,_){var p=new h.constructor(h.length+_.length);return p.set(h),p.set(_,h.length),p}},9282:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;var h=g(643);s.updateWindowsModeWrappedState=function(_){var p=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),f=p==null?void 0:p.get(_.cols-1),S=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);S&&f&&(S.isWrapped=f[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&f[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;var g=function(){function _(){this.fg=0,this.bg=0,this.extended=new h}return _.toColorRGB=function(p){return[p>>>16&255,p>>>8&255,255&p]},_.fromColorRGB=function(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]},_.prototype.clone=function(){var p=new _;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();s.AttributeData=g;var h=function(){function _(p,f){p===void 0&&(p=0),f===void 0&&(f=-1),this.underlineStyle=p,this.underlineColor=f}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();s.ExtendedAttrs=h},9092:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferStringIterator=s.Buffer=s.MAX_BUFFER_SIZE=void 0;var h=g(6349),_=g(8437),p=g(511),f=g(643),S=g(4634),m=g(4863),n=g(7116),o=g(3734);s.MAX_BUFFER_SIZE=4294967295;var u=function(){function t(e,i,c){this._hasScrollback=e,this._optionsService=i,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=n.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,i){return new _.BufferLine(this._bufferService.cols,this.getNullCell(e),i)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var i=e+this._optionsService.options.scrollback;return i>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:i},t.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=_.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,i){var c=this.getNullCell(_.DEFAULT_ATTR_DATA),l=this._getCorrectBufferLength(i);if(l>this.lines.maxLength&&(this.lines.maxLength=l),this.lines.length>0){if(this._cols<e)for(var v=0;v<this.lines.length;v++)this.lines.get(v).resize(e,c);var y=0;if(this._rows<i)for(var E=this._rows;E<i;E++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new _.BufferLine(e,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(e,c)));else for(E=this._rows;E>i;E--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(l<this.lines.maxLength){var w=this.lines.length-l;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=l}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(v=0;v<this.lines.length;v++)this.lines.get(v).resize(e,c);this._cols=e,this._rows=i},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))},t.prototype._reflowLarger=function(e,i){var c=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(c.length>0){var l=(0,S.reflowLargerCreateNewLayout)(this.lines,c);(0,S.reflowLargerApplyNewLayout)(this.lines,l.layout),this._reflowLargerAdjustViewport(e,i,l.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,i,c){for(var l=this.getNullCell(_.DEFAULT_ATTR_DATA),v=c;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new _.BufferLine(e,l))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)},t.prototype._reflowSmaller=function(e,i){for(var c=this.getNullCell(_.DEFAULT_ATTR_DATA),l=[],v=0,y=this.lines.length-1;y>=0;y--){var E=this.lines.get(y);if(!(!E||!E.isWrapped&&E.getTrimmedLength()<=e)){for(var w=[E];E.isWrapped&&y>0;)E=this.lines.get(--y),w.unshift(E);var b=this.ybase+this.y;if(!(b>=y&&b<y+w.length)){var C,T=w[w.length-1].getTrimmedLength(),k=(0,S.reflowSmallerGetNewLineLengths)(w,this._cols,e),q=k.length-w.length;C=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+q):Math.max(0,this.lines.length-this.lines.maxLength+q);for(var D=[],A=0;A<q;A++){var O=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);D.push(O)}D.length>0&&(l.push({start:y+w.length+v,newLines:D}),v+=D.length),w.push.apply(w,D);var H=k.length-1,R=k[H];R===0&&(R=k[--H]);for(var Z=w.length-q-1,Q=T;Z>=0;){var oe=Math.min(Q,R);if(w[H].copyCellsFrom(w[Z],Q-oe,R-oe,oe,!0),(R-=oe)==0&&(R=k[--H]),(Q-=oe)==0){Z--;var le=Math.max(Z,0);Q=(0,S.getWrappedLineTrimmedLength)(w,le,this._cols)}}for(A=0;A<w.length;A++)k[A]<e&&w[A].setCell(k[A],c);for(var he=q-C;he-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+q,this.ybase+i-1)}}}if(l.length>0){var x=[],B=[];for(A=0;A<this.lines.length;A++)B.push(this.lines.get(A));var I=this.lines.length,X=I-1,j=0,Y=l[j];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);var se=0;for(A=Math.min(this.lines.maxLength-1,I+v-1);A>=0;A--)if(Y&&Y.start>X+se){for(var Ce=Y.newLines.length-1;Ce>=0;Ce--)this.lines.set(A--,Y.newLines[Ce]);A++,x.push({index:X+1,amount:Y.newLines.length}),se+=Y.newLines.length,Y=l[++j]}else this.lines.set(A,B[X--]);var Me=0;for(A=x.length-1;A>=0;A--)x[A].index+=Me,this.lines.onInsertEmitter.fire(x[A]),Me+=x[A].amount;var Ae=Math.max(0,I+v-this.lines.maxLength);Ae>0&&this.lines.onTrimEmitter.fire(Ae)}},t.prototype.stringIndexToBufferIndex=function(e,i,c){for(c===void 0&&(c=!1);i;){var l=this.lines.get(e);if(!l)return[-1,-1];for(var v=c?l.getTrimmedLength():l.length,y=0;y<v;++y)if(l.get(y)[f.CHAR_DATA_WIDTH_INDEX]&&(i-=l.get(y)[f.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[e,y];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,i,c,l){c===void 0&&(c=0);var v=this.lines.get(e);return v?v.translateToString(i,c,l):""},t.prototype.getWrappedRangeForLine=function(e){for(var i=e,c=e;i>0&&this.lines.get(i).isWrapped;)i--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:i,last:c}},t.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.addMarker=function(e){var i=this,c=new m.Marker(e);return this.markers.push(c),c.register(this.lines.onTrim(function(l){c.line-=l,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(function(l){c.line>=l.index&&(c.line+=l.amount)})),c.register(this.lines.onDelete(function(l){c.line>=l.index&&c.line<l.index+l.amount&&c.dispose(),c.line>l.index&&(c.line-=l.amount)})),c.register(c.onDispose(function(){return i._removeMarker(c)})),c},t.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,i,c,l,v){return new a(this,e,i,c,l,v)},t}();s.Buffer=u;var a=function(){function t(e,i,c,l,v,y){c===void 0&&(c=0),l===void 0&&(l=e.lines.length),v===void 0&&(v=0),y===void 0&&(y=0),this._buffer=e,this._trimRight=i,this._startIndex=c,this._endIndex=l,this._startOverscan=v,this._endOverscan=y,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var i="",c=e.first;c<=e.last;++c)i+=this._buffer.translateBufferLineToString(c,this._trimRight);return this._current=e.last+1,{range:e,content:i}},t}();s.BufferStringIterator=a},8437:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;var h=g(482),_=g(643),p=g(511),f=g(3734);s.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);var S=function(){function m(n,o,u){u===void 0&&(u=!1),this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);for(var a=o||p.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),t=0;t<n;++t)this.setCell(t,a);this.length=n}return m.prototype.get=function(n){var o=this._data[3*n+0],u=2097151&o;return[this._data[3*n+1],2097152&o?this._combined[n]:u?(0,h.stringFromCodePoint)(u):"",o>>22,2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):u]},m.prototype.set=function(n,o){this._data[3*n+1]=o[_.CHAR_DATA_ATTR_INDEX],o[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=o[1],this._data[3*n+0]=2097152|n|o[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=o[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[_.CHAR_DATA_WIDTH_INDEX]<<22},m.prototype.getWidth=function(n){return this._data[3*n+0]>>22},m.prototype.hasWidth=function(n){return 12582912&this._data[3*n+0]},m.prototype.getFg=function(n){return this._data[3*n+1]},m.prototype.getBg=function(n){return this._data[3*n+2]},m.prototype.hasContent=function(n){return 4194303&this._data[3*n+0]},m.prototype.getCodePoint=function(n){var o=this._data[3*n+0];return 2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&o},m.prototype.isCombined=function(n){return 2097152&this._data[3*n+0]},m.prototype.getString=function(n){var o=this._data[3*n+0];return 2097152&o?this._combined[n]:2097151&o?(0,h.stringFromCodePoint)(2097151&o):""},m.prototype.loadCell=function(n,o){var u=3*n;return o.content=this._data[u+0],o.fg=this._data[u+1],o.bg=this._data[u+2],2097152&o.content&&(o.combinedData=this._combined[n]),268435456&o.bg&&(o.extended=this._extendedAttrs[n]),o},m.prototype.setCell=function(n,o){2097152&o.content&&(this._combined[n]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=o.content,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg},m.prototype.setCellFromCodePoint=function(n,o,u,a,t,e){268435456&t&&(this._extendedAttrs[n]=e),this._data[3*n+0]=o|u<<22,this._data[3*n+1]=a,this._data[3*n+2]=t},m.prototype.addCodepointToCell=function(n,o){var u=this._data[3*n+0];2097152&u?this._combined[n]+=(0,h.stringFromCodePoint)(o):(2097151&u?(this._combined[n]=(0,h.stringFromCodePoint)(2097151&u)+(0,h.stringFromCodePoint)(o),u&=-2097152,u|=2097152):u=o|1<<22,this._data[3*n+0]=u)},m.prototype.insertCells=function(n,o,u,a){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new f.ExtendedAttrs),o<this.length-n){for(var t=new p.CellData,e=this.length-n-o-1;e>=0;--e)this.setCell(n+o+e,this.loadCell(n+e,t));for(e=0;e<o;++e)this.setCell(n+e,u)}else for(e=n;e<this.length;++e)this.setCell(e,u);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new f.ExtendedAttrs)},m.prototype.deleteCells=function(n,o,u,a){if(n%=this.length,o<this.length-n){for(var t=new p.CellData,e=0;e<this.length-n-o;++e)this.setCell(n+e,this.loadCell(n+o+e,t));for(e=this.length-o;e<this.length;++e)this.setCell(e,u)}else for(e=n;e<this.length;++e)this.setCell(e,u);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new f.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new f.ExtendedAttrs)},m.prototype.replaceCells=function(n,o,u,a){for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new f.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new f.ExtendedAttrs);n<o&&n<this.length;)this.setCell(n++,u)},m.prototype.resize=function(n,o){if(n!==this.length){if(n>this.length){var u=new Uint32Array(3*n);this.length&&(3*n<this._data.length?u.set(this._data.subarray(0,3*n)):u.set(this._data)),this._data=u;for(var a=this.length;a<n;++a)this.setCell(a,o)}else if(n){(u=new Uint32Array(3*n)).set(this._data.subarray(0,3*n)),this._data=u;var t=Object.keys(this._combined);for(a=0;a<t.length;a++){var e=parseInt(t[a],10);e>=n&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=n}},m.prototype.fill=function(n){this._combined={},this._extendedAttrs={};for(var o=0;o<this.length;++o)this.setCell(o,n)},m.prototype.copyFrom=function(n){for(var o in this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={},n._combined)this._combined[o]=n._combined[o];for(var o in this._extendedAttrs={},n._extendedAttrs)this._extendedAttrs[o]=n._extendedAttrs[o];this.isWrapped=n.isWrapped},m.prototype.clone=function(){var n=new m(0);for(var o in n._data=new Uint32Array(this._data),n.length=this.length,this._combined)n._combined[o]=this._combined[o];for(var o in this._extendedAttrs)n._extendedAttrs[o]=this._extendedAttrs[o];return n.isWrapped=this.isWrapped,n},m.prototype.getTrimmedLength=function(){for(var n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0},m.prototype.copyCellsFrom=function(n,o,u,a,t){var e=n._data;if(t)for(var i=a-1;i>=0;i--)for(var c=0;c<3;c++)this._data[3*(u+i)+c]=e[3*(o+i)+c];else for(i=0;i<a;i++)for(c=0;c<3;c++)this._data[3*(u+i)+c]=e[3*(o+i)+c];var l=Object.keys(n._combined);for(c=0;c<l.length;c++){var v=parseInt(l[c],10);v>=o&&(this._combined[v-o+u]=n._combined[v])}},m.prototype.translateToString=function(n,o,u){n===void 0&&(n=!1),o===void 0&&(o=0),u===void 0&&(u=this.length),n&&(u=Math.min(u,this.getTrimmedLength()));for(var a="";o<u;){var t=this._data[3*o+0],e=2097151&t;a+=2097152&t?this._combined[o]:e?(0,h.stringFromCodePoint)(e):_.WHITESPACE_CELL_CHAR,o+=t>>22||1}return a},m}();s.BufferLine=S},4841:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(g,h){if(g.start.y>g.end.y)throw new Error("Buffer range end ("+g.end.x+", "+g.end.y+") cannot be before start ("+g.start.x+", "+g.start.y+")");return h*(g.end.y-g.start.y)+(g.end.x-g.start.x+1)}},4634:(W,s)=>{function g(h,_,p){if(_===h.length-1)return h[_].getTrimmedLength();var f=!h[_].hasContent(p-1)&&h[_].getWidth(p-1)===1,S=h[_+1].getWidth(0)===2;return f&&S?p-1:p}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(h,_,p,f,S){for(var m=[],n=0;n<h.length-1;n++){var o=n,u=h.get(++o);if(u.isWrapped){for(var a=[h.get(n)];o<h.length&&u.isWrapped;)a.push(u),u=h.get(++o);if(f>=n&&f<o)n+=a.length-1;else{for(var t=0,e=g(a,t,_),i=1,c=0;i<a.length;){var l=g(a,i,_),v=l-c,y=p-e,E=Math.min(v,y);a[t].copyCellsFrom(a[i],c,e,E,!1),(e+=E)===p&&(t++,e=0),(c+=E)===l&&(i++,c=0),e===0&&t!==0&&a[t-1].getWidth(p-1)===2&&(a[t].copyCellsFrom(a[t-1],p-1,e++,1,!1),a[t-1].setCell(p-1,S))}a[t].replaceCells(e,p,S);for(var w=0,b=a.length-1;b>0&&(b>t||a[b].getTrimmedLength()===0);b--)w++;w>0&&(m.push(n+a.length-w),m.push(w)),n+=a.length-1}}}return m},s.reflowLargerCreateNewLayout=function(h,_){for(var p=[],f=0,S=_[f],m=0,n=0;n<h.length;n++)if(S===n){var o=_[++f];h.onDeleteEmitter.fire({index:n-m,amount:o}),n+=o-1,m+=o,S=_[++f]}else p.push(n);return{layout:p,countRemoved:m}},s.reflowLargerApplyNewLayout=function(h,_){for(var p=[],f=0;f<_.length;f++)p.push(h.get(_[f]));for(f=0;f<p.length;f++)h.set(f,p[f]);h.length=_.length},s.reflowSmallerGetNewLineLengths=function(h,_,p){for(var f=[],S=h.map(function(e,i){return g(h,i,_)}).reduce(function(e,i){return e+i}),m=0,n=0,o=0;o<S;){if(S-o<p){f.push(S-o);break}m+=p;var u=g(h,n,_);m>u&&(m-=u,n++);var a=h[n].getWidth(m-1)===2;a&&m--;var t=a?p-1:p;f.push(t),o+=t}return f},s.getWrappedLineTrimmedLength=g},5295:function(W,s,g){var h,_=this&&this.__extends||(h=function(m,n){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&(o[a]=u[a])},h(m,n)},function(m,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=m}h(m,n),m.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;var p=g(9092),f=g(8460),S=function(m){function n(o,u){var a=m.call(this)||this;return a._optionsService=o,a._bufferService=u,a._onBufferActivate=a.register(new f.EventEmitter),a.reset(),a}return _(n,m),Object.defineProperty(n.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(n.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),n.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},n.prototype.activateAltBuffer=function(o){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(o),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},n.prototype.resize=function(o,u){this._normal.resize(o,u),this._alt.resize(o,u)},n.prototype.setupTabStops=function(o){this._normal.setupTabStops(o),this._alt.setupTabStops(o)},n}(g(844).Disposable);s.BufferSet=S},511:function(W,s,g){var h,_=this&&this.__extends||(h=function(n,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(u[t]=a[t])},h(n,o)},function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function u(){this.constructor=n}h(n,o),n.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;var p=g(482),f=g(643),S=g(3734),m=function(n){function o(){var u=n!==null&&n.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.extended=new S.ExtendedAttrs,u.combinedData="",u}return _(o,n),o.fromCharData=function(u){var a=new o;return a.setFromCharData(u),a},o.prototype.isCombined=function(){return 2097152&this.content},o.prototype.getWidth=function(){return this.content>>22},o.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""},o.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},o.prototype.setFromCharData=function(u){this.fg=u[f.CHAR_DATA_ATTR_INDEX],this.bg=0;var a=!1;if(u[f.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(u[f.CHAR_DATA_CHAR_INDEX].length===2){var t=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|u[f.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[f.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=u[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|u[f.CHAR_DATA_WIDTH_INDEX]<<22)},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(S.AttributeData);s.CellData=m},643:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=256,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:function(W,s,g){var h,_=this&&this.__extends||(h=function(S,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(n[u]=o[u])},h(S,m)},function(S,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function n(){this.constructor=S}h(S,m),S.prototype=m===null?Object.create(m):(n.prototype=m.prototype,new n)});Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;var p=g(8460),f=function(S){function m(n){var o=S.call(this)||this;return o.line=n,o._id=m._nextId++,o.isDisposed=!1,o._onDispose=new p.EventEmitter,o}return _(m,S),Object.defineProperty(m.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),S.prototype.dispose.call(this))},m._nextId=1,m}(g(844).Disposable);s.Marker=f},7116:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(W,s)=>{var g,h;Object.defineProperty(s,"__esModule",{value:!0}),s.C1=s.C0=void 0,(h=s.C0||(s.C0={})).NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL="\x7F",(g=s.C1||(s.C1={})).PAD="\x80",g.HOP="\x81",g.BPH="\x82",g.NBH="\x83",g.IND="\x84",g.NEL="\x85",g.SSA="\x86",g.ESA="\x87",g.HTS="\x88",g.HTJ="\x89",g.VTS="\x8A",g.PLD="\x8B",g.PLU="\x8C",g.RI="\x8D",g.SS2="\x8E",g.SS3="\x8F",g.DCS="\x90",g.PU1="\x91",g.PU2="\x92",g.STS="\x93",g.CCH="\x94",g.MW="\x95",g.SPA="\x96",g.EPA="\x97",g.SOS="\x98",g.SGCI="\x99",g.SCI="\x9A",g.CSI="\x9B",g.ST="\x9C",g.OSC="\x9D",g.PM="\x9E",g.APC="\x9F"},7399:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;var h=g(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(p,f,S,m){var n={type:0,cancel:!1,key:void 0},o=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?n.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?n.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?n.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(n.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(p.shiftKey){n.key=h.C0.BS;break}if(p.altKey){n.key=h.C0.ESC+h.C0.DEL;break}n.key=h.C0.DEL;break;case 9:if(p.shiftKey){n.key=h.C0.ESC+"[Z";break}n.key=h.C0.HT,n.cancel=!0;break;case 13:n.key=p.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,n.cancel=!0;break;case 27:n.key=h.C0.ESC,p.altKey&&(n.key=h.C0.ESC+h.C0.ESC),n.cancel=!0;break;case 37:if(p.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"D",n.key===h.C0.ESC+"[1;3D"&&(n.key=h.C0.ESC+(S?"b":"[1;5D"))):n.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(p.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"C",n.key===h.C0.ESC+"[1;3C"&&(n.key=h.C0.ESC+(S?"f":"[1;5C"))):n.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(p.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"A",S||n.key!==h.C0.ESC+"[1;3A"||(n.key=h.C0.ESC+"[1;5A")):n.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(p.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"B",S||n.key!==h.C0.ESC+"[1;3B"||(n.key=h.C0.ESC+"[1;5B")):n.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(n.key=h.C0.ESC+"[2~");break;case 46:n.key=o?h.C0.ESC+"[3;"+(o+1)+"~":h.C0.ESC+"[3~";break;case 36:n.key=o?h.C0.ESC+"[1;"+(o+1)+"H":f?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:n.key=o?h.C0.ESC+"[1;"+(o+1)+"F":f?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:p.shiftKey?n.type=2:n.key=h.C0.ESC+"[5~";break;case 34:p.shiftKey?n.type=3:n.key=h.C0.ESC+"[6~";break;case 112:n.key=o?h.C0.ESC+"[1;"+(o+1)+"P":h.C0.ESC+"OP";break;case 113:n.key=o?h.C0.ESC+"[1;"+(o+1)+"Q":h.C0.ESC+"OQ";break;case 114:n.key=o?h.C0.ESC+"[1;"+(o+1)+"R":h.C0.ESC+"OR";break;case 115:n.key=o?h.C0.ESC+"[1;"+(o+1)+"S":h.C0.ESC+"OS";break;case 116:n.key=o?h.C0.ESC+"[15;"+(o+1)+"~":h.C0.ESC+"[15~";break;case 117:n.key=o?h.C0.ESC+"[17;"+(o+1)+"~":h.C0.ESC+"[17~";break;case 118:n.key=o?h.C0.ESC+"[18;"+(o+1)+"~":h.C0.ESC+"[18~";break;case 119:n.key=o?h.C0.ESC+"[19;"+(o+1)+"~":h.C0.ESC+"[19~";break;case 120:n.key=o?h.C0.ESC+"[20;"+(o+1)+"~":h.C0.ESC+"[20~";break;case 121:n.key=o?h.C0.ESC+"[21;"+(o+1)+"~":h.C0.ESC+"[21~";break;case 122:n.key=o?h.C0.ESC+"[23;"+(o+1)+"~":h.C0.ESC+"[23~";break;case 123:n.key=o?h.C0.ESC+"[24;"+(o+1)+"~":h.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(S&&!m||!p.altKey||p.metaKey)!S||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?n.key=p.key:p.key&&p.ctrlKey&&p.key==="_"&&(n.key=h.C0.US):p.keyCode===65&&(n.type=1);else{var u=_[p.keyCode],a=u==null?void 0:u[p.shiftKey?1:0];if(a)n.key=h.C0.ESC+a;else if(p.keyCode>=65&&p.keyCode<=90){var t=p.ctrlKey?p.keyCode-64:p.keyCode+32;n.key=h.C0.ESC+String.fromCharCode(t)}}else p.keyCode>=65&&p.keyCode<=90?n.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?n.key=h.C0.NUL:p.keyCode>=51&&p.keyCode<=55?n.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?n.key=h.C0.DEL:p.keyCode===219?n.key=h.C0.ESC:p.keyCode===220?n.key=h.C0.FS:p.keyCode===221&&(n.key=h.C0.GS)}return n}},482:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},s.utf32ToString=function(_,p,f){p===void 0&&(p=0),f===void 0&&(f=_.length);for(var S="",m=p;m<f;++m){var n=_[m];n>65535?(n-=65536,S+=String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):S+=String.fromCharCode(n)}return S};var g=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(p,f){var S=p.length;if(!S)return 0;var m=0,n=0;this._interim&&(56320<=(a=p.charCodeAt(n++))&&a<=57343?f[m++]=1024*(this._interim-55296)+a-56320+65536:(f[m++]=this._interim,f[m++]=a),this._interim=0);for(var o=n;o<S;++o){var u=p.charCodeAt(o);if(55296<=u&&u<=56319){if(++o>=S)return this._interim=u,m;var a;56320<=(a=p.charCodeAt(o))&&a<=57343?f[m++]=1024*(u-55296)+a-56320+65536:(f[m++]=u,f[m++]=a)}else u!==65279&&(f[m++]=u)}return m},_}();s.StringToUtf32=g;var h=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(p,f){var S=p.length;if(!S)return 0;var m,n,o,u,a=0,t=0,e=0;if(this.interim[0]){var i=!1,c=this.interim[0];c&=(224&c)==192?31:(240&c)==224?15:7;for(var l=0,v=void 0;(v=63&this.interim[++l])&&l<4;)c<<=6,c|=v;for(var y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=y-l;e<E;){if(e>=S)return 0;if((192&(v=p[e++]))!=128){e--,i=!0;break}this.interim[l++]=v,c<<=6,c|=63&v}i||(y===2?c<128?e--:f[a++]=c:y===3?c<2048||c>=55296&&c<=57343||c===65279||(f[a++]=c):c<65536||c>1114111||(f[a++]=c)),this.interim.fill(0)}for(var w=S-4,b=e;b<S;){for(;!(!(b<w)||128&(m=p[b])||128&(n=p[b+1])||128&(o=p[b+2])||128&(u=p[b+3]));)f[a++]=m,f[a++]=n,f[a++]=o,f[a++]=u,b+=4;if((m=p[b++])<128)f[a++]=m;else if((224&m)==192){if(b>=S)return this.interim[0]=m,a;if((192&(n=p[b++]))!=128){b--;continue}if((t=(31&m)<<6|63&n)<128){b--;continue}f[a++]=t}else if((240&m)==224){if(b>=S)return this.interim[0]=m,a;if((192&(n=p[b++]))!=128){b--;continue}if(b>=S)return this.interim[0]=m,this.interim[1]=n,a;if((192&(o=p[b++]))!=128){b--;continue}if((t=(15&m)<<12|(63&n)<<6|63&o)<2048||t>=55296&&t<=57343||t===65279)continue;f[a++]=t}else if((248&m)==240){if(b>=S)return this.interim[0]=m,a;if((192&(n=p[b++]))!=128){b--;continue}if(b>=S)return this.interim[0]=m,this.interim[1]=n,a;if((192&(o=p[b++]))!=128){b--;continue}if(b>=S)return this.interim[0]=m,this.interim[1]=n,this.interim[2]=o,a;if((192&(u=p[b++]))!=128){b--;continue}if((t=(7&m)<<18|(63&n)<<12|(63&o)<<6|63&u)<65536||t>1114111)continue;f[a++]=t}}return a},_}();s.Utf8ToUtf32=h},225:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;var h,_=g(8273),p=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],S=function(){function m(){if(this.version="6",!h){h=new Uint8Array(65536),(0,_.fill)(h,1),h[0]=0,(0,_.fill)(h,0,1,32),(0,_.fill)(h,0,127,160),(0,_.fill)(h,2,4352,4448),h[9001]=2,h[9002]=2,(0,_.fill)(h,2,11904,42192),h[12351]=1,(0,_.fill)(h,2,44032,55204),(0,_.fill)(h,2,63744,64256),(0,_.fill)(h,2,65040,65050),(0,_.fill)(h,2,65072,65136),(0,_.fill)(h,2,65280,65377),(0,_.fill)(h,2,65504,65511);for(var n=0;n<p.length;++n)(0,_.fill)(h,0,p[n][0],p[n][1]+1)}}return m.prototype.wcwidth=function(n){return n<32?0:n<127?1:n<65536?h[n]:function(o,u){var a,t=0,e=u.length-1;if(o<u[0][0]||o>u[e][1])return!1;for(;e>=t;)if(o>u[a=t+e>>1][1])t=a+1;else{if(!(o<u[a][0]))return!0;e=a-1}return!1}(n,f)?0:n>=131072&&n<=196605||n>=196608&&n<=262141?2:1},m}();s.UnicodeV6=S},5981:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;var g=typeof queueMicrotask=="undefined"?function(_){Promise.resolve().then(_)}:queueMicrotask,h=function(){function _(p){this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(p,f){if(f!==void 0&&this._syncCalls>f)this._syncCalls=0;else if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);var m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(p,f){var S=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return S._innerWrite()})),this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(f)},_.prototype._innerWrite=function(p,f){var S=this;p===void 0&&(p=0),f===void 0&&(f=!0);for(var m=p||Date.now();this._writeBuffer.length>this._bufferOffset;){var n=this._writeBuffer[this._bufferOffset],o=this._action(n,f);if(o)return void o.catch(function(a){return g(function(){throw a}),Promise.resolve(!1)}).then(function(a){return Date.now()-m>=12?setTimeout(function(){return S._innerWrite(0,a)}):S._innerWrite(m,a)});var u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return S._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();s.WriteBuffer=h},5941:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;var g=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function _(p,f){var S=p.toString(16),m=S.length<2?"0"+S:S;switch(f){case 4:return S[0];case 8:return m;case 12:return(m+m).slice(0,3);default:return m+m}}s.parseColor=function(p){if(p){var f=p.toLowerCase();if(f.indexOf("rgb:")===0){f=f.slice(4);var S=g.exec(f);if(S){var m=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/m*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/m*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/m*255)]}}else if(f.indexOf("#")===0&&(f=f.slice(1),h.exec(f)&&[3,6,9,12].includes(f.length))){for(var n=f.length/3,o=[0,0,0],u=0;u<3;++u){var a=parseInt(f.slice(n*u,n*u+n),16);o[u]=n===1?a<<4:n===2?a:n===3?a>>4:a>>8}return o}}},s.toRgbString=function(p,f){f===void 0&&(f=16);var S=p[0],m=p[1],n=p[2];return"rgb:"+_(S,f)+"/"+_(m,f)+"/"+_(n,f)}},5770:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;var h=g(482),_=g(8742),p=g(5770),f=[],S=function(){function o(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return o.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},o.prototype.registerHandler=function(u,a){this._handlers[u]===void 0&&(this._handlers[u]=[]);var t=this._handlers[u];return t.push(a),{dispose:function(){var e=t.indexOf(a);e!==-1&&t.splice(e,1)}}},o.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},o.prototype.setHandlerFallback=function(u){this._handlerFb=u},o.prototype.reset=function(){if(this._active.length)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0},o.prototype.hook=function(u,a){if(this.reset(),this._ident=u,this._active=this._handlers[u]||f,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(a);else this._handlerFb(this._ident,"HOOK",a)},o.prototype.put=function(u,a,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(u,a,t);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(u,a,t))},o.prototype.unhook=function(u,a){if(a===void 0&&(a=!0),this._active.length){var t=!1,e=this._active.length-1,i=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=a,i=this._stack.fallThrough,this._stack.paused=!1),!i&&t===!1){for(;e>=0&&(t=this._active[e].unhook(u))!==!0;e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",u);this._active=f,this._ident=0},o}();s.DcsParser=S;var m=new _.Params;m.addParam(0);var n=function(){function o(u){this._handler=u,this._data="",this._params=m,this._hitLimit=!1}return o.prototype.hook=function(u){this._params=u.length>1||u.params[0]?u.clone():m,this._data="",this._hitLimit=!1},o.prototype.put=function(u,a,t){this._hitLimit||(this._data+=(0,h.utf32ToString)(u,a,t),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},o.prototype.unhook=function(u){var a=this,t=!1;if(this._hitLimit)t=!1;else if(u&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return a._params=m,a._data="",a._hitLimit=!1,e});return this._params=m,this._data="",this._hitLimit=!1,t},o}();s.DcsHandler=n},2015:function(W,s,g){var h,_=this&&this.__extends||(h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(i[l]=c[l])},h(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;var p=g(844),f=g(8273),S=g(8742),m=g(6242),n=g(6351),o=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,i){(0,f.fill)(this.table,e<<4|i)},t.prototype.add=function(e,i,c,l){this.table[i<<8|e]=c<<4|l},t.prototype.addMany=function(e,i,c,l){for(var v=0;v<e.length;v++)this.table[i<<8|e[v]]=c<<4|l},t}();s.TransitionTable=o;var u=160;s.VT500_TRANSITION_TABLE=function(){var t=new o(4095),e=Array.apply(null,Array(256)).map(function(E,w){return w}),i=function(E,w){return e.slice(E,w)},c=i(32,127),l=i(0,24);l.push(25),l.push.apply(l,i(28,32));var v,y=i(0,14);for(v in t.setDefault(1,0),t.addMany(c,0,2,0),y)t.addMany([24,26,153,154],v,3,0),t.addMany(i(128,144),v,3,0),t.addMany(i(144,152),v,3,0),t.add(156,v,0,0),t.add(27,v,11,1),t.add(157,v,4,8),t.addMany([152,158,159],v,0,7),t.add(155,v,11,3),t.add(144,v,11,9);return t.addMany(l,0,3,0),t.addMany(l,1,3,1),t.add(127,1,0,1),t.addMany(l,8,0,8),t.addMany(l,3,3,3),t.add(127,3,0,3),t.addMany(l,4,3,4),t.add(127,4,0,4),t.addMany(l,6,3,6),t.addMany(l,5,3,5),t.add(127,5,0,5),t.addMany(l,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(c,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(i(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(c,7,0,7),t.addMany(l,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(i(64,127),3,7,0),t.addMany(i(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(i(48,60),4,8,4),t.addMany(i(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(i(32,64),6,0,6),t.add(127,6,0,6),t.addMany(i(64,127),6,0,0),t.addMany(i(32,48),3,9,5),t.addMany(i(32,48),5,9,5),t.addMany(i(48,64),5,0,6),t.addMany(i(64,127),5,7,0),t.addMany(i(32,48),4,9,5),t.addMany(i(32,48),1,9,2),t.addMany(i(32,48),2,9,2),t.addMany(i(48,127),2,10,0),t.addMany(i(48,80),1,10,0),t.addMany(i(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(i(96,127),1,10,0),t.add(80,1,11,9),t.addMany(l,9,0,9),t.add(127,9,0,9),t.addMany(i(28,32),9,0,9),t.addMany(i(32,48),9,9,12),t.addMany(i(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(l,11,0,11),t.addMany(i(32,128),11,0,11),t.addMany(i(28,32),11,0,11),t.addMany(l,10,0,10),t.add(127,10,0,10),t.addMany(i(28,32),10,0,10),t.addMany(i(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(i(32,48),10,9,12),t.addMany(l,12,0,12),t.add(127,12,0,12),t.addMany(i(28,32),12,0,12),t.addMany(i(32,48),12,9,12),t.addMany(i(48,64),12,0,11),t.addMany(i(64,127),12,12,13),t.addMany(i(64,127),10,12,13),t.addMany(i(64,127),9,12,13),t.addMany(l,13,13,13),t.addMany(c,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(u,0,2,0),t.add(u,8,5,8),t.add(u,6,0,6),t.add(u,11,0,11),t.add(u,13,13,13),t}();var a=function(t){function e(i){i===void 0&&(i=s.VT500_TRANSITION_TABLE);var c=t.call(this)||this;return c._transitions=i,c._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},c.initialState=0,c.currentState=c.initialState,c._params=new S.Params,c._params.addParam(0),c._collect=0,c.precedingCodepoint=0,c._printHandlerFb=function(l,v,y){},c._executeHandlerFb=function(l){},c._csiHandlerFb=function(l,v){},c._escHandlerFb=function(l){},c._errorHandlerFb=function(l){return l},c._printHandler=c._printHandlerFb,c._executeHandlers=Object.create(null),c._csiHandlers=Object.create(null),c._escHandlers=Object.create(null),c._oscParser=new m.OscParser,c._dcsParser=new n.DcsParser,c._errorHandler=c._errorHandlerFb,c.registerEscHandler({final:"\\"},function(){return!0}),c}return _(e,t),e.prototype._identifier=function(i,c){c===void 0&&(c=[64,126]);var l=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((l=i.prefix.charCodeAt(0))&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var v=0;v<i.intermediates.length;++v){var y=i.intermediates.charCodeAt(v);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=y}}if(i.final.length!==1)throw new Error("final must be a single byte");var E=i.final.charCodeAt(0);if(c[0]>E||E>c[1])throw new Error("final must be in range "+c[0]+" .. "+c[1]);return(l<<=8)|E},e.prototype.identToString=function(i){for(var c=[];i;)c.push(String.fromCharCode(255&i)),i>>=8;return c.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(i){this._printHandler=i},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(i,c){var l=this._identifier(i,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);var v=this._escHandlers[l];return v.push(c),{dispose:function(){var y=v.indexOf(c);y!==-1&&v.splice(y,1)}}},e.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},e.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},e.prototype.setExecuteHandler=function(i,c){this._executeHandlers[i.charCodeAt(0)]=c},e.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},e.prototype.registerCsiHandler=function(i,c){var l=this._identifier(i);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);var v=this._csiHandlers[l];return v.push(c),{dispose:function(){var y=v.indexOf(c);y!==-1&&v.splice(y,1)}}},e.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},e.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},e.prototype.registerDcsHandler=function(i,c){return this._dcsParser.registerHandler(this._identifier(i),c)},e.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},e.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},e.prototype.registerOscHandler=function(i,c){return this._oscParser.registerHandler(i,c)},e.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},e.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},e.prototype.setErrorHandler=function(i){this._errorHandler=i},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(i,c,l,v,y){this._parseStack.state=i,this._parseStack.handlers=c,this._parseStack.handlerPos=l,this._parseStack.transition=v,this._parseStack.chunkPos=y},e.prototype.parse=function(i,c,l){var v,y=0,E=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var b=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&C>-1){for(;C>=0&&(v=b[C](this._params))!==!0;C--)if(v instanceof Promise)return this._parseStack.handlerPos=C,v}this._parseStack.handlers=[];break;case 4:if(l===!1&&C>-1){for(;C>=0&&(v=b[C]())!==!0;C--)if(v instanceof Promise)return this._parseStack.handlerPos=C,v}this._parseStack.handlers=[];break;case 6:if(y=i[this._parseStack.chunkPos],v=this._dcsParser.unhook(y!==24&&y!==26,l))return v;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=i[this._parseStack.chunkPos],v=this._oscParser.end(y!==24&&y!==26,l))return v;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var T=w;T<c;++T){switch(y=i[T],(E=this._transitions.table[this.currentState<<8|(y<160?y:u)])>>4){case 2:for(var k=T+1;;++k){if(k>=c||(y=i[k])<32||y>126&&y<u){this._printHandler(i,T,k),T=k-1;break}if(++k>=c||(y=i[k])<32||y>126&&y<u){this._printHandler(i,T,k),T=k-1;break}if(++k>=c||(y=i[k])<32||y>126&&y<u){this._printHandler(i,T,k),T=k-1;break}if(++k>=c||(y=i[k])<32||y>126&&y<u){this._printHandler(i,T,k),T=k-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:T,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var q=(b=this._csiHandlers[this._collect<<8|y])?b.length-1:-1;q>=0&&(v=b[q](this._params))!==!0;q--)if(v instanceof Promise)return this._preserveStack(3,b,q,E,T),v;q<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++T<c&&(y=i[T])>47&&y<60);T--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:for(var D=this._escHandlers[this._collect<<8|y],A=D?D.length-1:-1;A>=0&&(v=D[A]())!==!0;A--)if(v instanceof Promise)return this._preserveStack(4,D,A,E,T),v;A<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(var O=T+1;;++O)if(O>=c||(y=i[O])===24||y===26||y===27||y>127&&y<u){this._dcsParser.put(i,T,O),T=O-1;break}break;case 14:if(v=this._dcsParser.unhook(y!==24&&y!==26))return this._preserveStack(6,[],0,E,T),v;y===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var H=T+1;;H++)if(H>=c||(y=i[H])<32||y>127&&y<u){this._oscParser.put(i,T,H),T=H-1;break}break;case 6:if(v=this._oscParser.end(y!==24&&y!==26))return this._preserveStack(5,[],0,E,T),v;y===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}},e}(p.Disposable);s.EscapeSequenceParser=a},6242:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;var h=g(5770),_=g(482),p=[],f=function(){function m(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return m.prototype.registerHandler=function(n,o){this._handlers[n]===void 0&&(this._handlers[n]=[]);var u=this._handlers[n];return u.push(o),{dispose:function(){var a=u.indexOf(o);a!==-1&&u.splice(a,1)}}},m.prototype.clearHandler=function(n){this._handlers[n]&&delete this._handlers[n]},m.prototype.setHandlerFallback=function(n){this._handlerFb=n},m.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=p},m.prototype.reset=function(){if(this._state===2)for(var n=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;n>=0;--n)this._active[n].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0},m.prototype._start=function(){if(this._active=this._handlers[this._id]||p,this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].start();else this._handlerFb(this._id,"START")},m.prototype._put=function(n,o,u){if(this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].put(n,o,u);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(n,o,u))},m.prototype.start=function(){this.reset(),this._state=1},m.prototype.put=function(n,o,u){if(this._state!==3){if(this._state===1)for(;o<u;){var a=n[o++];if(a===59){this._state=2,this._start();break}if(a<48||57<a)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+a-48}this._state===2&&u-o>0&&this._put(n,o,u)}},m.prototype.end=function(n,o){if(o===void 0&&(o=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var u=!1,a=this._active.length-1,t=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,u=o,t=this._stack.fallThrough,this._stack.paused=!1),!t&&u===!1){for(;a>=0&&(u=this._active[a].end(n))!==!0;a--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,u;a--}for(;a>=0;a--)if((u=this._active[a].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,u}else this._handlerFb(this._id,"END",n);this._active=p,this._id=-1,this._state=0}},m}();s.OscParser=f;var S=function(){function m(n){this._handler=n,this._data="",this._hitLimit=!1}return m.prototype.start=function(){this._data="",this._hitLimit=!1},m.prototype.put=function(n,o,u){this._hitLimit||(this._data+=(0,_.utf32ToString)(n,o,u),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},m.prototype.end=function(n){var o=this,u=!1;if(this._hitLimit)u=!1;else if(n&&(u=this._handler(this._data))instanceof Promise)return u.then(function(a){return o._data="",o._hitLimit=!1,a});return this._data="",this._hitLimit=!1,u},m}();s.OscHandler=S},8742:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;var g=2147483647,h=function(){function _(p,f){if(p===void 0&&(p=32),f===void 0&&(f=32),this.maxLength=p,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(p){var f=new _;if(!p.length)return f;for(var S=Array.isArray(p[0])?1:0;S<p.length;++S){var m=p[S];if(Array.isArray(m))for(var n=0;n<m.length;++n)f.addSubParam(m[n]);else f.addParam(m)}return f},_.prototype.clone=function(){var p=new _(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p},_.prototype.toArray=function(){for(var p=[],f=0;f<this.length;++f){p.push(this.params[f]);var S=this._subParamsIdx[f]>>8,m=255&this._subParamsIdx[f];m-S>0&&p.push(Array.prototype.slice.call(this._subParams,S,m))}return p},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>g?g:p}},_.prototype.addSubParam=function(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>g?g:p,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0},_.prototype.getSubParams=function(p){var f=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];return S-f>0?this._subParams.subarray(f,S):null},_.prototype.getSubParamsAll=function(){for(var p={},f=0;f<this.length;++f){var S=this._subParamsIdx[f]>>8,m=255&this._subParamsIdx[f];m-S>0&&(p[f]=this._subParams.slice(S,m))}return p},_.prototype.addDigit=function(p){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var S=this._digitIsSub?this._subParams:this.params,m=S[f-1];S[f-1]=~m?Math.min(10*m+p,g):p}},_}();s.Params=h},5741:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0;var g=function(){function h(){this._addons=[]}return h.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},h.prototype.loadAddon=function(_,p){var f=this,S={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(S),p.dispose=function(){return f._wrappedAddonDispose(S)},p.activate(_)},h.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var p=-1,f=0;f<this._addons.length;f++)if(this._addons[f]===_){p=f;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(p,1)}},h}();s.AddonManager=g},8771:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;var h=g(3785),_=g(511),p=function(){function f(S,m){this._buffer=S,this.type=m}return f.prototype.init=function(S){return this._buffer=S,this},Object.defineProperty(f.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),f.prototype.getLine=function(S){var m=this._buffer.lines.get(S);if(m)return new h.BufferLineApiView(m)},f.prototype.getNullCell=function(){return new _.CellData},f}();s.BufferApiView=p},3785:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;var h=g(511),_=function(){function p(f){this._line=f}return Object.defineProperty(p.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),p.prototype.getCell=function(f,S){if(!(f<0||f>=this._line.length))return S?(this._line.loadCell(f,S),S):this._line.loadCell(f,new h.CellData)},p.prototype.translateToString=function(f,S,m){return this._line.translateToString(f,S,m)},p}();s.BufferLineApiView=_},8285:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;var h=g(8771),_=g(8460),p=function(){function f(S){var m=this;this._core=S,this._onBufferChange=new _.EventEmitter,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return m._onBufferChange.fire(m.active)})}return Object.defineProperty(f.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),f}();s.BufferNamespaceApi=p},7975:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0;var g=function(){function h(_){this._core=_}return h.prototype.registerCsiHandler=function(_,p){return this._core.registerCsiHandler(_,function(f){return p(f.toArray())})},h.prototype.addCsiHandler=function(_,p){return this.registerCsiHandler(_,p)},h.prototype.registerDcsHandler=function(_,p){return this._core.registerDcsHandler(_,function(f,S){return p(f,S.toArray())})},h.prototype.addDcsHandler=function(_,p){return this.registerDcsHandler(_,p)},h.prototype.registerEscHandler=function(_,p){return this._core.registerEscHandler(_,p)},h.prototype.addEscHandler=function(_,p){return this.registerEscHandler(_,p)},h.prototype.registerOscHandler=function(_,p){return this._core.registerOscHandler(_,p)},h.prototype.addOscHandler=function(_,p){return this.registerOscHandler(_,p)},h}();s.ParserApi=g},7090:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0;var g=function(){function h(_){this._core=_}return h.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(h.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),h}();s.UnicodeApi=g},744:function(W,s,g){var h,_=this&&this.__extends||(h=function(a,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}h(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(a,t,e,i){var c,l=arguments.length,v=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,t,e,i);else for(var y=a.length-1;y>=0;y--)(c=a[y])&&(v=(l<3?c(v):l>3?c(t,e,v):c(t,e))||v);return l>3&&v&&Object.defineProperty(t,e,v),v},f=this&&this.__param||function(a,t){return function(e,i){t(e,i,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;var S=g(2585),m=g(5295),n=g(8460),o=g(844);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;var u=function(a){function t(e){var i=a.call(this)||this;return i._optionsService=e,i.isUserScrolling=!1,i._onResize=new n.EventEmitter,i._onScroll=new n.EventEmitter,i.cols=Math.max(e.options.cols||0,s.MINIMUM_COLS),i.rows=Math.max(e.options.rows||0,s.MINIMUM_ROWS),i.buffers=new m.BufferSet(e,i),i}return _(t,a),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){a.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,i){this.cols=e,this.rows=i,this.buffers.resize(e,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:i})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,i){i===void 0&&(i=!1);var c,l=this.buffer;(c=this._cachedBlankLine)&&c.length===this.cols&&c.getFg(0)===e.fg&&c.getBg(0)===e.bg||(c=l.getBlankLine(e,i),this._cachedBlankLine=c),c.isWrapped=i;var v=l.ybase+l.scrollTop,y=l.ybase+l.scrollBottom;if(l.scrollTop===0){var E=l.lines.isFull;y===l.lines.length-1?E?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(y+1,0,c.clone()),E?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{var w=y-v+1;l.lines.shiftElements(v+1,w-1,-1),l.lines.set(y,c.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)},t.prototype.scrollLines=function(e,i,c){var l=this.buffer;if(e<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else e+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);var v=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+e,l.ybase),0),v!==l.ydisp&&(i||this._onScroll.fire(l.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var i=e-this.buffer.ydisp;i!==0&&this.scrollLines(i)},p([f(0,S.IOptionsService)],t)}(o.Disposable);s.BufferService=u},7994:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0;var g=function(){function h(){this.glevel=0,this._charsets=[]}return h.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},h.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},h.prototype.setgCharset=function(_,p){this._charsets[_]=p,this.glevel===_&&(this.charset=p)},h}();s.CharsetService=g},1753:function(W,s,g){var h=this&&this.__decorate||function(a,t,e,i){var c,l=arguments.length,v=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,t,e,i);else for(var y=a.length-1;y>=0;y--)(c=a[y])&&(v=(l<3?c(v):l>3?c(t,e,v):c(t,e))||v);return l>3&&v&&Object.defineProperty(t,e,v),v},_=this&&this.__param||function(a,t){return function(e,i){t(e,i,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;var p=g(2585),f=g(8460),S={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(a){return a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)}},VT200:{events:19,restrict:function(a){return a.action!==32}},DRAG:{events:23,restrict:function(a){return a.action!==32||a.button!==3}},ANY:{events:31,restrict:function(a){return!0}}};function m(a,t){var e=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(e|=64,e|=a.action):(e|=3&a.button,4&a.button&&(e|=64),8&a.button&&(e|=128),a.action===32?e|=32:a.action!==0||t||(e|=3)),e}var n=String.fromCharCode,o={DEFAULT:function(a){var t=[m(a,!1)+32,a.col+32,a.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+n(t[0])+n(t[1])+n(t[2])},SGR:function(a){var t=a.action===0&&a.button!==4?"m":"M";return"[<"+m(a,!0)+";"+a.col+";"+a.row+t}},u=function(){function a(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new f.EventEmitter,this._lastEvent=null;for(var i=0,c=Object.keys(S);i<c.length;i++){var l=c[i];this.addProtocol(l,S[l])}for(var v=0,y=Object.keys(o);v<y.length;v++){var E=y[v];this.addEncoding(E,o[E])}this.reset()}return a.prototype.addProtocol=function(t,e){this._protocols[t]=e},a.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(a.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(a.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),a.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},a.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},a.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},h([_(0,p.IBufferService),_(1,p.ICoreService)],a)}();s.CoreMouseService=u},6975:function(W,s,g){var h,_=this&&this.__extends||(h=function(e,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(c[v]=l[v])},h(e,i)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=e}h(e,i),e.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}),p=this&&this.__decorate||function(e,i,c,l){var v,y=arguments.length,E=y<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,i,c,l);else for(var w=e.length-1;w>=0;w--)(v=e[w])&&(E=(y<3?v(E):y>3?v(i,c,E):v(i,c))||E);return y>3&&E&&Object.defineProperty(i,c,E),E},f=this&&this.__param||function(e,i){return function(c,l){i(c,l,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;var S=g(2585),m=g(8460),n=g(1439),o=g(844),u=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function i(c,l,v,y){var E=e.call(this)||this;return E._bufferService=l,E._logService=v,E._optionsService=y,E.isCursorInitialized=!1,E.isCursorHidden=!1,E._onData=E.register(new m.EventEmitter),E._onUserInput=E.register(new m.EventEmitter),E._onBinary=E.register(new m.EventEmitter),E._scrollToBottom=c,E.register({dispose:function(){return E._scrollToBottom=void 0}}),E.modes=(0,n.clone)(u),E.decPrivateModes=(0,n.clone)(a),E}return _(i,e),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=(0,n.clone)(u),this.decPrivateModes=(0,n.clone)(a)},i.prototype.triggerDataEvent=function(c,l){if(l===void 0&&(l=!1),!this._optionsService.options.disableStdin){var v=this._bufferService.buffer;v.ybase!==v.ydisp&&this._scrollToBottom(),l&&this._onUserInput.fire(),this._logService.debug('sending data "'+c+'"',function(){return c.split("").map(function(y){return y.charCodeAt(0)})}),this._onData.fire(c)}},i.prototype.triggerBinaryEvent=function(c){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+c+'"',function(){return c.split("").map(function(l){return l.charCodeAt(0)})}),this._onBinary.fire(c))},p([f(1,S.IBufferService),f(2,S.ILogService),f(3,S.IOptionsService)],i)}(o.Disposable);s.CoreService=t},3730:function(W,s,g){var h=this&&this.__decorate||function(S,m,n,o){var u,a=arguments.length,t=a<3?m:o===null?o=Object.getOwnPropertyDescriptor(m,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(S,m,n,o);else for(var e=S.length-1;e>=0;e--)(u=S[e])&&(t=(a<3?u(t):a>3?u(m,n,t):u(m,n))||t);return a>3&&t&&Object.defineProperty(m,n,t),t},_=this&&this.__param||function(S,m){return function(n,o){m(n,o,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DirtyRowService=void 0;var p=g(2585),f=function(){function S(m){this._bufferService=m,this.clearRange()}return Object.defineProperty(S.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),S.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},S.prototype.markDirty=function(m){m<this._start?this._start=m:m>this._end&&(this._end=m)},S.prototype.markRangeDirty=function(m,n){if(m>n){var o=m;m=n,n=o}m<this._start&&(this._start=m),n>this._end&&(this._end=n)},S.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},h([_(0,p.IBufferService)],S)}();s.DirtyRowService=f},4348:function(W,s,g){var h=this&&this.__spreadArray||function(m,n,o){if(o||arguments.length===2)for(var u,a=0,t=n.length;a<t;a++)!u&&a in n||(u||(u=Array.prototype.slice.call(n,0,a)),u[a]=n[a]);return m.concat(u||Array.prototype.slice.call(n))};Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;var _=g(2585),p=g(8343),f=function(){function m(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this._entries=new Map;for(var u=0,a=n;u<a.length;u++){var t=a[u],e=t[0],i=t[1];this.set(e,i)}}return m.prototype.set=function(n,o){var u=this._entries.get(n);return this._entries.set(n,o),u},m.prototype.forEach=function(n){this._entries.forEach(function(o,u){return n(u,o)})},m.prototype.has=function(n){return this._entries.has(n)},m.prototype.get=function(n){return this._entries.get(n)},m}();s.ServiceCollection=f;var S=function(){function m(){this._services=new f,this._services.set(_.IInstantiationService,this)}return m.prototype.setService=function(n,o){this._services.set(n,o)},m.prototype.getService=function(n){return this._services.get(n)},m.prototype.createInstance=function(n){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];for(var a=(0,p.getServiceDependencies)(n).sort(function(y,E){return y.index-E.index}),t=[],e=0,i=a;e<i.length;e++){var c=i[e],l=this._services.get(c.id);if(!l)throw new Error("[createInstance] "+n.name+" depends on UNKNOWN service "+c.id+".");t.push(l)}var v=a.length>0?a[0].index:o.length;if(o.length!==v)throw new Error("[createInstance] First service dependency of "+n.name+" at position "+(v+1)+" conflicts with "+o.length+" static arguments");return new(n.bind.apply(n,h([void 0],h(h([],o,!0),t,!0),!1)))},m}();s.InstantiationService=S},7866:function(W,s,g){var h=this&&this.__decorate||function(n,o,u,a){var t,e=arguments.length,i=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,u):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,o,u,a);else for(var c=n.length-1;c>=0;c--)(t=n[c])&&(i=(e<3?t(i):e>3?t(o,u,i):t(o,u))||i);return e>3&&i&&Object.defineProperty(o,u,i),i},_=this&&this.__param||function(n,o){return function(u,a){o(u,a,n)}},p=this&&this.__spreadArray||function(n,o,u){if(u||arguments.length===2)for(var a,t=0,e=o.length;t<e;t++)!a&&t in o||(a||(a=Array.prototype.slice.call(o,0,t)),a[t]=o[t]);return n.concat(a||Array.prototype.slice.call(o))};Object.defineProperty(s,"__esModule",{value:!0}),s.LogService=void 0;var f=g(2585),S={debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF},m=function(){function n(o){var u=this;this._optionsService=o,this.logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(a){a==="logLevel"&&u._updateLogLevel()})}return n.prototype._updateLogLevel=function(){this.logLevel=S[this._optionsService.options.logLevel]},n.prototype._evalLazyOptionalParams=function(o){for(var u=0;u<o.length;u++)typeof o[u]=="function"&&(o[u]=o[u]())},n.prototype._log=function(o,u,a){this._evalLazyOptionalParams(a),o.call.apply(o,p([console,"xterm.js: "+u],a,!1))},n.prototype.debug=function(o){for(var u=[],a=1;a<arguments.length;a++)u[a-1]=arguments[a];this.logLevel<=f.LogLevelEnum.DEBUG&&this._log(console.log,o,u)},n.prototype.info=function(o){for(var u=[],a=1;a<arguments.length;a++)u[a-1]=arguments[a];this.logLevel<=f.LogLevelEnum.INFO&&this._log(console.info,o,u)},n.prototype.warn=function(o){for(var u=[],a=1;a<arguments.length;a++)u[a-1]=arguments[a];this.logLevel<=f.LogLevelEnum.WARN&&this._log(console.warn,o,u)},n.prototype.error=function(o){for(var u=[],a=1;a<arguments.length;a++)u[a-1]=arguments[a];this.logLevel<=f.LogLevelEnum.ERROR&&this._log(console.error,o,u)},h([_(0,f.IOptionsService)],n)}();s.LogService=m},7302:function(W,s,g){var h=this&&this.__assign||function(){return h=Object.assign||function(m){for(var n,o=1,u=arguments.length;o<u;o++)for(var a in n=arguments[o])Object.prototype.hasOwnProperty.call(n,a)&&(m[a]=n[a]);return m},h.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=s.DEFAULT_BELL_SOUND=void 0;var _=g(8460),p=g(6114);s.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:s.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var f=["normal","bold","100","200","300","400","500","600","700","800","900"],S=function(){function m(n){for(var o in this._onOptionChange=new _.EventEmitter,this._options=h({},s.DEFAULT_OPTIONS),n)if(o in this._options)try{var u=n[o];this._options[o]=this._sanitizeAndValidateOption(o,u)}catch(a){console.error(a)}this.options=this._setupOptions(this._options)}return Object.defineProperty(m.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),m.prototype._setupOptions=function(n){var o=this,u=h({},n),a=function(e){Object.defineProperty(u,e,{get:function(){if(!(e in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return o._options[e]},set:function(i){if(!(e in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');i=o._sanitizeAndValidateOption(e,i),o._options[e]!==i&&(o._options[e]=i,o._onOptionChange.fire(e))}})};for(var t in u)a(t);return u},m.prototype.setOption=function(n,o){this.options[n]=o},m.prototype._sanitizeAndValidateOption=function(n,o){switch(n){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":o||(o=s.DEFAULT_OPTIONS[n]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=f.includes(o)?o:s.DEFAULT_OPTIONS[n];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(n+" cannot be less than 1, value: "+o);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(n+" cannot be less than 0, value: "+o);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(n+" cannot be less than or equal to 0, value: "+o);case"rows":case"cols":if(!o&&o!==0)throw new Error(n+" must be numeric, value: "+o)}return o},m.prototype.getOption=function(n){return this.options[n]},m}();s.OptionsService=S},8343:(W,s)=>{function g(h,_,p){_.di$target===_?_.di$dependencies.push({id:h,index:p}):(_.di$dependencies=[{id:h,index:p}],_.di$target=_)}Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0,s.serviceRegistry=new Map,s.getServiceDependencies=function(h){return h.di$dependencies||[]},s.createDecorator=function(h){if(s.serviceRegistry.has(h))return s.serviceRegistry.get(h);var _=function(p,f,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");g(_,p,S)};return _.toString=function(){return h},s.serviceRegistry.set(h,_),_}},2585:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IUnicodeService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.IDirtyRowService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;var h,_=g(8343);s.IBufferService=(0,_.createDecorator)("BufferService"),s.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),s.ICoreService=(0,_.createDecorator)("CoreService"),s.ICharsetService=(0,_.createDecorator)("CharsetService"),s.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),s.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(h=s.LogLevelEnum||(s.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",s.ILogService=(0,_.createDecorator)("LogService"),s.IOptionsService=(0,_.createDecorator)("OptionsService"),s.IUnicodeService=(0,_.createDecorator)("UnicodeService")},1480:(W,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;var h=g(8460),_=g(225),p=function(){function f(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter;var S=new _.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}return Object.defineProperty(f.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"activeVersion",{get:function(){return this._active},set:function(S){if(!this._providers[S])throw new Error('unknown Unicode version "'+S+'"');this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)},enumerable:!1,configurable:!0}),f.prototype.register=function(S){this._providers[S.version]=S},f.prototype.wcwidth=function(S){return this._activeProvider.wcwidth(S)},f.prototype.getStringCellWidth=function(S){for(var m=0,n=S.length,o=0;o<n;++o){var u=S.charCodeAt(o);if(55296<=u&&u<=56319){if(++o>=n)return m+this.wcwidth(u);var a=S.charCodeAt(o);56320<=a&&a<=57343?u=1024*(u-55296)+a-56320+65536:m+=this.wcwidth(a)}m+=this.wcwidth(u)}return m},f}();s.UnicodeService=p}},N={};function K(W){var s=N[W];if(s!==void 0)return s.exports;var g=N[W]={exports:{}};return $[W].call(g.exports,g,g.exports,K),g.exports}var V={};return(()=>{var W=V;Object.defineProperty(W,"__esModule",{value:!0}),W.Terminal=void 0;var s=K(3236),g=K(9042),h=K(7975),_=K(7090),p=K(5741),f=K(8285),S=["cols","rows"],m=function(){function n(o){var u=this;this._core=new s.Terminal(o),this._addonManager=new p.AddonManager,this._publicOptions={};var a=function(i){Object.defineProperty(t._publicOptions,i,{get:function(){return u._core.options[i]},set:function(c){u._checkReadonlyOptions(i),u._core.options[i]=c}})},t=this;for(var e in this._core.options)a(e)}return n.prototype._checkReadonlyOptions=function(o){if(S.includes(o))throw new Error('Option "'+o+'" can only be set in the constructor')},n.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(n.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"unicode",{get:function(){return this._checkProposedApi(),new _.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new f.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modes",{get:function(){var o=this._core.coreService.decPrivateModes,u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this._publicOptions},set:function(o){for(var u in o)this._publicOptions[u]=o[u]},enumerable:!1,configurable:!0}),n.prototype.blur=function(){this._core.blur()},n.prototype.focus=function(){this._core.focus()},n.prototype.resize=function(o,u){this._verifyIntegers(o,u),this._core.resize(o,u)},n.prototype.open=function(o){this._core.open(o)},n.prototype.attachCustomKeyEventHandler=function(o){this._core.attachCustomKeyEventHandler(o)},n.prototype.registerLinkMatcher=function(o,u,a){return this._checkProposedApi(),this._core.registerLinkMatcher(o,u,a)},n.prototype.deregisterLinkMatcher=function(o){this._checkProposedApi(),this._core.deregisterLinkMatcher(o)},n.prototype.registerLinkProvider=function(o){return this._checkProposedApi(),this._core.registerLinkProvider(o)},n.prototype.registerCharacterJoiner=function(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)},n.prototype.deregisterCharacterJoiner=function(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)},n.prototype.registerMarker=function(o){return this._checkProposedApi(),this._verifyIntegers(o),this._core.addMarker(o)},n.prototype.addMarker=function(o){return this.registerMarker(o)},n.prototype.hasSelection=function(){return this._core.hasSelection()},n.prototype.select=function(o,u,a){this._verifyIntegers(o,u,a),this._core.select(o,u,a)},n.prototype.getSelection=function(){return this._core.getSelection()},n.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},n.prototype.clearSelection=function(){this._core.clearSelection()},n.prototype.selectAll=function(){this._core.selectAll()},n.prototype.selectLines=function(o,u){this._verifyIntegers(o,u),this._core.selectLines(o,u)},n.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},n.prototype.scrollLines=function(o){this._verifyIntegers(o),this._core.scrollLines(o)},n.prototype.scrollPages=function(o){this._verifyIntegers(o),this._core.scrollPages(o)},n.prototype.scrollToTop=function(){this._core.scrollToTop()},n.prototype.scrollToBottom=function(){this._core.scrollToBottom()},n.prototype.scrollToLine=function(o){this._verifyIntegers(o),this._core.scrollToLine(o)},n.prototype.clear=function(){this._core.clear()},n.prototype.write=function(o,u){this._core.write(o,u)},n.prototype.writeUtf8=function(o,u){this._core.write(o,u)},n.prototype.writeln=function(o,u){this._core.write(o),this._core.write(`\r
`,u)},n.prototype.paste=function(o){this._core.paste(o)},n.prototype.getOption=function(o){return this._core.optionsService.getOption(o)},n.prototype.setOption=function(o,u){this._checkReadonlyOptions(o),this._core.optionsService.setOption(o,u)},n.prototype.refresh=function(o,u){this._verifyIntegers(o,u),this._core.refresh(o,u)},n.prototype.reset=function(){this._core.reset()},n.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},n.prototype.loadAddon=function(o){return this._addonManager.loadAddon(this,o)},Object.defineProperty(n,"strings",{get:function(){return g},enumerable:!1,configurable:!0}),n.prototype._verifyIntegers=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];for(var a=0,t=o;a<t.length;a++){var e=t[a];if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}},n}();W.Terminal=m})(),V})()})});var no=qt((Rr,Qr)=>{(function($,N){typeof Rr=="object"&&typeof Qr=="object"?Qr.exports=N():typeof define=="function"&&define.amd?define([],N):typeof Rr=="object"?Rr.FitAddon=N():$.FitAddon=N()})(self,function(){return(()=>{"use strict";var $={775:(K,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.FitAddon=void 0;var W=function(){function s(){}return s.prototype.activate=function(g){this._terminal=g},s.prototype.dispose=function(){},s.prototype.fit=function(){var g=this.proposeDimensions();if(g&&this._terminal){var h=this._terminal._core;this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(h._renderService.clear(),this._terminal.resize(g.cols,g.rows))}},s.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var g=this._terminal._core;if(g._renderService.dimensions.actualCellWidth!==0&&g._renderService.dimensions.actualCellHeight!==0){var h=window.getComputedStyle(this._terminal.element.parentElement),_=parseInt(h.getPropertyValue("height")),p=Math.max(0,parseInt(h.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),S=_-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),m=p-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-g.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(m/g._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(S/g._renderService.dimensions.actualCellHeight))}}}},s}();V.FitAddon=W}},N={};return function K(V){if(N[V])return N[V].exports;var W=N[V]={exports:{}};return $[V](W,W.exports,K),W.exports}(775)})()})});var en=qt(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.loop=ni.conditional=ni.parse=void 0;var os=function $(N,K){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:V;if(Array.isArray(K))K.forEach(function(g){return $(N,g,V,W)});else if(typeof K=="function")K(N,V,W,$);else{var s=Object.keys(K)[0];Array.isArray(K[s])?(W[s]={},$(N,K[s],V,W[s])):W[s]=K[s](N,V,W,$)}return V};ni.parse=os;var ss=function(N,K){return function(V,W,s,g){K(V,W,s)&&g(V,N,W,s)}};ni.conditional=ss;var as=function(N,K){return function(V,W,s,g){for(var h=[];K(V,W,s);){var _={};g(V,N,W,_),h.push(_)}return h}};ni.loop=as});var tn=qt(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.readBits=Re.readArray=Re.readUnsigned=Re.readString=Re.peekBytes=Re.readBytes=Re.peekByte=Re.readByte=Re.buildStream=void 0;var cs=function(N){return{data:N,pos:0}};Re.buildStream=cs;var oo=function(){return function(N){return N.data[N.pos++]}};Re.readByte=oo;var ls=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(K){return K.data[K.pos+N]}};Re.peekByte=ls;var Dr=function(N){return function(K){return K.data.subarray(K.pos,K.pos+=N)}};Re.readBytes=Dr;var hs=function(N){return function(K){return K.data.subarray(K.pos,K.pos+N)}};Re.peekBytes=hs;var us=function(N){return function(K){return Array.from(Dr(N)(K)).map(function(V){return String.fromCharCode(V)}).join("")}};Re.readString=us;var fs=function(N){return function(K){var V=Dr(2)(K);return N?(V[1]<<8)+V[0]:(V[0]<<8)+V[1]}};Re.readUnsigned=fs;var ds=function(N,K){return function(V,W,s){for(var g=typeof K=="function"?K(V,W,s):K,h=Dr(N),_=new Array(g),p=0;p<g;p++)_[p]=h(V);return _}};Re.readArray=ds;var ps=function(N,K,V){for(var W=0,s=0;s<V;s++)W+=N[K+s]&&Math.pow(2,V-s-1);return W},_s=function(N){return function(K){for(var V=oo()(K),W=new Array(8),s=0;s<8;s++)W[7-s]=!!(V&1<<s);return Object.keys(N).reduce(function(g,h){var _=N[h];return _.length?g[h]=ps(W,_.index,_.length):g[h]=W[_.index],g},{})}};Re.readBits=_s});var so=qt(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.default=void 0;var oi=en(),_e=tn(),Br={blocks:function(N){for(var K=0,V=[],W=N.data.length,s=0,g=(0,_e.readByte)()(N);g!==K;g=(0,_e.readByte)()(N)){if(N.pos+g>=W){var h=W-N.pos;V.push((0,_e.readBytes)(h)(N)),s+=h;break}V.push((0,_e.readBytes)(g)(N)),s+=g}for(var _=new Uint8Array(s),p=0,f=0;f<V.length;f++)_.set(V[f],p),p+=V[f].length;return _}},vs=(0,oi.conditional)({gce:[{codes:(0,_e.readBytes)(2)},{byteSize:(0,_e.readByte)()},{extras:(0,_e.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,_e.readUnsigned)(!0)},{transparentColorIndex:(0,_e.readByte)()},{terminator:(0,_e.readByte)()}]},function($){var N=(0,_e.peekBytes)(2)($);return N[0]===33&&N[1]===249}),gs=(0,oi.conditional)({image:[{code:(0,_e.readByte)()},{descriptor:[{left:(0,_e.readUnsigned)(!0)},{top:(0,_e.readUnsigned)(!0)},{width:(0,_e.readUnsigned)(!0)},{height:(0,_e.readUnsigned)(!0)},{lct:(0,_e.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,oi.conditional)({lct:(0,_e.readArray)(3,function($,N,K){return Math.pow(2,K.descriptor.lct.size+1)})},function($,N,K){return K.descriptor.lct.exists}),{data:[{minCodeSize:(0,_e.readByte)()},Br]}]},function($){return(0,_e.peekByte)()($)===44}),ms=(0,oi.conditional)({text:[{codes:(0,_e.readBytes)(2)},{blockSize:(0,_e.readByte)()},{preData:function(N,K,V){return(0,_e.readBytes)(V.text.blockSize)(N)}},Br]},function($){var N=(0,_e.peekBytes)(2)($);return N[0]===33&&N[1]===1}),ys=(0,oi.conditional)({application:[{codes:(0,_e.readBytes)(2)},{blockSize:(0,_e.readByte)()},{id:function(N,K,V){return(0,_e.readString)(V.blockSize)(N)}},Br]},function($){var N=(0,_e.peekBytes)(2)($);return N[0]===33&&N[1]===255}),bs=(0,oi.conditional)({comment:[{codes:(0,_e.readBytes)(2)},Br]},function($){var N=(0,_e.peekBytes)(2)($);return N[0]===33&&N[1]===254}),Ss=[{header:[{signature:(0,_e.readString)(3)},{version:(0,_e.readString)(3)}]},{lsd:[{width:(0,_e.readUnsigned)(!0)},{height:(0,_e.readUnsigned)(!0)},{gct:(0,_e.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,_e.readByte)()},{pixelAspectRatio:(0,_e.readByte)()}]},(0,oi.conditional)({gct:(0,_e.readArray)(3,function($,N){return Math.pow(2,N.lsd.gct.size+1)})},function($,N){return N.lsd.gct.exists}),{frames:(0,oi.loop)([vs,ys,bs,gs,ms],function($){var N=(0,_e.peekByte)()($);return N===33||N===44})}],Cs=Ss;Pr.default=Cs});var ao=qt(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.deinterlace=void 0;var ws=function(N,K){for(var V=new Array(N.length),W=N.length/K,s=function(m,n){var o=N.slice(n*K,(n+1)*K);V.splice.apply(V,[m*K,K].concat(o))},g=[0,4,2,1],h=[8,8,4,2],_=0,p=0;p<4;p++)for(var f=g[p];f<W;f+=h[p])s(f,_),_++;return V};Ir.deinterlace=ws});var co=qt(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.lzw=void 0;var Ls=function(N,K,V){var W=4096,s=-1,g=V,h,_,p,f,S,m,n,o,u,a,t,e,i,c,l,v,y=new Array(V),E=new Array(W),w=new Array(W),b=new Array(W+1);for(e=N,_=1<<e,S=_+1,h=_+2,n=s,f=e+1,p=(1<<f)-1,u=0;u<_;u++)E[u]=0,w[u]=u;var t,o,C,i,c,v,l;for(t=o=C=i=c=v=l=0,a=0;a<g;){if(c===0){if(o<f){t+=K[l]<<o,o+=8,l++;continue}if(u=t&p,t>>=f,o-=f,u>h||u==S)break;if(u==_){f=e+1,p=(1<<f)-1,h=_+2,n=s;continue}if(n==s){b[c++]=w[u],n=u,i=u;continue}for(m=u,u==h&&(b[c++]=i,u=n);u>_;)b[c++]=w[u],u=E[u];i=w[u]&255,b[c++]=i,h<W&&(E[h]=n,w[h]=i,h++,(h&p)==0&&h<W&&(f++,p+=h)),n=m}c--,y[v++]=b[c],a++}for(a=v;a<g;a++)y[a]=0;return y};Hr.lzw=Ls});var ho=qt(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.decompressFrames=si.decompressFrame=si.parseGIF=void 0;var Es=Ts(so()),As=en(),xs=tn(),ks=ao(),Ms=co();function Ts($){return $&&$.__esModule?$:{default:$}}var Os=function(N){var K=new Uint8Array(N);return(0,As.parse)((0,xs.buildStream)(K),Es.default)};si.parseGIF=Os;var Rs=function(N){for(var K=N.pixels.length,V=new Uint8ClampedArray(K*4),W=0;W<K;W++){var s=W*4,g=N.pixels[W],h=N.colorTable[g]||[0,0,0];V[s]=h[0],V[s+1]=h[1],V[s+2]=h[2],V[s+3]=g!==N.transparentIndex?255:0}return V},lo=function(N,K,V){if(!N.image){console.warn("gif frame does not have associated image.");return}var W=N.image,s=W.descriptor.width*W.descriptor.height,g=(0,Ms.lzw)(W.data.minCodeSize,W.data.blocks,s);W.descriptor.lct.interlaced&&(g=(0,ks.deinterlace)(g,W.descriptor.width));var h={pixels:g,dims:{top:N.image.descriptor.top,left:N.image.descriptor.left,width:N.image.descriptor.width,height:N.image.descriptor.height}};return W.descriptor.lct&&W.descriptor.lct.exists?h.colorTable=W.lct:h.colorTable=K,N.gce&&(h.delay=(N.gce.delay||10)*10,h.disposalType=N.gce.extras.disposal,N.gce.extras.transparentColorGiven&&(h.transparentIndex=N.gce.transparentColorIndex)),V&&(h.patch=Rs(h)),h};si.decompressFrame=lo;var Ds=function(N,K){return N.frames.filter(function(V){return V.image}).map(function(V){return lo(V,N.gct,K)})};si.decompressFrames=Ds});var go=qt((nn,on)=>{(function($,N){typeof nn=="object"&&typeof on!="undefined"?on.exports=N():typeof define=="function"&&define.amd?define(N):($=typeof globalThis!="undefined"?globalThis:$||self).bootstrap=N()})(nn,function(){"use strict";let $="transitionend",N=L=>{let r=L.getAttribute("data-bs-target");if(!r||r==="#"){let d=L.getAttribute("href");if(!d||!d.includes("#")&&!d.startsWith("."))return null;d.includes("#")&&!d.startsWith("#")&&(d=`#${d.split("#")[1]}`),r=d&&d!=="#"?d.trim():null}return r},K=L=>{let r=N(L);return r&&document.querySelector(r)?r:null},V=L=>{let r=N(L);return r?document.querySelector(r):null},W=L=>{L.dispatchEvent(new Event($))},s=L=>!(!L||typeof L!="object")&&(L.jquery!==void 0&&(L=L[0]),L.nodeType!==void 0),g=L=>s(L)?L.jquery?L[0]:L:typeof L=="string"&&L.length>0?document.querySelector(L):null,h=(L,r,d)=>{Object.keys(d).forEach(M=>{let P=d[M],F=r[M],U=F&&s(F)?"element":(J=F)==null?`${J}`:{}.toString.call(J).match(/\s([a-z]+)/i)[1].toLowerCase();var J;if(!new RegExp(P).test(U))throw new TypeError(`${L.toUpperCase()}: Option "${M}" provided type "${U}" but expected type "${P}".`)})},_=L=>!(!s(L)||L.getClientRects().length===0)&&getComputedStyle(L).getPropertyValue("visibility")==="visible",p=L=>!L||L.nodeType!==Node.ELEMENT_NODE||!!L.classList.contains("disabled")||(L.disabled!==void 0?L.disabled:L.hasAttribute("disabled")&&L.getAttribute("disabled")!=="false"),f=L=>{if(!document.documentElement.attachShadow)return null;if(typeof L.getRootNode=="function"){let r=L.getRootNode();return r instanceof ShadowRoot?r:null}return L instanceof ShadowRoot?L:L.parentNode?f(L.parentNode):null},S=()=>{},m=L=>{L.offsetHeight},n=()=>{let{jQuery:L}=window;return L&&!document.body.hasAttribute("data-bs-no-jquery")?L:null},o=[],u=()=>document.documentElement.dir==="rtl",a=L=>{var r;r=()=>{let d=n();if(d){let M=L.NAME,P=d.fn[M];d.fn[M]=L.jQueryInterface,d.fn[M].Constructor=L,d.fn[M].noConflict=()=>(d.fn[M]=P,L.jQueryInterface)}},document.readyState==="loading"?(o.length||document.addEventListener("DOMContentLoaded",()=>{o.forEach(d=>d())}),o.push(r)):r()},t=L=>{typeof L=="function"&&L()},e=(L,r,d=!0)=>{if(!d)return void t(L);let M=(U=>{if(!U)return 0;let{transitionDuration:J,transitionDelay:ee}=window.getComputedStyle(U),re=Number.parseFloat(J),ne=Number.parseFloat(ee);return re||ne?(J=J.split(",")[0],ee=ee.split(",")[0],1e3*(Number.parseFloat(J)+Number.parseFloat(ee))):0})(r)+5,P=!1,F=({target:U})=>{U===r&&(P=!0,r.removeEventListener($,F),t(L))};r.addEventListener($,F),setTimeout(()=>{P||W(r)},M)},i=(L,r,d,M)=>{let P=L.indexOf(r);if(P===-1)return L[!d&&M?L.length-1:0];let F=L.length;return P+=d?1:-1,M&&(P=(P+F)%F),L[Math.max(0,Math.min(P,F-1))]},c=/[^.]*(?=\..*)\.|.*/,l=/\..*/,v=/::\d+$/,y={},E=1,w={mouseenter:"mouseover",mouseleave:"mouseout"},b=/^(mouseenter|mouseleave)/i,C=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function T(L,r){return r&&`${r}::${E++}`||L.uidEvent||E++}function k(L){let r=T(L);return L.uidEvent=r,y[r]=y[r]||{},y[r]}function q(L,r,d=null){let M=Object.keys(L);for(let P=0,F=M.length;P<F;P++){let U=L[M[P]];if(U.originalHandler===r&&U.delegationSelector===d)return U}return null}function D(L,r,d){let M=typeof r=="string",P=M?d:r,F=H(L);return C.has(F)||(F=L),[M,P,F]}function A(L,r,d,M,P){if(typeof r!="string"||!L)return;if(d||(d=M,M=null),b.test(r)){let ae=ce=>function(fe){if(!fe.relatedTarget||fe.relatedTarget!==fe.delegateTarget&&!fe.delegateTarget.contains(fe.relatedTarget))return ce.call(this,fe)};M?M=ae(M):d=ae(d)}let[F,U,J]=D(r,d,M),ee=k(L),re=ee[J]||(ee[J]={}),ne=q(re,U,F?d:null);if(ne)return void(ne.oneOff=ne.oneOff&&P);let te=T(U,r.replace(c,"")),pe=F?function(ae,ce,fe){return function ue(we){let me=ae.querySelectorAll(ce);for(let{target:de}=we;de&&de!==this;de=de.parentNode)for(let ye=me.length;ye--;)if(me[ye]===de)return we.delegateTarget=de,ue.oneOff&&R.off(ae,we.type,ce,fe),fe.apply(de,[we]);return null}}(L,d,M):function(ae,ce){return function fe(ue){return ue.delegateTarget=ae,fe.oneOff&&R.off(ae,ue.type,ce),ce.apply(ae,[ue])}}(L,d);pe.delegationSelector=F?d:null,pe.originalHandler=U,pe.oneOff=P,pe.uidEvent=te,re[te]=pe,L.addEventListener(J,pe,F)}function O(L,r,d,M,P){let F=q(r[d],M,P);F&&(L.removeEventListener(d,F,Boolean(P)),delete r[d][F.uidEvent])}function H(L){return L=L.replace(l,""),w[L]||L}let R={on(L,r,d,M){A(L,r,d,M,!1)},one(L,r,d,M){A(L,r,d,M,!0)},off(L,r,d,M){if(typeof r!="string"||!L)return;let[P,F,U]=D(r,d,M),J=U!==r,ee=k(L),re=r.startsWith(".");if(F!==void 0)return!ee||!ee[U]?void 0:void O(L,ee,U,F,P?d:null);re&&Object.keys(ee).forEach(te=>{(function(pe,ae,ce,fe){let ue=ae[ce]||{};Object.keys(ue).forEach(we=>{if(we.includes(fe)){let me=ue[we];O(pe,ae,ce,me.originalHandler,me.delegationSelector)}})})(L,ee,te,r.slice(1))});let ne=ee[U]||{};Object.keys(ne).forEach(te=>{let pe=te.replace(v,"");if(!J||r.includes(pe)){let ae=ne[te];O(L,ee,U,ae.originalHandler,ae.delegationSelector)}})},trigger(L,r,d){if(typeof r!="string"||!L)return null;let M=n(),P=H(r),F=r!==P,U=C.has(P),J,ee=!0,re=!0,ne=!1,te=null;return F&&M&&(J=M.Event(r,d),M(L).trigger(J),ee=!J.isPropagationStopped(),re=!J.isImmediatePropagationStopped(),ne=J.isDefaultPrevented()),U?(te=document.createEvent("HTMLEvents"),te.initEvent(P,ee,!0)):te=new CustomEvent(r,{bubbles:ee,cancelable:!0}),d!==void 0&&Object.keys(d).forEach(pe=>{Object.defineProperty(te,pe,{get:()=>d[pe]})}),ne&&te.preventDefault(),re&&L.dispatchEvent(te),te.defaultPrevented&&J!==void 0&&J.preventDefault(),te}},Z=new Map,Q={set(L,r,d){Z.has(L)||Z.set(L,new Map);let M=Z.get(L);M.has(r)||M.size===0?M.set(r,d):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(M.keys())[0]}.`)},get:(L,r)=>Z.has(L)&&Z.get(L).get(r)||null,remove(L,r){if(!Z.has(L))return;let d=Z.get(L);d.delete(r),d.size===0&&Z.delete(L)}};class oe{constructor(r){(r=g(r))&&(this._element=r,Q.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Q.remove(this._element,this.constructor.DATA_KEY),R.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(r=>{this[r]=null})}_queueCallback(r,d,M=!0){e(r,d,M)}static getInstance(r){return Q.get(g(r),this.DATA_KEY)}static getOrCreateInstance(r,d={}){return this.getInstance(r)||new this(r,typeof d=="object"?d:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}let le=(L,r="hide")=>{let d=`click.dismiss${L.EVENT_KEY}`,M=L.NAME;R.on(document,d,`[data-bs-dismiss="${M}"]`,function(P){if(["A","AREA"].includes(this.tagName)&&P.preventDefault(),p(this))return;let F=V(this)||this.closest(`.${M}`);L.getOrCreateInstance(F)[r]()})};class he extends oe{static get NAME(){return"alert"}close(){if(R.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");let r=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),R.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(r){return this.each(function(){let d=he.getOrCreateInstance(this);if(typeof r=="string"){if(d[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);d[r](this)}})}}le(he,"close"),a(he);let x='[data-bs-toggle="button"]';class B extends oe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(r){return this.each(function(){let d=B.getOrCreateInstance(this);r==="toggle"&&d[r]()})}}function I(L){return L==="true"||L!=="false"&&(L===Number(L).toString()?Number(L):L===""||L==="null"?null:L)}function X(L){return L.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`)}R.on(document,"click.bs.button.data-api",x,L=>{L.preventDefault();let r=L.target.closest(x);B.getOrCreateInstance(r).toggle()}),a(B);let j={setDataAttribute(L,r,d){L.setAttribute(`data-bs-${X(r)}`,d)},removeDataAttribute(L,r){L.removeAttribute(`data-bs-${X(r)}`)},getDataAttributes(L){if(!L)return{};let r={};return Object.keys(L.dataset).filter(d=>d.startsWith("bs")).forEach(d=>{let M=d.replace(/^bs/,"");M=M.charAt(0).toLowerCase()+M.slice(1,M.length),r[M]=I(L.dataset[d])}),r},getDataAttribute:(L,r)=>I(L.getAttribute(`data-bs-${X(r)}`)),offset(L){let r=L.getBoundingClientRect();return{top:r.top+window.pageYOffset,left:r.left+window.pageXOffset}},position:L=>({top:L.offsetTop,left:L.offsetLeft})},Y={find:(L,r=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(r,L)),findOne:(L,r=document.documentElement)=>Element.prototype.querySelector.call(r,L),children:(L,r)=>[].concat(...L.children).filter(d=>d.matches(r)),parents(L,r){let d=[],M=L.parentNode;for(;M&&M.nodeType===Node.ELEMENT_NODE&&M.nodeType!==3;)M.matches(r)&&d.push(M),M=M.parentNode;return d},prev(L,r){let d=L.previousElementSibling;for(;d;){if(d.matches(r))return[d];d=d.previousElementSibling}return[]},next(L,r){let d=L.nextElementSibling;for(;d;){if(d.matches(r))return[d];d=d.nextElementSibling}return[]},focusableChildren(L){let r=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(d=>`${d}:not([tabindex^="-"])`).join(", ");return this.find(r,L).filter(d=>!p(d)&&_(d))}},se="carousel",Ce={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Me={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Ae="next",ie="prev",Ee="left",Ie="right",ht={ArrowLeft:Ie,ArrowRight:Ee},xt="slid.bs.carousel",_t="active",Ut=".active.carousel-item";class Ze extends oe{constructor(r,d){super(r),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(d),this._indicatorsElement=Y.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Ce}static get NAME(){return se}next(){this._slide(Ae)}nextWhenVisible(){!document.hidden&&_(this._element)&&this.next()}prev(){this._slide(ie)}pause(r){r||(this._isPaused=!0),Y.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(W(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(r){r||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(r){this._activeElement=Y.findOne(Ut,this._element);let d=this._getItemIndex(this._activeElement);if(r>this._items.length-1||r<0)return;if(this._isSliding)return void R.one(this._element,xt,()=>this.to(r));if(d===r)return this.pause(),void this.cycle();let M=r>d?Ae:ie;this._slide(M,this._items[r])}_getConfig(r){return r={...Ce,...j.getDataAttributes(this._element),...typeof r=="object"?r:{}},h(se,r,Me),r}_handleSwipe(){let r=Math.abs(this.touchDeltaX);if(r<=40)return;let d=r/this.touchDeltaX;this.touchDeltaX=0,d&&this._slide(d>0?Ie:Ee)}_addEventListeners(){this._config.keyboard&&R.on(this._element,"keydown.bs.carousel",r=>this._keydown(r)),this._config.pause==="hover"&&(R.on(this._element,"mouseenter.bs.carousel",r=>this.pause(r)),R.on(this._element,"mouseleave.bs.carousel",r=>this.cycle(r))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){let r=F=>this._pointerEvent&&(F.pointerType==="pen"||F.pointerType==="touch"),d=F=>{r(F)?this.touchStartX=F.clientX:this._pointerEvent||(this.touchStartX=F.touches[0].clientX)},M=F=>{this.touchDeltaX=F.touches&&F.touches.length>1?0:F.touches[0].clientX-this.touchStartX},P=F=>{r(F)&&(this.touchDeltaX=F.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(U=>this.cycle(U),500+this._config.interval))};Y.find(".carousel-item img",this._element).forEach(F=>{R.on(F,"dragstart.bs.carousel",U=>U.preventDefault())}),this._pointerEvent?(R.on(this._element,"pointerdown.bs.carousel",F=>d(F)),R.on(this._element,"pointerup.bs.carousel",F=>P(F)),this._element.classList.add("pointer-event")):(R.on(this._element,"touchstart.bs.carousel",F=>d(F)),R.on(this._element,"touchmove.bs.carousel",F=>M(F)),R.on(this._element,"touchend.bs.carousel",F=>P(F)))}_keydown(r){if(/input|textarea/i.test(r.target.tagName))return;let d=ht[r.key];d&&(r.preventDefault(),this._slide(d))}_getItemIndex(r){return this._items=r&&r.parentNode?Y.find(".carousel-item",r.parentNode):[],this._items.indexOf(r)}_getItemByOrder(r,d){let M=r===Ae;return i(this._items,d,M,this._config.wrap)}_triggerSlideEvent(r,d){let M=this._getItemIndex(r),P=this._getItemIndex(Y.findOne(Ut,this._element));return R.trigger(this._element,"slide.bs.carousel",{relatedTarget:r,direction:d,from:P,to:M})}_setActiveIndicatorElement(r){if(this._indicatorsElement){let d=Y.findOne(".active",this._indicatorsElement);d.classList.remove(_t),d.removeAttribute("aria-current");let M=Y.find("[data-bs-target]",this._indicatorsElement);for(let P=0;P<M.length;P++)if(Number.parseInt(M[P].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(r)){M[P].classList.add(_t),M[P].setAttribute("aria-current","true");break}}}_updateInterval(){let r=this._activeElement||Y.findOne(Ut,this._element);if(!r)return;let d=Number.parseInt(r.getAttribute("data-bs-interval"),10);d?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=d):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(r,d){let M=this._directionToOrder(r),P=Y.findOne(Ut,this._element),F=this._getItemIndex(P),U=d||this._getItemByOrder(M,P),J=this._getItemIndex(U),ee=Boolean(this._interval),re=M===Ae,ne=re?"carousel-item-start":"carousel-item-end",te=re?"carousel-item-next":"carousel-item-prev",pe=this._orderToDirection(M);if(U&&U.classList.contains(_t))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(U,pe).defaultPrevented||!P||!U)return;this._isSliding=!0,ee&&this.pause(),this._setActiveIndicatorElement(U),this._activeElement=U;let ae=()=>{R.trigger(this._element,xt,{relatedTarget:U,direction:pe,from:F,to:J})};if(this._element.classList.contains("slide")){U.classList.add(te),m(U),P.classList.add(ne),U.classList.add(ne);let ce=()=>{U.classList.remove(ne,te),U.classList.add(_t),P.classList.remove(_t,te,ne),this._isSliding=!1,setTimeout(ae,0)};this._queueCallback(ce,P,!0)}else P.classList.remove(_t),U.classList.add(_t),this._isSliding=!1,ae();ee&&this.cycle()}_directionToOrder(r){return[Ie,Ee].includes(r)?u()?r===Ee?ie:Ae:r===Ee?Ae:ie:r}_orderToDirection(r){return[Ae,ie].includes(r)?u()?r===ie?Ee:Ie:r===ie?Ie:Ee:r}static carouselInterface(r,d){let M=Ze.getOrCreateInstance(r,d),{_config:P}=M;typeof d=="object"&&(P={...P,...d});let F=typeof d=="string"?d:P.slide;if(typeof d=="number")M.to(d);else if(typeof F=="string"){if(M[F]===void 0)throw new TypeError(`No method named "${F}"`);M[F]()}else P.interval&&P.ride&&(M.pause(),M.cycle())}static jQueryInterface(r){return this.each(function(){Ze.carouselInterface(this,r)})}static dataApiClickHandler(r){let d=V(this);if(!d||!d.classList.contains("carousel"))return;let M={...j.getDataAttributes(d),...j.getDataAttributes(this)},P=this.getAttribute("data-bs-slide-to");P&&(M.interval=!1),Ze.carouselInterface(d,M),P&&Ze.getInstance(d).to(P),r.preventDefault()}}R.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",Ze.dataApiClickHandler),R.on(window,"load.bs.carousel.data-api",()=>{let L=Y.find('[data-bs-ride="carousel"]');for(let r=0,d=L.length;r<d;r++)Ze.carouselInterface(L[r],Ze.getInstance(L[r]))}),a(Ze);let zi="collapse",Ki={toggle:!0,parent:null},nr={toggle:"boolean",parent:"(null|element)"},ci="show",zt="collapse",Kt="collapsing",Vi="collapsed",Gi=":scope .collapse .collapse",li='[data-bs-toggle="collapse"]';class vt extends oe{constructor(r,d){super(r),this._isTransitioning=!1,this._config=this._getConfig(d),this._triggerArray=[];let M=Y.find(li);for(let P=0,F=M.length;P<F;P++){let U=M[P],J=K(U),ee=Y.find(J).filter(re=>re===this._element);J!==null&&ee.length&&(this._selector=J,this._triggerArray.push(U))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ki}static get NAME(){return zi}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let r,d=[];if(this._config.parent){let U=Y.find(Gi,this._config.parent);d=Y.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(J=>!U.includes(J))}let M=Y.findOne(this._selector);if(d.length){let U=d.find(J=>M!==J);if(r=U?vt.getInstance(U):null,r&&r._isTransitioning)return}if(R.trigger(this._element,"show.bs.collapse").defaultPrevented)return;d.forEach(U=>{M!==U&&vt.getOrCreateInstance(U,{toggle:!1}).hide(),r||Q.set(U,"bs.collapse",null)});let P=this._getDimension();this._element.classList.remove(zt),this._element.classList.add(Kt),this._element.style[P]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let F=`scroll${P[0].toUpperCase()+P.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Kt),this._element.classList.add(zt,ci),this._element.style[P]="",R.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[P]=`${this._element[F]}px`}hide(){if(this._isTransitioning||!this._isShown()||R.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;let r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,m(this._element),this._element.classList.add(Kt),this._element.classList.remove(zt,ci);let d=this._triggerArray.length;for(let M=0;M<d;M++){let P=this._triggerArray[M],F=V(P);F&&!this._isShown(F)&&this._addAriaAndCollapsedClass([P],!1)}this._isTransitioning=!0,this._element.style[r]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Kt),this._element.classList.add(zt),R.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(r=this._element){return r.classList.contains(ci)}_getConfig(r){return(r={...Ki,...j.getDataAttributes(this._element),...r}).toggle=Boolean(r.toggle),r.parent=g(r.parent),h(zi,r,nr),r}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;let r=Y.find(Gi,this._config.parent);Y.find(li,this._config.parent).filter(d=>!r.includes(d)).forEach(d=>{let M=V(d);M&&this._addAriaAndCollapsedClass([d],this._isShown(M))})}_addAriaAndCollapsedClass(r,d){r.length&&r.forEach(M=>{d?M.classList.remove(Vi):M.classList.add(Vi),M.setAttribute("aria-expanded",d)})}static jQueryInterface(r){return this.each(function(){let d={};typeof r=="string"&&/show|hide/.test(r)&&(d.toggle=!1);let M=vt.getOrCreateInstance(this,d);if(typeof r=="string"){if(M[r]===void 0)throw new TypeError(`No method named "${r}"`);M[r]()}})}}R.on(document,"click.bs.collapse.data-api",li,function(L){(L.target.tagName==="A"||L.delegateTarget&&L.delegateTarget.tagName==="A")&&L.preventDefault();let r=K(this);Y.find(r).forEach(d=>{vt.getOrCreateInstance(d,{toggle:!1}).toggle()})}),a(vt);var Be="top",He="bottom",je="right",Pe="left",kt="auto",gt=[Be,He,je,Pe],ut="start",mt="end",hi="clippingParents",Vt="viewport",yt="popper",ui="reference",Gt=gt.reduce(function(L,r){return L.concat([r+"-"+ut,r+"-"+mt])},[]),$t=[].concat(gt,[kt]).reduce(function(L,r){return L.concat([r,r+"-"+ut,r+"-"+mt])},[]),fi="beforeRead",di="read",pi="afterRead",_i="beforeMain",vi="main",gi="afterMain",mi="beforeWrite",yi="write",bi="afterWrite",Si=[fi,di,pi,_i,vi,gi,mi,yi,bi];function Ke(L){return L?(L.nodeName||"").toLowerCase():null}function qe(L){if(L==null)return window;if(L.toString()!=="[object Window]"){var r=L.ownerDocument;return r&&r.defaultView||window}return L}function Ct(L){return L instanceof qe(L).Element||L instanceof Element}function Fe(L){return L instanceof qe(L).HTMLElement||L instanceof HTMLElement}function Ci(L){return typeof ShadowRoot!="undefined"&&(L instanceof qe(L).ShadowRoot||L instanceof ShadowRoot)}let Xt={name:"applyStyles",enabled:!0,phase:"write",fn:function(L){var r=L.state;Object.keys(r.elements).forEach(function(d){var M=r.styles[d]||{},P=r.attributes[d]||{},F=r.elements[d];Fe(F)&&Ke(F)&&(Object.assign(F.style,M),Object.keys(P).forEach(function(U){var J=P[U];J===!1?F.removeAttribute(U):F.setAttribute(U,J===!0?"":J)}))})},effect:function(L){var r=L.state,d={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,d.popper),r.styles=d,r.elements.arrow&&Object.assign(r.elements.arrow.style,d.arrow),function(){Object.keys(r.elements).forEach(function(M){var P=r.elements[M],F=r.attributes[M]||{},U=Object.keys(r.styles.hasOwnProperty(M)?r.styles[M]:d[M]).reduce(function(J,ee){return J[ee]="",J},{});Fe(P)&&Ke(P)&&(Object.assign(P.style,U),Object.keys(F).forEach(function(J){P.removeAttribute(J)}))})}},requires:["computeStyles"]};function Ve(L){return L.split("-")[0]}function bt(L,r){var d=L.getBoundingClientRect();return{width:d.width/1,height:d.height/1,top:d.top/1,right:d.right/1,bottom:d.bottom/1,left:d.left/1,x:d.left/1,y:d.top/1}}function Yt(L){var r=bt(L),d=L.offsetWidth,M=L.offsetHeight;return Math.abs(r.width-d)<=1&&(d=r.width),Math.abs(r.height-M)<=1&&(M=r.height),{x:L.offsetLeft,y:L.offsetTop,width:d,height:M}}function wi(L,r){var d=r.getRootNode&&r.getRootNode();if(L.contains(r))return!0;if(d&&Ci(d)){var M=r;do{if(M&&L.isSameNode(M))return!0;M=M.parentNode||M.host}while(M)}return!1}function Je(L){return qe(L).getComputedStyle(L)}function $i(L){return["table","td","th"].indexOf(Ke(L))>=0}function nt(L){return((Ct(L)?L.ownerDocument:L.document)||window.document).documentElement}function Mt(L){return Ke(L)==="html"?L:L.assignedSlot||L.parentNode||(Ci(L)?L.host:null)||nt(L)}function Li(L){return Fe(L)&&Je(L).position!=="fixed"?L.offsetParent:null}function wt(L){for(var r=qe(L),d=Li(L);d&&$i(d)&&Je(d).position==="static";)d=Li(d);return d&&(Ke(d)==="html"||Ke(d)==="body"&&Je(d).position==="static")?r:d||function(M){var P=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&Fe(M)&&Je(M).position==="fixed")return null;for(var F=Mt(M);Fe(F)&&["html","body"].indexOf(Ke(F))<0;){var U=Je(F);if(U.transform!=="none"||U.perspective!=="none"||U.contain==="paint"||["transform","perspective"].indexOf(U.willChange)!==-1||P&&U.willChange==="filter"||P&&U.filter&&U.filter!=="none")return F;F=F.parentNode}return null}(L)||r}function Zt(L){return["top","bottom"].indexOf(L)>=0?"x":"y"}var ot=Math.max,Lt=Math.min,Tt=Math.round;function Ot(L,r,d){return ot(L,Lt(r,d))}function Ei(L){return Object.assign({},{top:0,right:0,bottom:0,left:0},L)}function Ai(L,r){return r.reduce(function(d,M){return d[M]=L,d},{})}let xi={name:"arrow",enabled:!0,phase:"main",fn:function(L){var r,d=L.state,M=L.name,P=L.options,F=d.elements.arrow,U=d.modifiersData.popperOffsets,J=Ve(d.placement),ee=Zt(J),re=[Pe,je].indexOf(J)>=0?"height":"width";if(F&&U){var ne=function(Se,Le){return Ei(typeof(Se=typeof Se=="function"?Se(Object.assign({},Le.rects,{placement:Le.placement})):Se)!="number"?Se:Ai(Se,gt))}(P.padding,d),te=Yt(F),pe=ee==="y"?Be:Pe,ae=ee==="y"?He:je,ce=d.rects.reference[re]+d.rects.reference[ee]-U[ee]-d.rects.popper[re],fe=U[ee]-d.rects.reference[ee],ue=wt(F),we=ue?ee==="y"?ue.clientHeight||0:ue.clientWidth||0:0,me=ce/2-fe/2,de=ne[pe],ye=we-te[re]-ne[ae],ve=we/2-te[re]/2+me,ge=Ot(de,ve,ye),be=ee;d.modifiersData[M]=((r={})[be]=ge,r.centerOffset=ge-ve,r)}},effect:function(L){var r=L.state,d=L.options.element,M=d===void 0?"[data-popper-arrow]":d;M!=null&&(typeof M!="string"||(M=r.elements.popper.querySelector(M)))&&wi(r.elements.popper,M)&&(r.elements.arrow=M)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function St(L){return L.split("-")[1]}var Xi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yi(L){var r,d=L.popper,M=L.popperRect,P=L.placement,F=L.variation,U=L.offsets,J=L.position,ee=L.gpuAcceleration,re=L.adaptive,ne=L.roundOffsets,te=ne===!0?function(Ue){var Xe=Ue.x,dt=Ue.y,Oe=window.devicePixelRatio||1;return{x:Tt(Tt(Xe*Oe)/Oe)||0,y:Tt(Tt(dt*Oe)/Oe)||0}}(U):typeof ne=="function"?ne(U):U,pe=te.x,ae=pe===void 0?0:pe,ce=te.y,fe=ce===void 0?0:ce,ue=U.hasOwnProperty("x"),we=U.hasOwnProperty("y"),me=Pe,de=Be,ye=window;if(re){var ve=wt(d),ge="clientHeight",be="clientWidth";ve===qe(d)&&Je(ve=nt(d)).position!=="static"&&J==="absolute"&&(ge="scrollHeight",be="scrollWidth"),ve=ve,P!==Be&&(P!==Pe&&P!==je||F!==mt)||(de=He,fe-=ve[ge]-M.height,fe*=ee?1:-1),P!==Pe&&(P!==Be&&P!==He||F!==mt)||(me=je,ae-=ve[be]-M.width,ae*=ee?1:-1)}var Se,Le=Object.assign({position:J},re&&Xi);return ee?Object.assign({},Le,((Se={})[de]=we?"0":"",Se[me]=ue?"0":"",Se.transform=(ye.devicePixelRatio||1)<=1?"translate("+ae+"px, "+fe+"px)":"translate3d("+ae+"px, "+fe+"px, 0)",Se)):Object.assign({},Le,((r={})[de]=we?fe+"px":"",r[me]=ue?ae+"px":"",r.transform="",r))}let ki={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(L){var r=L.state,d=L.options,M=d.gpuAcceleration,P=M===void 0||M,F=d.adaptive,U=F===void 0||F,J=d.roundOffsets,ee=J===void 0||J,re={placement:Ve(r.placement),variation:St(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:P};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,Yi(Object.assign({},re,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:U,roundOffsets:ee})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,Yi(Object.assign({},re,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ee})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})},data:{}};var Jt={passive:!0};let Mi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(L){var r=L.state,d=L.instance,M=L.options,P=M.scroll,F=P===void 0||P,U=M.resize,J=U===void 0||U,ee=qe(r.elements.popper),re=[].concat(r.scrollParents.reference,r.scrollParents.popper);return F&&re.forEach(function(ne){ne.addEventListener("scroll",d.update,Jt)}),J&&ee.addEventListener("resize",d.update,Jt),function(){F&&re.forEach(function(ne){ne.removeEventListener("scroll",d.update,Jt)}),J&&ee.removeEventListener("resize",d.update,Jt)}},data:{}};var or={left:"right",right:"left",bottom:"top",top:"bottom"};function Qt(L){return L.replace(/left|right|bottom|top/g,function(r){return or[r]})}var sr={start:"end",end:"start"};function Zi(L){return L.replace(/start|end/g,function(r){return sr[r]})}function Ti(L){var r=qe(L);return{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function Oi(L){return bt(nt(L)).left+Ti(L).scrollLeft}function Ri(L){var r=Je(L),d=r.overflow,M=r.overflowX,P=r.overflowY;return/auto|scroll|overlay|hidden/.test(d+P+M)}function Ji(L){return["html","body","#document"].indexOf(Ke(L))>=0?L.ownerDocument.body:Fe(L)&&Ri(L)?L:Ji(Mt(L))}function Rt(L,r){var d;r===void 0&&(r=[]);var M=Ji(L),P=M===((d=L.ownerDocument)==null?void 0:d.body),F=qe(M),U=P?[F].concat(F.visualViewport||[],Ri(M)?M:[]):M,J=r.concat(U);return P?J:J.concat(Rt(Mt(U)))}function Di(L){return Object.assign({},L,{left:L.x,top:L.y,right:L.x+L.width,bottom:L.y+L.height})}function Qi(L,r){return r===Vt?Di(function(d){var M=qe(d),P=nt(d),F=M.visualViewport,U=P.clientWidth,J=P.clientHeight,ee=0,re=0;return F&&(U=F.width,J=F.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(ee=F.offsetLeft,re=F.offsetTop)),{width:U,height:J,x:ee+Oi(d),y:re}}(L)):Fe(r)?function(d){var M=bt(d);return M.top=M.top+d.clientTop,M.left=M.left+d.clientLeft,M.bottom=M.top+d.clientHeight,M.right=M.left+d.clientWidth,M.width=d.clientWidth,M.height=d.clientHeight,M.x=M.left,M.y=M.top,M}(r):Di(function(d){var M,P=nt(d),F=Ti(d),U=(M=d.ownerDocument)==null?void 0:M.body,J=ot(P.scrollWidth,P.clientWidth,U?U.scrollWidth:0,U?U.clientWidth:0),ee=ot(P.scrollHeight,P.clientHeight,U?U.scrollHeight:0,U?U.clientHeight:0),re=-F.scrollLeft+Oi(d),ne=-F.scrollTop;return Je(U||P).direction==="rtl"&&(re+=ot(P.clientWidth,U?U.clientWidth:0)-J),{width:J,height:ee,x:re,y:ne}}(nt(L)))}function er(L){var r,d=L.reference,M=L.element,P=L.placement,F=P?Ve(P):null,U=P?St(P):null,J=d.x+d.width/2-M.width/2,ee=d.y+d.height/2-M.height/2;switch(F){case Be:r={x:J,y:d.y-M.height};break;case He:r={x:J,y:d.y+d.height};break;case je:r={x:d.x+d.width,y:ee};break;case Pe:r={x:d.x-M.width,y:ee};break;default:r={x:d.x,y:d.y}}var re=F?Zt(F):null;if(re!=null){var ne=re==="y"?"height":"width";switch(U){case ut:r[re]=r[re]-(d[ne]/2-M[ne]/2);break;case mt:r[re]=r[re]+(d[ne]/2-M[ne]/2)}}return r}function Dt(L,r){r===void 0&&(r={});var d=r,M=d.placement,P=M===void 0?L.placement:M,F=d.boundary,U=F===void 0?hi:F,J=d.rootBoundary,ee=J===void 0?Vt:J,re=d.elementContext,ne=re===void 0?yt:re,te=d.altBoundary,pe=te!==void 0&&te,ae=d.padding,ce=ae===void 0?0:ae,fe=Ei(typeof ce!="number"?ce:Ai(ce,gt)),ue=ne===yt?ui:yt,we=L.rects.popper,me=L.elements[pe?ue:ne],de=function(Xe,dt,Oe){var Fi=dt==="clippingParents"?function(ke){var Wi=Rt(Mt(ke)),it=["absolute","fixed"].indexOf(Je(ke).position)>=0&&Fe(ke)?wt(ke):ke;return Ct(it)?Wi.filter(function(Ye){return Ct(Ye)&&wi(Ye,it)&&Ke(Ye)!=="body"}):[]}(Xe):[].concat(dt),Ft=[].concat(Fi,[Oe]),Wt=Ft[0],ze=Ft.reduce(function(ke,Wi){var it=Qi(Xe,Wi);return ke.top=ot(it.top,ke.top),ke.right=Lt(it.right,ke.right),ke.bottom=Lt(it.bottom,ke.bottom),ke.left=ot(it.left,ke.left),ke},Qi(Xe,Wt));return ze.width=ze.right-ze.left,ze.height=ze.bottom-ze.top,ze.x=ze.left,ze.y=ze.top,ze}(Ct(me)?me:me.contextElement||nt(L.elements.popper),U,ee),ye=bt(L.elements.reference),ve=er({reference:ye,element:we,strategy:"absolute",placement:P}),ge=Di(Object.assign({},we,ve)),be=ne===yt?ge:ye,Se={top:de.top-be.top+fe.top,bottom:be.bottom-de.bottom+fe.bottom,left:de.left-be.left+fe.left,right:be.right-de.right+fe.right},Le=L.modifiersData.offset;if(ne===yt&&Le){var Ue=Le[P];Object.keys(Se).forEach(function(Xe){var dt=[je,He].indexOf(Xe)>=0?1:-1,Oe=[Be,He].indexOf(Xe)>=0?"y":"x";Se[Xe]+=Ue[Oe]*dt})}return Se}function zr(L,r){r===void 0&&(r={});var d=r,M=d.placement,P=d.boundary,F=d.rootBoundary,U=d.padding,J=d.flipVariations,ee=d.allowedAutoPlacements,re=ee===void 0?$t:ee,ne=St(M),te=ne?J?Gt:Gt.filter(function(ce){return St(ce)===ne}):gt,pe=te.filter(function(ce){return re.indexOf(ce)>=0});pe.length===0&&(pe=te);var ae=pe.reduce(function(ce,fe){return ce[fe]=Dt(L,{placement:fe,boundary:P,rootBoundary:F,padding:U})[Ve(fe)],ce},{});return Object.keys(ae).sort(function(ce,fe){return ae[ce]-ae[fe]})}let ar={name:"flip",enabled:!0,phase:"main",fn:function(L){var r=L.state,d=L.options,M=L.name;if(!r.modifiersData[M]._skip){for(var P=d.mainAxis,F=P===void 0||P,U=d.altAxis,J=U===void 0||U,ee=d.fallbackPlacements,re=d.padding,ne=d.boundary,te=d.rootBoundary,pe=d.altBoundary,ae=d.flipVariations,ce=ae===void 0||ae,fe=d.allowedAutoPlacements,ue=r.options.placement,we=Ve(ue),me=ee||(we!==ue&&ce?function(Ye){if(Ve(Ye)===kt)return[];var pt=Qt(Ye);return[Zi(Ye),pt,Zi(pt)]}(ue):[Qt(ue)]),de=[ue].concat(me).reduce(function(Ye,pt){return Ye.concat(Ve(pt)===kt?zr(r,{placement:pt,boundary:ne,rootBoundary:te,padding:re,flipVariations:ce,allowedAutoPlacements:fe}):pt)},[]),ye=r.rects.reference,ve=r.rects.popper,ge=new Map,be=!0,Se=de[0],Le=0;Le<de.length;Le++){var Ue=de[Le],Xe=Ve(Ue),dt=St(Ue)===ut,Oe=[Be,He].indexOf(Xe)>=0,Fi=Oe?"width":"height",Ft=Dt(r,{placement:Ue,boundary:ne,rootBoundary:te,altBoundary:pe,padding:re}),Wt=Oe?dt?je:Pe:dt?He:Be;ye[Fi]>ve[Fi]&&(Wt=Qt(Wt));var ze=Qt(Wt),ke=[];if(F&&ke.push(Ft[Xe]<=0),J&&ke.push(Ft[Wt]<=0,Ft[ze]<=0),ke.every(function(Ye){return Ye})){Se=Ue,be=!1;break}ge.set(Ue,ke)}if(be)for(var Wi=function(Ye){var pt=de.find(function(kr){var mr=ge.get(kr);if(mr)return mr.slice(0,Ye).every(function(ir){return ir})});if(pt)return Se=pt,"break"},it=ce?3:1;it>0&&Wi(it)!=="break";it--);r.placement!==Se&&(r.modifiersData[M]._skip=!0,r.placement=Se,r.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function cr(L,r,d){return d===void 0&&(d={x:0,y:0}),{top:L.top-r.height-d.y,right:L.right-r.width+d.x,bottom:L.bottom-r.height+d.y,left:L.left-r.width-d.x}}function Cr(L){return[Be,je,He,Pe].some(function(r){return L[r]>=0})}let wr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(L){var r=L.state,d=L.name,M=r.rects.reference,P=r.rects.popper,F=r.modifiersData.preventOverflow,U=Dt(r,{elementContext:"reference"}),J=Dt(r,{altBoundary:!0}),ee=cr(U,M),re=cr(J,P,F),ne=Cr(ee),te=Cr(re);r.modifiersData[d]={referenceClippingOffsets:ee,popperEscapeOffsets:re,isReferenceHidden:ne,hasPopperEscaped:te},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":ne,"data-popper-escaped":te})}},G={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(L){var r=L.state,d=L.options,M=L.name,P=d.offset,F=P===void 0?[0,0]:P,U=$t.reduce(function(ne,te){return ne[te]=function(pe,ae,ce){var fe=Ve(pe),ue=[Pe,Be].indexOf(fe)>=0?-1:1,we=typeof ce=="function"?ce(Object.assign({},ae,{placement:pe})):ce,me=we[0],de=we[1];return me=me||0,de=(de||0)*ue,[Pe,je].indexOf(fe)>=0?{x:de,y:me}:{x:me,y:de}}(te,r.rects,F),ne},{}),J=U[r.placement],ee=J.x,re=J.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=ee,r.modifiersData.popperOffsets.y+=re),r.modifiersData[M]=U}},z={name:"popperOffsets",enabled:!0,phase:"read",fn:function(L){var r=L.state,d=L.name;r.modifiersData[d]=er({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})},data:{}},st={name:"preventOverflow",enabled:!0,phase:"main",fn:function(L){var r=L.state,d=L.options,M=L.name,P=d.mainAxis,F=P===void 0||P,U=d.altAxis,J=U!==void 0&&U,ee=d.boundary,re=d.rootBoundary,ne=d.altBoundary,te=d.padding,pe=d.tether,ae=pe===void 0||pe,ce=d.tetherOffset,fe=ce===void 0?0:ce,ue=Dt(r,{boundary:ee,rootBoundary:re,padding:te,altBoundary:ne}),we=Ve(r.placement),me=St(r.placement),de=!me,ye=Zt(we),ve=ye==="x"?"y":"x",ge=r.modifiersData.popperOffsets,be=r.rects.reference,Se=r.rects.popper,Le=typeof fe=="function"?fe(Object.assign({},r.rects,{placement:r.placement})):fe,Ue={x:0,y:0};if(ge){if(F||J){var Xe=ye==="y"?Be:Pe,dt=ye==="y"?He:je,Oe=ye==="y"?"height":"width",Fi=ge[ye],Ft=ge[ye]+ue[Xe],Wt=ge[ye]-ue[dt],ze=ae?-Se[Oe]/2:0,ke=me===ut?be[Oe]:Se[Oe],Wi=me===ut?-Se[Oe]:-be[Oe],it=r.elements.arrow,Ye=ae&&it?Yt(it):{width:0,height:0},pt=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},kr=pt[Xe],mr=pt[dt],ir=Ot(0,be[Oe],Ye[Oe]),Go=de?be[Oe]/2-ze-ir-kr-Le:ke-ir-kr-Le,$o=de?-be[Oe]/2+ze+ir+mr+Le:Wi+ir+mr+Le,Yr=r.elements.arrow&&wt(r.elements.arrow),Xo=Yr?ye==="y"?Yr.clientTop||0:Yr.clientLeft||0:0,Yn=r.modifiersData.offset?r.modifiersData.offset[r.placement][ye]:0,Zn=ge[ye]+Go-Yn-Xo,Jn=ge[ye]+$o-Yn;if(F){var Qn=Ot(ae?Lt(Ft,Zn):Ft,Fi,ae?ot(Wt,Jn):Wt);ge[ye]=Qn,Ue[ye]=Qn-Fi}if(J){var Yo=ye==="x"?Be:Pe,Zo=ye==="x"?He:je,Mr=ge[ve],eo=Mr+ue[Yo],to=Mr-ue[Zo],io=Ot(ae?Lt(eo,Zn):eo,Mr,ae?ot(to,Jn):to);ge[ve]=io,Ue[ve]=io-Mr}}r.modifiersData[M]=Ue}},requiresIfExists:["offset"]};function Bi(L,r,d){d===void 0&&(d=!1);var M=Fe(r);Fe(r)&&function(ne){var te=ne.getBoundingClientRect();te.width,ne.offsetWidth,te.height,ne.offsetHeight}(r);var P,F,U=nt(r),J=bt(L),ee={scrollLeft:0,scrollTop:0},re={x:0,y:0};return(M||!M&&!d)&&((Ke(r)!=="body"||Ri(U))&&(ee=(P=r)!==qe(P)&&Fe(P)?{scrollLeft:(F=P).scrollLeft,scrollTop:F.scrollTop}:Ti(P)),Fe(r)?((re=bt(r)).x+=r.clientLeft,re.y+=r.clientTop):U&&(re.x=Oi(U))),{x:J.left+ee.scrollLeft-re.x,y:J.top+ee.scrollTop-re.y,width:J.width,height:J.height}}function Pi(L){var r=new Map,d=new Set,M=[];function P(F){d.add(F.name),[].concat(F.requires||[],F.requiresIfExists||[]).forEach(function(U){if(!d.has(U)){var J=r.get(U);J&&P(J)}}),M.push(F)}return L.forEach(function(F){r.set(F.name,F)}),L.forEach(function(F){d.has(F.name)||P(F)}),M}var Te={placement:"bottom",modifiers:[],strategy:"absolute"};function at(){for(var L=arguments.length,r=new Array(L),d=0;d<L;d++)r[d]=arguments[d];return!r.some(function(M){return!(M&&typeof M.getBoundingClientRect=="function")})}function Ge(L){L===void 0&&(L={});var r=L,d=r.defaultModifiers,M=d===void 0?[]:d,P=r.defaultOptions,F=P===void 0?Te:P;return function(U,J,ee){ee===void 0&&(ee=F);var re,ne,te={placement:"bottom",orderedModifiers:[],options:Object.assign({},Te,F),modifiersData:{},elements:{reference:U,popper:J},attributes:{},styles:{}},pe=[],ae=!1,ce={state:te,setOptions:function(ue){var we=typeof ue=="function"?ue(te.options):ue;fe(),te.options=Object.assign({},F,te.options,we),te.scrollParents={reference:Ct(U)?Rt(U):U.contextElement?Rt(U.contextElement):[],popper:Rt(J)};var me,de,ye=function(ve){var ge=Pi(ve);return Si.reduce(function(be,Se){return be.concat(ge.filter(function(Le){return Le.phase===Se}))},[])}((me=[].concat(M,te.options.modifiers),de=me.reduce(function(ve,ge){var be=ve[ge.name];return ve[ge.name]=be?Object.assign({},be,ge,{options:Object.assign({},be.options,ge.options),data:Object.assign({},be.data,ge.data)}):ge,ve},{}),Object.keys(de).map(function(ve){return de[ve]})));return te.orderedModifiers=ye.filter(function(ve){return ve.enabled}),te.orderedModifiers.forEach(function(ve){var ge=ve.name,be=ve.options,Se=be===void 0?{}:be,Le=ve.effect;if(typeof Le=="function"){var Ue=Le({state:te,name:ge,instance:ce,options:Se});pe.push(Ue||function(){})}}),ce.update()},forceUpdate:function(){if(!ae){var ue=te.elements,we=ue.reference,me=ue.popper;if(at(we,me)){te.rects={reference:Bi(we,wt(me),te.options.strategy==="fixed"),popper:Yt(me)},te.reset=!1,te.placement=te.options.placement,te.orderedModifiers.forEach(function(Le){return te.modifiersData[Le.name]=Object.assign({},Le.data)});for(var de=0;de<te.orderedModifiers.length;de++)if(te.reset!==!0){var ye=te.orderedModifiers[de],ve=ye.fn,ge=ye.options,be=ge===void 0?{}:ge,Se=ye.name;typeof ve=="function"&&(te=ve({state:te,options:be,name:Se,instance:ce})||te)}else te.reset=!1,de=-1}}},update:(re=function(){return new Promise(function(ue){ce.forceUpdate(),ue(te)})},function(){return ne||(ne=new Promise(function(ue){Promise.resolve().then(function(){ne=void 0,ue(re())})})),ne}),destroy:function(){fe(),ae=!0}};if(!at(U,J))return ce;function fe(){pe.forEach(function(ue){return ue()}),pe=[]}return ce.setOptions(ee).then(function(ue){!ae&&ee.onFirstUpdate&&ee.onFirstUpdate(ue)}),ce}}var Ii=Ge(),Ne=Ge({defaultModifiers:[Mi,z,ki,Xt]}),Qe=Ge({defaultModifiers:[Mi,z,ki,Xt,G,ar,st,xi,wr]});let ei=Object.freeze({__proto__:null,popperGenerator:Ge,detectOverflow:Dt,createPopperBase:Ii,createPopper:Qe,createPopperLite:Ne,top:Be,bottom:He,right:je,left:Pe,auto:kt,basePlacements:gt,start:ut,end:mt,clippingParents:hi,viewport:Vt,popper:yt,reference:ui,variationPlacements:Gt,placements:$t,beforeRead:fi,read:di,afterRead:pi,beforeMain:_i,main:vi,afterMain:gi,beforeWrite:mi,write:yi,afterWrite:bi,modifierPhases:Si,applyStyles:Xt,arrow:xi,computeStyles:ki,eventListeners:Mi,flip:ar,hide:wr,offset:G,popperOffsets:z,preventOverflow:st}),Bt="dropdown",Et="Escape",Pt="Space",$e="ArrowUp",We="ArrowDown",xe=new RegExp("ArrowUp|ArrowDown|Escape"),ft="click.bs.dropdown.data-api",et="keydown.bs.dropdown.data-api",tt="show",ct='[data-bs-toggle="dropdown"]',ti=".dropdown-menu",At=u()?"top-end":"top-start",ii=u()?"top-start":"top-end",It=u()?"bottom-end":"bottom-start",lr=u()?"bottom-start":"bottom-end",hr=u()?"left-start":"right-start",Ht=u()?"right-start":"left-start",jt={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Kr={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class lt extends oe{constructor(r,d){super(r),this._popper=null,this._config=this._getConfig(d),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return jt}static get DefaultType(){return Kr}static get NAME(){return Bt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown(this._menu))return;let r={relatedTarget:this._element};if(R.trigger(this._element,"show.bs.dropdown",r).defaultPrevented)return;let d=lt.getParentFromElement(this._element);this._inNavbar?j.setDataAttribute(this._menu,"popper","none"):this._createPopper(d),"ontouchstart"in document.documentElement&&!d.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(M=>R.on(M,"mouseover",S)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(tt),this._element.classList.add(tt),R.trigger(this._element,"shown.bs.dropdown",r)}hide(){if(p(this._element)||!this._isShown(this._menu))return;let r={relatedTarget:this._element};this._completeHide(r)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(r){R.trigger(this._element,"hide.bs.dropdown",r).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(d=>R.off(d,"mouseover",S)),this._popper&&this._popper.destroy(),this._menu.classList.remove(tt),this._element.classList.remove(tt),this._element.setAttribute("aria-expanded","false"),j.removeDataAttribute(this._menu,"popper"),R.trigger(this._element,"hidden.bs.dropdown",r))}_getConfig(r){if(r={...this.constructor.Default,...j.getDataAttributes(this._element),...r},h(Bt,r,this.constructor.DefaultType),typeof r.reference=="object"&&!s(r.reference)&&typeof r.reference.getBoundingClientRect!="function")throw new TypeError(`${Bt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return r}_createPopper(r){if(ei===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let d=this._element;this._config.reference==="parent"?d=r:s(this._config.reference)?d=g(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);let M=this._getPopperConfig(),P=M.modifiers.find(F=>F.name==="applyStyles"&&F.enabled===!1);this._popper=Qe(d,this._menu,M),P&&j.setDataAttribute(this._menu,"popper","static")}_isShown(r=this._element){return r.classList.contains(tt)}_getMenuElement(){return Y.next(this._element,ti)[0]}_getPlacement(){let r=this._element.parentNode;if(r.classList.contains("dropend"))return hr;if(r.classList.contains("dropstart"))return Ht;let d=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return r.classList.contains("dropup")?d?ii:At:d?lr:It}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){let{offset:r}=this._config;return typeof r=="string"?r.split(",").map(d=>Number.parseInt(d,10)):typeof r=="function"?d=>r(d,this._element):r}_getPopperConfig(){let r={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(r.modifiers=[{name:"applyStyles",enabled:!1}]),{...r,...typeof this._config.popperConfig=="function"?this._config.popperConfig(r):this._config.popperConfig}}_selectMenuItem({key:r,target:d}){let M=Y.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(_);M.length&&i(M,d,r===We,!M.includes(d)).focus()}static jQueryInterface(r){return this.each(function(){let d=lt.getOrCreateInstance(this,r);if(typeof r=="string"){if(d[r]===void 0)throw new TypeError(`No method named "${r}"`);d[r]()}})}static clearMenus(r){if(r&&(r.button===2||r.type==="keyup"&&r.key!=="Tab"))return;let d=Y.find(ct);for(let M=0,P=d.length;M<P;M++){let F=lt.getInstance(d[M]);if(!F||F._config.autoClose===!1||!F._isShown())continue;let U={relatedTarget:F._element};if(r){let J=r.composedPath(),ee=J.includes(F._menu);if(J.includes(F._element)||F._config.autoClose==="inside"&&!ee||F._config.autoClose==="outside"&&ee||F._menu.contains(r.target)&&(r.type==="keyup"&&r.key==="Tab"||/input|select|option|textarea|form/i.test(r.target.tagName)))continue;r.type==="click"&&(U.clickEvent=r)}F._completeHide(U)}}static getParentFromElement(r){return V(r)||r.parentNode}static dataApiKeydownHandler(r){if(/input|textarea/i.test(r.target.tagName)?r.key===Pt||r.key!==Et&&(r.key!==We&&r.key!==$e||r.target.closest(ti)):!xe.test(r.key))return;let d=this.classList.contains(tt);if(!d&&r.key===Et||(r.preventDefault(),r.stopPropagation(),p(this)))return;let M=this.matches(ct)?this:Y.prev(this,ct)[0],P=lt.getOrCreateInstance(M);if(r.key!==Et)return r.key===$e||r.key===We?(d||P.show(),void P._selectMenuItem(r)):void(d&&r.key!==Pt||lt.clearMenus());P.hide()}}R.on(document,et,ct,lt.dataApiKeydownHandler),R.on(document,et,ti,lt.dataApiKeydownHandler),R.on(document,ft,lt.clearMenus),R.on(document,"keyup.bs.dropdown.data-api",lt.clearMenus),R.on(document,ft,ct,function(L){L.preventDefault(),lt.getOrCreateInstance(this).toggle()}),a(lt);let hn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",un=".sticky-top";class Vr{constructor(){this._element=document.body}getWidth(){let r=document.documentElement.clientWidth;return Math.abs(window.innerWidth-r)}hide(){let r=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",d=>d+r),this._setElementAttributes(hn,"paddingRight",d=>d+r),this._setElementAttributes(un,"marginRight",d=>d-r)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(r,d,M){let P=this.getWidth();this._applyManipulationCallback(r,F=>{if(F!==this._element&&window.innerWidth>F.clientWidth+P)return;this._saveInitialAttribute(F,d);let U=window.getComputedStyle(F)[d];F.style[d]=`${M(Number.parseFloat(U))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(hn,"paddingRight"),this._resetElementAttributes(un,"marginRight")}_saveInitialAttribute(r,d){let M=r.style[d];M&&j.setDataAttribute(r,d,M)}_resetElementAttributes(r,d){this._applyManipulationCallback(r,M=>{let P=j.getDataAttribute(M,d);P===void 0?M.style.removeProperty(d):(j.removeDataAttribute(M,d),M.style[d]=P)})}_applyManipulationCallback(r,d){s(r)?d(r):Y.find(r,this._element).forEach(d)}isOverflowing(){return this.getWidth()>0}}let xo={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},ko={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},fn="show",dn="mousedown.bs.backdrop";class pn{constructor(r){this._config=this._getConfig(r),this._isAppended=!1,this._element=null}show(r){this._config.isVisible?(this._append(),this._config.isAnimated&&m(this._getElement()),this._getElement().classList.add(fn),this._emulateAnimation(()=>{t(r)})):t(r)}hide(r){this._config.isVisible?(this._getElement().classList.remove(fn),this._emulateAnimation(()=>{this.dispose(),t(r)})):t(r)}_getElement(){if(!this._element){let r=document.createElement("div");r.className=this._config.className,this._config.isAnimated&&r.classList.add("fade"),this._element=r}return this._element}_getConfig(r){return(r={...xo,...typeof r=="object"?r:{}}).rootElement=g(r.rootElement),h("backdrop",r,ko),r}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),R.on(this._getElement(),dn,()=>{t(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(R.off(this._element,dn),this._element.remove(),this._isAppended=!1)}_emulateAnimation(r){e(r,this._getElement(),this._config.isAnimated)}}let Mo={trapElement:null,autofocus:!0},To={trapElement:"element",autofocus:"boolean"},_n=".bs.focustrap",vn="backward";class gn{constructor(r){this._config=this._getConfig(r),this._isActive=!1,this._lastTabNavDirection=null}activate(){let{trapElement:r,autofocus:d}=this._config;this._isActive||(d&&r.focus(),R.off(document,_n),R.on(document,"focusin.bs.focustrap",M=>this._handleFocusin(M)),R.on(document,"keydown.tab.bs.focustrap",M=>this._handleKeydown(M)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,R.off(document,_n))}_handleFocusin(r){let{target:d}=r,{trapElement:M}=this._config;if(d===document||d===M||M.contains(d))return;let P=Y.focusableChildren(M);P.length===0?M.focus():this._lastTabNavDirection===vn?P[P.length-1].focus():P[0].focus()}_handleKeydown(r){r.key==="Tab"&&(this._lastTabNavDirection=r.shiftKey?vn:"forward")}_getConfig(r){return r={...Mo,...typeof r=="object"?r:{}},h("focustrap",r,To),r}}let mn="modal",yn="Escape",bn={backdrop:!0,keyboard:!0,focus:!0},Oo={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Sn="hidden.bs.modal",Cn="show.bs.modal",wn="resize.bs.modal",Ln="click.dismiss.bs.modal",En="keydown.dismiss.bs.modal",An="mousedown.dismiss.bs.modal",xn="modal-open",kn="show",Gr="modal-static";class Hi extends oe{constructor(r,d){super(r),this._config=this._getConfig(d),this._dialog=Y.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Vr}static get Default(){return bn}static get NAME(){return mn}toggle(r){return this._isShown?this.hide():this.show(r)}show(r){this._isShown||this._isTransitioning||R.trigger(this._element,Cn,{relatedTarget:r}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(xn),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),R.on(this._dialog,An,()=>{R.one(this._element,"mouseup.dismiss.bs.modal",d=>{d.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(r)))}hide(){if(!this._isShown||this._isTransitioning||R.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;let r=this._isAnimated();r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(kn),R.off(this._element,Ln),R.off(this._dialog,An),this._queueCallback(()=>this._hideModal(),this._element,r)}dispose(){[window,this._dialog].forEach(r=>R.off(r,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gn({trapElement:this._element})}_getConfig(r){return r={...bn,...j.getDataAttributes(this._element),...typeof r=="object"?r:{}},h(mn,r,Oo),r}_showElement(r){let d=this._isAnimated(),M=Y.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,M&&(M.scrollTop=0),d&&m(this._element),this._element.classList.add(kn),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,R.trigger(this._element,"shown.bs.modal",{relatedTarget:r})},this._dialog,d)}_setEscapeEvent(){this._isShown?R.on(this._element,En,r=>{this._config.keyboard&&r.key===yn?(r.preventDefault(),this.hide()):this._config.keyboard||r.key!==yn||this._triggerBackdropTransition()}):R.off(this._element,En)}_setResizeEvent(){this._isShown?R.on(window,wn,()=>this._adjustDialog()):R.off(window,wn)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xn),this._resetAdjustments(),this._scrollBar.reset(),R.trigger(this._element,Sn)})}_showBackdrop(r){R.on(this._element,Ln,d=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:d.target===d.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(r)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(R.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;let{classList:r,scrollHeight:d,style:M}=this._element,P=d>document.documentElement.clientHeight;!P&&M.overflowY==="hidden"||r.contains(Gr)||(P||(M.overflowY="hidden"),r.add(Gr),this._queueCallback(()=>{r.remove(Gr),P||this._queueCallback(()=>{M.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let r=this._element.scrollHeight>document.documentElement.clientHeight,d=this._scrollBar.getWidth(),M=d>0;(!M&&r&&!u()||M&&!r&&u())&&(this._element.style.paddingLeft=`${d}px`),(M&&!r&&!u()||!M&&r&&u())&&(this._element.style.paddingRight=`${d}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(r,d){return this.each(function(){let M=Hi.getOrCreateInstance(this,r);if(typeof r=="string"){if(M[r]===void 0)throw new TypeError(`No method named "${r}"`);M[r](d)}})}}R.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(L){let r=V(this);["A","AREA"].includes(this.tagName)&&L.preventDefault(),R.one(r,Cn,M=>{M.defaultPrevented||R.one(r,Sn,()=>{_(this)&&this.focus()})});let d=Y.findOne(".modal.show");d&&Hi.getInstance(d).hide(),Hi.getOrCreateInstance(r).toggle(this)}),le(Hi),a(Hi);let Mn="offcanvas",Tn={backdrop:!0,keyboard:!0,scroll:!1},Ro={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},On="show",Rn=".offcanvas.show",Dn="hidden.bs.offcanvas";class ri extends oe{constructor(r,d){super(r),this._config=this._getConfig(d),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Mn}static get Default(){return Tn}toggle(r){return this._isShown?this.hide():this.show(r)}show(r){this._isShown||R.trigger(this._element,"show.bs.offcanvas",{relatedTarget:r}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new Vr().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(On),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),R.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:r})},this._element,!0))}hide(){this._isShown&&(R.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(On),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new Vr().reset(),R.trigger(this._element,Dn)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(r){return r={...Tn,...j.getDataAttributes(this._element),...typeof r=="object"?r:{}},h(Mn,r,Ro),r}_initializeBackDrop(){return new pn({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new gn({trapElement:this._element})}_addEventListeners(){R.on(this._element,"keydown.dismiss.bs.offcanvas",r=>{this._config.keyboard&&r.key==="Escape"&&this.hide()})}static jQueryInterface(r){return this.each(function(){let d=ri.getOrCreateInstance(this,r);if(typeof r=="string"){if(d[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);d[r](this)}})}}R.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(L){let r=V(this);if(["A","AREA"].includes(this.tagName)&&L.preventDefault(),p(this))return;R.one(r,Dn,()=>{_(this)&&this.focus()});let d=Y.findOne(Rn);d&&d!==r&&ri.getInstance(d).hide(),ri.getOrCreateInstance(r).toggle(this)}),R.on(window,"load.bs.offcanvas.data-api",()=>Y.find(Rn).forEach(L=>ri.getOrCreateInstance(L).show())),le(ri),a(ri);let Do=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Bo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Po=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Io=(L,r)=>{let d=L.nodeName.toLowerCase();if(r.includes(d))return!Do.has(d)||Boolean(Bo.test(L.nodeValue)||Po.test(L.nodeValue));let M=r.filter(P=>P instanceof RegExp);for(let P=0,F=M.length;P<F;P++)if(M[P].test(d))return!0;return!1};function Bn(L,r,d){if(!L.length)return L;if(d&&typeof d=="function")return d(L);let M=new window.DOMParser().parseFromString(L,"text/html"),P=[].concat(...M.body.querySelectorAll("*"));for(let F=0,U=P.length;F<U;F++){let J=P[F],ee=J.nodeName.toLowerCase();if(!Object.keys(r).includes(ee)){J.remove();continue}let re=[].concat(...J.attributes),ne=[].concat(r["*"]||[],r[ee]||[]);re.forEach(te=>{Io(te,ne)||J.removeAttribute(te.nodeName)})}return M.body.innerHTML}let Pn="tooltip",Ho=new Set(["sanitize","allowList","sanitizeFn"]),jo={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Fo={AUTO:"auto",TOP:"top",RIGHT:u()?"left":"right",BOTTOM:"bottom",LEFT:u()?"right":"left"},Wo={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},qo={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},Lr="fade",ur="show",fr="show",$r="out",In=".tooltip-inner",Hn=".modal",jn="hide.bs.modal",Er="hover",Fn="focus";class ji extends oe{constructor(r,d){if(ei===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(r),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(d),this.tip=null,this._setListeners()}static get Default(){return Wo}static get NAME(){return Pn}static get Event(){return qo}static get DefaultType(){return jo}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(r){if(this._isEnabled)if(r){let d=this._initializeOnDelegatedTarget(r);d._activeTrigger.click=!d._activeTrigger.click,d._isWithActiveTrigger()?d._enter(null,d):d._leave(null,d)}else{if(this.getTipElement().classList.contains(ur))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),R.off(this._element.closest(Hn),jn,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;let r=R.trigger(this._element,this.constructor.Event.SHOW),d=f(this._element),M=d===null?this._element.ownerDocument.documentElement.contains(this._element):d.contains(this._element);if(r.defaultPrevented||!M)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(In).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);let P=this.getTipElement(),F=(te=>{do te+=Math.floor(1e6*Math.random());while(document.getElementById(te));return te})(this.constructor.NAME);P.setAttribute("id",F),this._element.setAttribute("aria-describedby",F),this._config.animation&&P.classList.add(Lr);let U=typeof this._config.placement=="function"?this._config.placement.call(this,P,this._element):this._config.placement,J=this._getAttachment(U);this._addAttachmentClass(J);let{container:ee}=this._config;Q.set(P,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(ee.append(P),R.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Qe(this._element,P,this._getPopperConfig(J)),P.classList.add(ur);let re=this._resolvePossibleFunction(this._config.customClass);re&&P.classList.add(...re.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(te=>{R.on(te,"mouseover",S)});let ne=this.tip.classList.contains(Lr);this._queueCallback(()=>{let te=this._hoverState;this._hoverState=null,R.trigger(this._element,this.constructor.Event.SHOWN),te===$r&&this._leave(null,this)},this.tip,ne)}hide(){if(!this._popper)return;let r=this.getTipElement();if(R.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;r.classList.remove(ur),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(M=>R.off(M,"mouseover",S)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;let d=this.tip.classList.contains(Lr);this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==fr&&r.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),R.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,d),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;let r=document.createElement("div");r.innerHTML=this._config.template;let d=r.children[0];return this.setContent(d),d.classList.remove(Lr,ur),this.tip=d,this.tip}setContent(r){this._sanitizeAndSetContent(r,this.getTitle(),In)}_sanitizeAndSetContent(r,d,M){let P=Y.findOne(M,r);d||!P?this.setElementContent(P,d):P.remove()}setElementContent(r,d){if(r!==null)return s(d)?(d=g(d),void(this._config.html?d.parentNode!==r&&(r.innerHTML="",r.append(d)):r.textContent=d.textContent)):void(this._config.html?(this._config.sanitize&&(d=Bn(d,this._config.allowList,this._config.sanitizeFn)),r.innerHTML=d):r.textContent=d)}getTitle(){let r=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(r)}updateAttachment(r){return r==="right"?"end":r==="left"?"start":r}_initializeOnDelegatedTarget(r,d){return d||this.constructor.getOrCreateInstance(r.delegateTarget,this._getDelegateConfig())}_getOffset(){let{offset:r}=this._config;return typeof r=="string"?r.split(",").map(d=>Number.parseInt(d,10)):typeof r=="function"?d=>r(d,this._element):r}_resolvePossibleFunction(r){return typeof r=="function"?r.call(this._element):r}_getPopperConfig(r){let d={placement:r,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:M=>this._handlePopperPlacementChange(M)}],onFirstUpdate:M=>{M.options.placement!==M.placement&&this._handlePopperPlacementChange(M)}};return{...d,...typeof this._config.popperConfig=="function"?this._config.popperConfig(d):this._config.popperConfig}}_addAttachmentClass(r){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(r)}`)}_getAttachment(r){return Fo[r.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(r=>{if(r==="click")R.on(this._element,this.constructor.Event.CLICK,this._config.selector,d=>this.toggle(d));else if(r!=="manual"){let d=r===Er?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,M=r===Er?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;R.on(this._element,d,this._config.selector,P=>this._enter(P)),R.on(this._element,M,this._config.selector,P=>this._leave(P))}}),this._hideModalHandler=()=>{this._element&&this.hide()},R.on(this._element.closest(Hn),jn,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){let r=this._element.getAttribute("title"),d=typeof this._element.getAttribute("data-bs-original-title");(r||d!=="string")&&(this._element.setAttribute("data-bs-original-title",r||""),!r||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",r),this._element.setAttribute("title",""))}_enter(r,d){d=this._initializeOnDelegatedTarget(r,d),r&&(d._activeTrigger[r.type==="focusin"?Fn:Er]=!0),d.getTipElement().classList.contains(ur)||d._hoverState===fr?d._hoverState=fr:(clearTimeout(d._timeout),d._hoverState=fr,d._config.delay&&d._config.delay.show?d._timeout=setTimeout(()=>{d._hoverState===fr&&d.show()},d._config.delay.show):d.show())}_leave(r,d){d=this._initializeOnDelegatedTarget(r,d),r&&(d._activeTrigger[r.type==="focusout"?Fn:Er]=d._element.contains(r.relatedTarget)),d._isWithActiveTrigger()||(clearTimeout(d._timeout),d._hoverState=$r,d._config.delay&&d._config.delay.hide?d._timeout=setTimeout(()=>{d._hoverState===$r&&d.hide()},d._config.delay.hide):d.hide())}_isWithActiveTrigger(){for(let r in this._activeTrigger)if(this._activeTrigger[r])return!0;return!1}_getConfig(r){let d=j.getDataAttributes(this._element);return Object.keys(d).forEach(M=>{Ho.has(M)&&delete d[M]}),(r={...this.constructor.Default,...d,...typeof r=="object"&&r?r:{}}).container=r.container===!1?document.body:g(r.container),typeof r.delay=="number"&&(r.delay={show:r.delay,hide:r.delay}),typeof r.title=="number"&&(r.title=r.title.toString()),typeof r.content=="number"&&(r.content=r.content.toString()),h(Pn,r,this.constructor.DefaultType),r.sanitize&&(r.template=Bn(r.template,r.allowList,r.sanitizeFn)),r}_getDelegateConfig(){let r={};for(let d in this._config)this.constructor.Default[d]!==this._config[d]&&(r[d]=this._config[d]);return r}_cleanTipClass(){let r=this.getTipElement(),d=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),M=r.getAttribute("class").match(d);M!==null&&M.length>0&&M.map(P=>P.trim()).forEach(P=>r.classList.remove(P))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(r){let{state:d}=r;d&&(this.tip=d.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(d.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(r){return this.each(function(){let d=ji.getOrCreateInstance(this,r);if(typeof r=="string"){if(d[r]===void 0)throw new TypeError(`No method named "${r}"`);d[r]()}})}}a(ji);let No={...ji.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Uo={...ji.DefaultType,content:"(string|element|function)"},zo={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class Ar extends ji{static get Default(){return No}static get NAME(){return"popover"}static get Event(){return zo}static get DefaultType(){return Uo}isWithContent(){return this.getTitle()||this._getContent()}setContent(r){this._sanitizeAndSetContent(r,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(r,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(r){return this.each(function(){let d=Ar.getOrCreateInstance(this,r);if(typeof r=="string"){if(d[r]===void 0)throw new TypeError(`No method named "${r}"`);d[r]()}})}}a(Ar);let Wn="scrollspy",qn={offset:10,method:"auto",target:""},Ko={offset:"number",method:"string",target:"(string|element)"},tr="active",Xr=".nav-link, .list-group-item, .dropdown-item",Nn="position";class dr extends oe{constructor(r,d){super(r),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(d),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,R.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return qn}static get NAME(){return Wn}refresh(){let r=this._scrollElement===this._scrollElement.window?"offset":Nn,d=this._config.method==="auto"?r:this._config.method,M=d===Nn?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Y.find(Xr,this._config.target).map(P=>{let F=K(P),U=F?Y.findOne(F):null;if(U){let J=U.getBoundingClientRect();if(J.width||J.height)return[j[d](U).top+M,F]}return null}).filter(P=>P).sort((P,F)=>P[0]-F[0]).forEach(P=>{this._offsets.push(P[0]),this._targets.push(P[1])})}dispose(){R.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(r){return(r={...qn,...j.getDataAttributes(this._element),...typeof r=="object"&&r?r:{}}).target=g(r.target)||document.documentElement,h(Wn,r,Ko),r}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){let r=this._getScrollTop()+this._config.offset,d=this._getScrollHeight(),M=this._config.offset+d-this._getOffsetHeight();if(this._scrollHeight!==d&&this.refresh(),r>=M){let P=this._targets[this._targets.length-1];this._activeTarget!==P&&this._activate(P)}else{if(this._activeTarget&&r<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let P=this._offsets.length;P--;)this._activeTarget!==this._targets[P]&&r>=this._offsets[P]&&(this._offsets[P+1]===void 0||r<this._offsets[P+1])&&this._activate(this._targets[P])}}_activate(r){this._activeTarget=r,this._clear();let d=Xr.split(",").map(P=>`${P}[data-bs-target="${r}"],${P}[href="${r}"]`),M=Y.findOne(d.join(","),this._config.target);M.classList.add(tr),M.classList.contains("dropdown-item")?Y.findOne(".dropdown-toggle",M.closest(".dropdown")).classList.add(tr):Y.parents(M,".nav, .list-group").forEach(P=>{Y.prev(P,".nav-link, .list-group-item").forEach(F=>F.classList.add(tr)),Y.prev(P,".nav-item").forEach(F=>{Y.children(F,".nav-link").forEach(U=>U.classList.add(tr))})}),R.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:r})}_clear(){Y.find(Xr,this._config.target).filter(r=>r.classList.contains(tr)).forEach(r=>r.classList.remove(tr))}static jQueryInterface(r){return this.each(function(){let d=dr.getOrCreateInstance(this,r);if(typeof r=="string"){if(d[r]===void 0)throw new TypeError(`No method named "${r}"`);d[r]()}})}}R.on(window,"load.bs.scrollspy.data-api",()=>{Y.find('[data-bs-spy="scroll"]').forEach(L=>new dr(L))}),a(dr);let pr="active",Un="fade",zn="show",Kn=".active",Vn=":scope > li > .active";class _r extends oe{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(pr))return;let r,d=V(this._element),M=this._element.closest(".nav, .list-group");if(M){let U=M.nodeName==="UL"||M.nodeName==="OL"?Vn:Kn;r=Y.find(U,M),r=r[r.length-1]}let P=r?R.trigger(r,"hide.bs.tab",{relatedTarget:this._element}):null;if(R.trigger(this._element,"show.bs.tab",{relatedTarget:r}).defaultPrevented||P!==null&&P.defaultPrevented)return;this._activate(this._element,M);let F=()=>{R.trigger(r,"hidden.bs.tab",{relatedTarget:this._element}),R.trigger(this._element,"shown.bs.tab",{relatedTarget:r})};d?this._activate(d,d.parentNode,F):F()}_activate(r,d,M){let P=(!d||d.nodeName!=="UL"&&d.nodeName!=="OL"?Y.children(d,Kn):Y.find(Vn,d))[0],F=M&&P&&P.classList.contains(Un),U=()=>this._transitionComplete(r,P,M);P&&F?(P.classList.remove(zn),this._queueCallback(U,r,!0)):U()}_transitionComplete(r,d,M){if(d){d.classList.remove(pr);let F=Y.findOne(":scope > .dropdown-menu .active",d.parentNode);F&&F.classList.remove(pr),d.getAttribute("role")==="tab"&&d.setAttribute("aria-selected",!1)}r.classList.add(pr),r.getAttribute("role")==="tab"&&r.setAttribute("aria-selected",!0),m(r),r.classList.contains(Un)&&r.classList.add(zn);let P=r.parentNode;if(P&&P.nodeName==="LI"&&(P=P.parentNode),P&&P.classList.contains("dropdown-menu")){let F=r.closest(".dropdown");F&&Y.find(".dropdown-toggle",F).forEach(U=>U.classList.add(pr)),r.setAttribute("aria-expanded",!0)}M&&M()}static jQueryInterface(r){return this.each(function(){let d=_r.getOrCreateInstance(this);if(typeof r=="string"){if(d[r]===void 0)throw new TypeError(`No method named "${r}"`);d[r]()}})}}R.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(L){["A","AREA"].includes(this.tagName)&&L.preventDefault(),p(this)||_r.getOrCreateInstance(this).show()}),a(_r);let Gn="toast",$n="hide",vr="show",xr="showing",Vo={animation:"boolean",autohide:"boolean",delay:"number"},Xn={animation:!0,autohide:!0,delay:5e3};class gr extends oe{constructor(r,d){super(r),this._config=this._getConfig(d),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Vo}static get Default(){return Xn}static get NAME(){return Gn}show(){R.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove($n),m(this._element),this._element.classList.add(vr),this._element.classList.add(xr),this._queueCallback(()=>{this._element.classList.remove(xr),R.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(vr)&&(R.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(xr),this._queueCallback(()=>{this._element.classList.add($n),this._element.classList.remove(xr),this._element.classList.remove(vr),R.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(vr)&&this._element.classList.remove(vr),super.dispose()}_getConfig(r){return r={...Xn,...j.getDataAttributes(this._element),...typeof r=="object"&&r?r:{}},h(Gn,r,this.constructor.DefaultType),r}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(r,d){switch(r.type){case"mouseover":case"mouseout":this._hasMouseInteraction=d;break;case"focusin":case"focusout":this._hasKeyboardInteraction=d}if(d)return void this._clearTimeout();let M=r.relatedTarget;this._element===M||this._element.contains(M)||this._maybeScheduleHide()}_setListeners(){R.on(this._element,"mouseover.bs.toast",r=>this._onInteraction(r,!0)),R.on(this._element,"mouseout.bs.toast",r=>this._onInteraction(r,!1)),R.on(this._element,"focusin.bs.toast",r=>this._onInteraction(r,!0)),R.on(this._element,"focusout.bs.toast",r=>this._onInteraction(r,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(r){return this.each(function(){let d=gr.getOrCreateInstance(this,r);if(typeof r=="string"){if(d[r]===void 0)throw new TypeError(`No method named "${r}"`);d[r](this)}})}}return le(gr),a(gr),{Alert:he,Button:B,Carousel:Ze,Collapse:vt,Dropdown:lt,Modal:Hi,Offcanvas:ri,Popover:Ar,ScrollSpy:dr,Tab:_r,Toast:gr,Tooltip:ji}})});var mo=Tr(ro()),yo=Tr(no()),jr=Tr(ho());var Bs=$=>$.split(/\s*,\s*/).reduce((N,K)=>{if(K.match(/-/)){let[V,W]=K.split(/\s*-\s*/).map(s=>parseInt(s,10));[...new Array(W-V+1).keys()].forEach(s=>N.push(V+s))}else K.match(/^\d+$/)&&N.push(parseInt(K,10));return N},[]),uo=Bs;var De=[],Ps=()=>{De.push([0,0,0,0]),De.push([128,0,0,1]),De.push([0,128,0,2]),De.push([128,128,0,3]),De.push([0,0,128,4]),De.push([128,0,128,5]),De.push([0,128,128,6]),De.push([192,192,192,7]),De.push([128,128,128,8]),De.push([255,0,0,9]),De.push([0,255,0,10]),De.push([255,255,0,11]),De.push([0,0,255,12]),De.push([255,0,255,13]),De.push([0,255,255,14]),De.push([255,255,255,15]),[0,95,135,175,215,255].forEach($=>{[0,95,135,175,215,255].forEach(N=>{[0,95,135,175,215,255].forEach(K=>{De.push([$,N,K,16+parseInt(""+Math.floor($/255*5)+Math.floor(N/255*5)+Math.floor(K/255*5),6)])})})}),[8,18,28,38,48,58,68,78,88,98,108,118,128,138,148,158,168,178,188,198,208,218,228,238].forEach($=>{De.push([$,$,$,232+Math.floor($/10)])})},Is=($,N)=>[...$].sort((K,V)=>Math.abs(K[0]-N[0])+Math.abs(K[1]-N[1])+Math.abs(K[2]-N[2])-(Math.abs(V[0]-N[0])+Math.abs(V[1]-N[1])+Math.abs(V[2]-N[2]))||K[3]-V[3]).shift()||[0,0,0,0],Hs=($,N,K)=>(De.length||Ps(),(Is(De,[$,N,K])||[])[3]),fo=Hs;var rn=document.createElement("canvas"),po=rn.getContext("2d"),rr=($,N,K=!1)=>{let[V,W,s]=$;return qi($)?K?"39":"49":N.colours==="true"?`${K?38:48};2;${V??0};${W??0};${s??0}`:`${K?38:48};5;${fo(V??0,W??0,s??0)}`},qi=([,,,$])=>($??0)<13,js=($,N)=>{let K=$.width,V=$.height,W="";if(K>N.maxWidth){let h=K/N.maxWidth;K=N.maxWidth,V=Math.floor(V/h)}if(V>N.maxHeight){let h=V/N.maxHeight;V=N.maxHeight,K=Math.floor(K/h)}rn.width=K,rn.height=V,po.drawImage($,0,0,K,V);let s=po.getImageData(0,0,K,V),g=s.data;for(let h=0,_=g.length;h<_;){let p=()=>h>0&&h/4%K==0;if(N.unicode){let f=g.slice(h,h+4),S=g.slice(h+K*4,h+4+K*4);f[0]===S[0]&&f[1]===S[1]&&f[2]===S[2]&&!qi(f)&&!qi(S)||qi(f)&&qi(S)?W+=`[${rr(f,N)}m `:qi(S)&&!qi(f)?W+=`[${rr(S,N)};${rr(f,N,!0)}m\u2580`:W+=`[${rr(S,N,!0)};${rr(f,N)}m\u2584`,h+=4,p()&&(h+=4*K,W+=`[m
`);continue}W+=`[${rr(g.slice(h,h+4),N)}m  `,h+=4,p()&&(W+=`[m
`)}for(;W.match(/(\x1b\[[0-9;]+m)([▄▀ ]+)\1/);)W=W.replace(/(\x1b\[[0-9;]+m)([▄▀ ]+)\1/g,"$1$2");return W},_o=js;var Fs=$=>new Promise((N,K)=>{let V=new FileReader;V.addEventListener("load",W=>{let s=W?.target?.result;if(!s){K(new TypeError("readImage: No file."));return}N(s)}),V.readAsDataURL($)});var vo=Fs;var na=Tr(go());document.addEventListener("click",$=>{let N=$.target;if(!(N instanceof HTMLElement)||!N.matches("a.copy"))return;$.preventDefault();let K=N.dataset.clipboardTarget??null;if(!K)return;let V=document.querySelector(K);!V||navigator.clipboard.writeText(V.innerText)});var yr=document.querySelector(".parser .btn"),Fr=yr.querySelector('input[type="file"]'),Wr=document.querySelector(".url-container"),Nt=document.querySelector('input[type="url"]'),sn=document.querySelector(".error-container"),bo=sn.querySelector(".error-content"),qr=document.querySelector(".options"),an=Array.from(document.querySelectorAll('input[name="colours"]')),So=document.querySelector('input[name="maxHeight"]'),Co=document.querySelector('input[name="maxWidth"]'),Nr=document.querySelector('input[name="unicode"]'),wo=Array.from(document.querySelectorAll('input[name="loop"]')),[br]=wo,Sr=document.querySelector('input[name="loop_n"]'),Lo=document.querySelector(".plural"),Ni=document.querySelector('input[name="frames"]'),Ws=document.querySelectorAll("a.load-url"),Ui=new mo.Terminal({convertEol:!0,theme:{background:"#272822",cursor:"transparent",foreground:"#f8f8f2"}}),Eo=new yo.FitAddon,qs=document.querySelector("pre.copy-paste code"),rt={index:0,timeout:null},cn=($="")=>{if($===""){sn.classList.add("d-none"),bo.innerText="";return}sn.classList.remove("d-none"),bo.innerText=$},ai=document.createElement("canvas"),ln=ai.getContext("2d"),Ao=($,N=()=>{})=>fetch($).then(K=>K.arrayBuffer()).then(K=>(0,jr.parseGIF)(K)).then(K=>(ai.height=K.lsd.height,ai.width=K.lsd.width,(0,jr.decompressFrames)(K,!0))).then(K=>{Ni.value===""&&(Ni.value=`1-${K.length}`),ln.imageSmoothingEnabled=!1;let V=uo(Ni.value),W=K.map((g,h)=>{let _=document.createElement("canvas"),p=_.getContext("2d");_.height=ai.height,_.width=ai.width;let f=p.createImageData(g.dims.width,g.dims.height);return f.data.set(g.patch),p.putImageData(f,g.dims.left,g.dims.top),g.disposalType===2&&ln.clearRect(0,0,ai.width,ai.height),ln.drawImage(_,0,0),V.includes(h+1)?{ansiEscape:_o(ai,{colours:an.reduce((m,n)=>n.checked?n.value:m,"256"),maxHeight:parseInt(So.value,10),maxWidth:parseInt(Co.value,10),unicode:Nr.checked}),delay:g.delay}:{ansiEscape:"",delay:0}}),s=()=>{++rt.index>=V.length&&(rt.index=0),Ui.write(`[${(W[V[rt.index]-1].ansiEscape.match(/\n/g)||[]).length*(Nr.checked?1:2)}A`),Ui.write(W[V[rt.index]-1].ansiEscape),rt.timeout=setTimeout(s,W[V[rt.index]-1].delay)};rt.timeout!==null&&(clearTimeout(rt.timeout),rt.timeout=null,rt.index=0),s(),Ui.resize(Ui.cols,(W[0].ansiEscape.match(/\n/g)||[]).length+1),qs.innerText=`${W.reduce((g,h,_)=>(V.includes(_+1)&&g.push(`frame${_+1}() {
printf "${h.ansiEscape.replace(/\x1b/g,"\\e")}";
}`),g),[]).join(`
`)}

${br.checked?`i=${Sr.value};
`:""}while ${br.checked?"((i--))":"true"}; do
${V.map(g=>`frame${g};
sleep ${W[g-1].delay/1e3};
printf '\\e[${(W[g-1].ansiEscape.match(/\n/g)||[]).length*(Nr.checked?1:2)}A';`).join(`

`)}
done
`,cn("")}).catch(K=>{cn(K.message)}).finally(N),Ur=()=>{let $=Fr?.files?.[0],N=Nt.value,K=()=>[yr,Wr,qr].forEach(V=>V.classList.remove("loading"));return Ui.clear(),rt.timeout!==null&&(clearTimeout(rt.timeout),rt.timeout=null,rt.index=0),requestAnimationFrame(()=>[yr,Wr,qr].forEach(V=>V.classList.add("loading"))),$?vo($).then(V=>Ao(V,K)).catch(V=>cn(V.message)):N?Ao(N,K):new Promise(V=>V(requestAnimationFrame(K)))};Ui.loadAddon(Eo);Ui.open(document.querySelector("div.terminal"));Eo.fit();Fr.addEventListener("input",()=>{Ni.value="",Nt.value=""});Nt.addEventListener("input",$=>{if(!Nt.reportValidity()||Nt.value===""){$.stopImmediatePropagation();return}Ni.value="",Fr.value=""});br.addEventListener("focus",()=>Sr.focus());Sr.addEventListener("input",()=>{if(parseInt(Sr.value,10)===1){Lo.classList.add("d-none");return}Lo.classList.remove("d-none"),br.checked||(br.checked=!0)});Ni.addEventListener("change",()=>{requestAnimationFrame(()=>[yr,Wr,qr].forEach($=>$.classList.add("loading"))),Ur()});Ni.addEventListener("keydown",({key:$})=>{$==="Enter"&&(requestAnimationFrame(()=>[yr,Wr,qr].forEach(N=>N.classList.add("loading"))),Ur())});[Fr,Nt,Nr,...an,Co,So,...wo,Sr].forEach($=>$.addEventListener("input",({target:N})=>{Ur().then(()=>{N===Nt&&Nt.focus()})}));Ws.forEach($=>$.addEventListener("click",N=>{N.preventDefault();let{url:K,colours:V}=$.dataset;Nt.value=K??"",an.forEach(W=>{W.value===V&&(W.checked=!0)}),Ur()}));})();
/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
//# sourceMappingURL=app.js.map
